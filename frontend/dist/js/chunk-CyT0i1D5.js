import{u as e,r as t,j as r,L as n,o as i,R as s,p as a,q as o,b as l,a as c}from"./chunk-61qy-ame.js";import{a as d,p as x,n as h}from"./chunk-D0fInH4s.js";import{B as m,h as u,bb as g,bc as p,bd as b,aD as j,G as f,C as v,a as y,n as w,O as S,be as C,bf as k,bg as I,bh as W,bi as N,bj as P,J as A,bk as R,bl as z,b7 as T,q as O,aX as M,I as E,ak as D,r as _,aZ as L,b as B,s as $,aC as F,aI as H,ab as U,bm as G,bn as V,aE as q,ai as Y,K,aq as X,bo as Q,aa as J,F as Z,u as ee,v as te,M as re,X as ne,bp as ie,bq as se,a0 as ae,aY as oe,al as le,br as ce,aj as de,am as xe,bs as he,bt as me,L as ue,az as ge,aO as pe,bu as be,e as je,bv as fe,bw as ve,bx as ye,by as we,bz as Se,bA as Ce,bB as ke,bC as Ie,x as We,y as Ne,Q as Pe,z as Ae,N as Re,aF as ze,aJ as Te,aK as Oe,bD as Me,aA as Ee,bE as De,_ as _e,f as Le,aG as Be,bF as $e,Z as Fe,bG as He,bH as Ue,bI as Ge,bJ as Ve,bK as qe,V as Ye,p as Ke,bL as Xe,ao as Qe,ad as Je,P as Ze,j as et,t as tt,l as rt,bM as nt,bN as it,bO as st,bP as at,bQ as ot,a8 as lt,bR as ct,bS as dt,bT as xt,a1 as ht,bU as mt,bV as ut,bW as gt,m as pt,as as bt,bX as jt,o as ft,R as vt,a2 as yt,bY as wt,a_ as St,bZ as Ct,ax as kt,b_ as It,d as Wt,b$ as Nt,i as Pt,c0 as At,c1 as Rt,aS as zt,c2 as Tt,b6 as Ot,c3 as Mt,U as Et,c4 as Dt,a9 as _t,Y as Lt,c5 as Bt,c6 as $t}from"./chunk-B-IQjRUg.js";import{a as Ft,b as Ht,u as Ut,c as Gt}from"./index-DCV20a9Q.js";import{u as Vt,a as qt}from"./chunk-UD5OBSiC.js";import{O as Yt,V as Kt,B as Xt,a as Qt,C as Jt}from"./chunk-C0mTAqnC.js";import{a as Zt}from"./chunk-Do_a5Wyq.js";const er=()=>{const n=e(),[i,s]=t.useState(7200),[a,o]=t.useState([]),[l,c]=t.useState(!0),[x,h]=t.useState([]),[V,q]=t.useState(!1),[Y,K]=t.useState([]),[X,Q]=t.useState(!1),J=[{id:1,name:"iPhone 15 Pro Max",price:28999e3,originalPrice:34999e3,rating:4.8,reviews:124,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",brand:"Apple",badge:"Sale"},{id:2,name:"MacBook Air M3",price:25999e3,originalPrice:29999e3,rating:4.9,reviews:89,image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400",brand:"Apple",badge:"Hot"},{id:3,name:"Samsung Galaxy S24 Ultra",price:22999e3,originalPrice:26999e3,rating:4.7,reviews:256,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",brand:"Samsung",badge:"New"},{id:4,name:"Dell XPS 13",price:19999e3,originalPrice:23999e3,rating:4.6,reviews:67,image:"https://images.unsplash.com/photo-1588702547954-4802d2fd6a3b?w=400",brand:"Dell",badge:"Popular"}];return t.useEffect(()=>{const e=setInterval(()=>{s(e=>e<=0?7200:e-1)},1e3);return()=>clearInterval(e)},[]),t.useEffect(()=>{(async()=>{var e,t;try{c(!0);const r=await(null==(t=null==(e=d)?void 0:e.getSaleProducts)?void 0:t.call(e,8));r&&r.success&&Array.isArray(r.data)?o(r.data):o([])}catch(r){o([])}finally{c(!1)}})()},[]),t.useEffect(()=>{(async()=>{try{q(!0),h(J.slice(0,8).map(e=>({...e,badge:"New"})))}catch(e){h([])}finally{q(!1)}})()},[]),t.useEffect(()=>{(async()=>{try{Q(!0),K(J.slice(2,10).map(e=>({...e,badge:"Hot"})))}catch(e){K([])}finally{Q(!1)}})()},[]),r.jsxs(m,{sx:{background:"#ffffff"},children:[r.jsxs(m,{sx:{position:"relative",height:{xs:280,md:380},overflow:"hidden",background:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e40af 100%)",mt:5,"&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent)",animation:"bannerSlide 4s ease-in-out infinite"},"&::after":{content:'""',position:"absolute",top:0,right:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.05), transparent)",animation:"bannerSlide 6s ease-in-out infinite reverse"}},children:[r.jsxs(m,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:1,pointerEvents:"none"},children:[r.jsx(u,{sx:{position:"absolute",top:"20%",left:"10%",fontSize:30,color:"rgba(255,255,255,0.3)",animation:"float 3s ease-in-out infinite"}}),r.jsx(g,{sx:{position:"absolute",top:"30%",right:"15%",fontSize:25,color:"rgba(255,255,255,0.2)",animation:"float 4s ease-in-out infinite reverse"}}),r.jsx(p,{sx:{position:"absolute",bottom:"25%",left:"20%",fontSize:28,color:"rgba(255,255,255,0.25)",animation:"float 5s ease-in-out infinite"}}),r.jsx(b,{sx:{position:"absolute",bottom:"30%",right:"20%",fontSize:32,color:"rgba(255,255,255,0.2)",animation:"float 6s ease-in-out infinite reverse"}}),[...Array(8)].map((e,t)=>r.jsx(m,{sx:{position:"absolute",width:4,height:4,background:"rgba(255,255,255,0.6)",borderRadius:"50%",top:100*Math.random()+"%",left:100*Math.random()+"%",animation:`particle ${3+4*Math.random()}s ease-in-out infinite`,animationDelay:2*Math.random()+"s"}},t))]}),r.jsx(j,{maxWidth:"xl",sx:{position:"relative",zIndex:2,height:"100%",display:"flex",alignItems:"center",py:4},children:r.jsxs(f,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(f,{item:!0,xs:12,md:6,children:r.jsxs(m,{sx:{animation:"fadeInUp 0.8s ease-out"},children:[r.jsx(v,{label:"ðŸ”¥ HOT DEAL",sx:{mb:3,px:3,py:1.5,bgcolor:"rgba(239, 68, 68, 0.9)",color:"white",fontWeight:800,fontSize:"0.9rem",borderRadius:3,border:"2px solid rgba(255,255,255,0.8)",boxShadow:"0 4px 15px rgba(239, 68, 68, 0.4)",animation:"pulse 2s ease-in-out infinite",textShadow:"0 2px 4px rgba(0,0,0,0.3)"}}),r.jsxs(y,{variant:"h3",sx:{fontSize:{xs:"1.5rem",md:"2.2rem"},fontWeight:900,mb:2,color:"white",lineHeight:1.2,textShadow:"0 2px 4px rgba(0,0,0,0.3)",animation:"fadeInUp 0.8s ease-out",background:"linear-gradient(135deg, #ffffff 0%, #f8fafc 50%, #ffffff 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"white",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"},children:["MacBook Pro M3",r.jsx("br",{}),r.jsx(m,{component:"span",sx:{color:"#fbbf24"},children:"Giáº£m 15% + Táº·ng Balo"})]}),r.jsxs(y,{variant:"body1",sx:{mb:3,color:"rgba(255,255,255,0.9)",fontWeight:500,fontSize:{xs:"0.9rem",md:"1rem"}},children:["Chip M3 Pro siÃªu máº¡nh â€¢ MÃ n hÃ¬nh Liquid Retina XDR",r.jsx("br",{}),r.jsx("strong",{children:"Chá»‰ tá»« 45,999,000â‚«"})]}),r.jsxs(w,{direction:{xs:"column",sm:"row"},spacing:2,children:[r.jsx(S,{variant:"contained",size:"medium",startIcon:r.jsx(u,{}),sx:{px:4,py:1.5,fontSize:"1rem",fontWeight:800,borderRadius:2,bgcolor:"#fbbf24",color:"#1a202c",border:"2px solid rgba(255,255,255,0.3)",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.4)",animation:"fadeInUp 0.8s ease-out 0.3s both",textShadow:"0 1px 2px rgba(0,0,0,0.2)","&:hover":{bgcolor:"#f59e0b",transform:"translateY(-2px) scale(1.02)",boxShadow:"0 8px 20px rgba(251, 191, 36, 0.6)",border:"2px solid white"}},children:"ðŸ›’ MUA NGAY"}),r.jsx(S,{variant:"outlined",size:"medium",sx:{px:4,py:1.5,border:"2px solid rgba(255,255,255,0.8)",color:"white",fontSize:"1rem",fontWeight:700,borderRadius:2,animation:"fadeInUp 0.8s ease-out 0.5s both",textShadow:"0 1px 2px rgba(0,0,0,0.3)","&:hover":{border:"2px solid white",bgcolor:"rgba(255,255,255,0.15)",transform:"translateY(-2px)",boxShadow:"0 6px 18px rgba(255,255,255,0.2)"}},children:"ðŸ’³ TRáº¢ GÃ“P 0%"})]})]})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(m,{sx:{display:"flex",justifyContent:"center",animation:"fadeInRight 0.8s ease-out 0.3s both"},children:r.jsxs(m,{sx:{width:{xs:180,md:240},height:{xs:180,md:240},borderRadius:5,background:"linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.08))",border:"3px solid rgba(255,255,255,0.4)",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(15px)",position:"relative",boxShadow:"0 15px 35px rgba(0,0,0,0.2)",animation:"float 4s ease-in-out infinite","&::before":{content:'""',position:"absolute",top:-5,left:-5,right:-5,bottom:-5,background:"linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.1), rgba(255,255,255,0.3))",borderRadius:5,zIndex:-1,animation:"rotate 8s linear infinite"}},children:[r.jsx(b,{sx:{fontSize:"3rem",color:"#fbbf24"}}),r.jsx(m,{sx:{position:"absolute",top:8,right:8,bgcolor:"#ef4444",color:"white",px:1.5,py:1,borderRadius:2,fontSize:"0.75rem",fontWeight:800,border:"1px solid rgba(255,255,255,0.9)",boxShadow:"0 3px 10px rgba(239, 68, 68, 0.4)",animation:"pulse 1.5s ease-in-out infinite",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"ðŸ”¥ -15%"}),r.jsx(m,{sx:{position:"absolute",bottom:8,left:8,bgcolor:"#10b981",color:"white",px:1.5,py:1,borderRadius:2,fontSize:"0.75rem",fontWeight:800,border:"1px solid rgba(255,255,255,0.9)",boxShadow:"0 3px 10px rgba(16, 185, 129, 0.4)",animation:"bounce 2s ease-in-out infinite",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"ðŸš€ HOT"})]})})})]})})]}),r.jsx(m,{sx:{py:5,background:"linear-gradient(135deg, #f8fafc 0%, #ffffff 50%, #f8fafc 100%)",borderBottom:"2px solid #e2e8f0",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, transparent, #3b82f6, transparent)"}},children:r.jsxs(j,{maxWidth:"xl",children:[r.jsxs(m,{sx:{textAlign:"center",mb:4},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:800,color:"#1e3a8a",position:"relative",display:"inline-block","&::after":{content:'""',position:"absolute",bottom:-12,left:"50%",transform:"translateX(-50%)",width:80,height:4,bgcolor:"linear-gradient(90deg, #3b82f6, #10b981)",borderRadius:2}},children:"ðŸ·ï¸ DANH Má»¤C Sáº¢N PHáº¨M"}),r.jsx(y,{variant:"body1",sx:{mt:2,color:"text.secondary",fontSize:"1.1rem",maxWidth:600,mx:"auto"},children:"KhÃ¡m phÃ¡ cÃ¡c danh má»¥c sáº£n pháº©m Ä‘a dáº¡ng vá»›i cháº¥t lÆ°á»£ng cao vÃ  giÃ¡ cáº£ cáº¡nh tranh"})]}),r.jsx(f,{container:!0,spacing:2,justifyContent:"center",sx:{mt:2},children:[{name:"Äiá»‡n thoáº¡i",icon:r.jsx(p,{}),count:"2.5k",color:"#3b82f6"},{name:"Laptop",icon:r.jsx(b,{}),count:"1.2k",color:"#10b981"},{name:"Tablet",icon:r.jsx(C,{}),count:"800",color:"#f59e0b"},{name:"Äá»“ng há»“",icon:r.jsx(k,{}),count:"1.5k",color:"#ef4444"},{name:"Tai nghe",icon:r.jsx(I,{}),count:"900",color:"#8b5cf6"},{name:"Loa",icon:r.jsx(W,{}),count:"600",color:"#06b6d4"},{name:"Camera",icon:r.jsx(N,{}),count:"400",color:"#ec4899"},{name:"Gaming",icon:r.jsx(P,{}),count:"1.1k",color:"#84cc16"}].map((e,t)=>r.jsx(f,{item:!0,xs:6,sm:4,md:3,lg:1.5,children:r.jsxs(S,{fullWidth:!0,variant:"outlined",sx:{flexDirection:"column",gap:1,py:2,px:1.5,borderRadius:3,border:`2px solid ${e.color}30`,color:"text.primary",fontWeight:600,fontSize:"0.9rem",minHeight:100,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"rgba(255,255,255,0.8)",backdropFilter:"blur(10px)","&:hover":{bgcolor:e.color,color:"white",border:`2px solid ${e.color}`,transform:"translateY(-8px) scale(1.05)",boxShadow:`0 12px 24px ${e.color}30`}},children:[r.jsx(m,{sx:{color:e.color,fontSize:"2rem",mb:.5,transition:"all 0.3s ease"},children:e.icon}),r.jsx(y,{variant:"body2",sx:{fontWeight:700,mb:.5,transition:"all 0.3s ease"},children:e.name}),r.jsx(v,{label:e.count,size:"small",sx:{bgcolor:`${e.color}20`,color:e.color,fontWeight:700,fontSize:"0.7rem",height:24,transition:"all 0.3s ease"}})]})},t))})]})}),r.jsx(m,{sx:{py:4},children:r.jsx(j,{maxWidth:"xl",sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:r.jsxs(f,{container:!0,spacing:3,sx:{width:"100%",maxWidth:"1400px",margin:"0 auto"},children:[r.jsx(f,{item:!0,xs:12,children:r.jsxs(A,{sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, #dc2626 0%, #ef4444 100%)",color:"white",position:"relative",overflow:"hidden",textAlign:"center",boxShadow:"0 10px 30px rgba(220, 38, 38, 0.3)","&::before":{content:'""',position:"absolute",top:0,left:"-100%",width:"100%",height:"100%",background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent)",animation:"shine 2s infinite"}},children:[r.jsx(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexWrap:"wrap",gap:2,flexDirection:{xs:"column",md:"row"}},children:r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,justifyContent:"center"},children:[r.jsx(m,{sx:{bgcolor:"rgba(255,255,255,0.2)",borderRadius:"50%",p:1.5,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(g,{sx:{fontSize:32,color:"#fbbf24"}})}),r.jsxs(m,{children:[r.jsx(y,{variant:"h3",sx:{fontWeight:900,mb:1,fontSize:{xs:"1.5rem",sm:"2rem",md:"2.5rem"},textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"âš¡ FLASH SALE SIÃŠU KHá»¦NG âš¡"}),r.jsx(y,{variant:"h6",sx:{mb:2},children:"Giáº£m giÃ¡ lÃªn Ä‘áº¿n 70% â€¢ Sá»‘ lÆ°á»£ng cÃ³ háº¡n!"}),r.jsx(m,{sx:{display:"flex",gap:1,alignItems:"center",justifyContent:"center",mb:2},children:[{value:Math.floor(i/3600),label:"GIá»œ"},{value:Math.floor(i%3600/60),label:"PHÃšT"},{value:i%60,label:"GIÃ‚Y"}].map((e,t)=>r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(m,{sx:{bgcolor:"white",color:"#dc2626",px:2,py:1,borderRadius:2,fontSize:{xs:"1.2rem",md:"1.5rem"},fontWeight:900,minWidth:{xs:50,md:60},boxShadow:"0 4px 15px rgba(255,255,255,0.3)",border:"2px solid rgba(255,255,255,0.8)",animation:"pulse 1s ease-in-out infinite"},children:e.value.toString().padStart(2,"0")}),r.jsx(y,{variant:"caption",sx:{color:"white",fontWeight:600,mt:.5,display:"block",fontSize:"0.8rem"},children:e.label})]},t))}),r.jsx(S,{variant:"contained",size:"large",startIcon:r.jsx(R,{}),sx:{bgcolor:"white",color:"#dc2626",fontWeight:800,px:4,py:1.5,fontSize:{xs:"1rem",md:"1.1rem"},borderRadius:3,boxShadow:"0 6px 20px rgba(255,255,255,0.4)",border:"2px solid rgba(255,255,255,0.8)","&:hover":{bgcolor:"#f8fafc",transform:"scale(1.05) translateY(-2px)",boxShadow:"0 8px 25px rgba(255,255,255,0.6)"}},children:"ðŸ”¥ XEM NGAY"})]})]})}),r.jsx(z,{variant:"determinate",value:(7200-i)/7200*100,sx:{mt:2,height:6,borderRadius:3,bgcolor:"rgba(255,255,255,0.3)","& .MuiLinearProgress-bar":{bgcolor:"white",borderRadius:3}}})]})}),r.jsxs(f,{item:!0,xs:12,children:[r.jsxs(m,{sx:{mb:4,textAlign:"center",maxWidth:"800px",mx:"auto"},children:[r.jsx(v,{label:"ðŸš¨ KHU Vá»°C SALE SIÃŠU KHá»¦NG ðŸš¨",sx:{fontSize:{xs:"0.8rem",md:"0.9rem"},fontWeight:700,py:1.5,px:3,bgcolor:"linear-gradient(135deg, #dc2626, #ef4444)",color:"white",border:"2px solid #ffffff",boxShadow:"0 4px 15px rgba(220, 38, 38, 0.4)",animation:"bounce 2s infinite",textShadow:"0 1px 2px rgba(0,0,0,0.3)",mb:2}}),r.jsx(y,{variant:"h4",sx:{fontWeight:800,mt:1,mb:2,background:"linear-gradient(135deg, #dc2626, #ef4444)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"0 2px 4px rgba(0,0,0,0.1)",fontSize:{xs:"1.5rem",md:"2rem"}},children:"ðŸ”¥ Sáº¢N PHáº¨M ÄANG GIáº¢M GIÃ SHOCK ðŸ”¥"}),r.jsx(y,{variant:"h6",sx:{color:"#dc2626",fontWeight:600,fontSize:{xs:"1rem",md:"1.1rem"}},children:"Giáº£m giÃ¡ lÃªn Ä‘áº¿n 70% â€¢ Sá»‘ lÆ°á»£ng cÃ³ háº¡n â€¢ Nhanh tay káº»o háº¿t!"})]}),r.jsx(m,{sx:{p:2,mb:3,borderRadius:4,border:"4px solid #dc2626",background:"linear-gradient(135deg, #fef2f2 0%, #fee2e2 50%, #fecaca 100%)",boxShadow:"0 10px 30px rgba(220, 38, 38, 0.2)",position:"relative","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"linear-gradient(45deg, #dc2626, #ef4444, #dc2626, #ef4444)",borderRadius:4,zIndex:-1,animation:"rainbow 3s ease-in-out infinite"}},children:r.jsx(f,{container:!0,spacing:2,sx:{justifyContent:"center",alignItems:"stretch"},children:(l?Array.from({length:8}):a.length>0?a.slice(0,8).filter(e=>e&&(e.id||e.name)):J).map((e,t)=>e?r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:l?r.jsx(T,{variant:"rectangular",height:280,sx:{borderRadius:2}}):r.jsxs(O,{sx:{height:"100%",minHeight:350,borderRadius:3,border:"3px solid #dc2626",boxShadow:"0 8px 25px rgba(220, 38, 38, 0.3)",background:"linear-gradient(135deg, #ffffff 0%, #fef2f2 100%)",transition:"all 0.3s ease",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #dc2626, #ef4444, #dc2626)",animation:"saleGlow 2s ease-in-out infinite alternate"},"&:hover":{transform:"translateY(-6px) scale(1.02)",boxShadow:"0 15px 35px rgba(220, 38, 38, 0.4)",border:"3px solid #ef4444"}},children:[r.jsxs(m,{sx:{position:"relative"},children:[r.jsx(M,{component:"img",image:e.imageUrl||e.image||"https://via.placeholder.com/300x200?text=Product",alt:e.name||"Product",sx:{height:160,objectFit:"cover",borderRadius:"6px 6px 0 0"}}),r.jsxs(m,{sx:{position:"absolute",top:8,left:8,display:"flex",flexDirection:"column",gap:.5},children:[r.jsx(v,{label:"ðŸ”¥ SALE",size:"small",sx:{bgcolor:"#dc2626",color:"white",fontWeight:700,fontSize:"0.7rem",height:24,border:"1px solid #ffffff",boxShadow:"0 2px 6px rgba(220, 38, 38, 0.4)",animation:"pulse 1.5s ease-in-out infinite"}}),"Hot"===e.badge&&r.jsx(v,{label:"HOT",size:"small",sx:{bgcolor:"#f59e0b",color:"white",fontWeight:700}}),"New"===e.badge&&r.jsx(v,{label:"NEW",size:"small",sx:{bgcolor:"#10b981",color:"white",fontWeight:700}})]}),r.jsx(E,{sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white"}},children:r.jsx(D,{sx:{color:"grey.500"}})}),e.originalPrice&&r.jsxs(m,{sx:{position:"absolute",bottom:8,right:8,bgcolor:"#ef4444",color:"white",px:1.5,py:.5,borderRadius:1,fontSize:"0.8rem",fontWeight:700},children:["-",e.price&&e.originalPrice?Math.round(100*(1-e.price/e.originalPrice)):0,"%"]})]}),r.jsxs(_,{sx:{p:2,flexGrow:1,display:"flex",flexDirection:"column"},children:[r.jsx(y,{variant:"caption",sx:{color:"#3b82f6",fontWeight:500,textTransform:"uppercase",fontSize:"0.7rem"},children:e.brand||"Premium"}),r.jsx(y,{variant:"body2",sx:{fontWeight:600,mt:.25,mb:.75,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",cursor:"pointer",fontSize:"0.85rem","&:hover":{color:"#3b82f6"}},onClick:()=>e.id&&n(`/products/${e.id}`),children:e.name||"Product Name"}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:1},children:[r.jsx(L,{value:e.rating||4.5,precision:.1,size:"small",readOnly:!0}),r.jsxs(y,{variant:"caption",sx:{ml:1,color:"text.secondary"},children:["(",e.reviews||0,")"]})]}),r.jsxs(w,{direction:"row",alignItems:"baseline",spacing:1,sx:{mb:1.5},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:700,color:"#ef4444",fontSize:"1.1rem"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(1e3*(e.price||0))}),e.originalPrice&&r.jsx(y,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary",fontSize:"0.8rem"},children:new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(1e3*(e.originalPrice||0))})]}),r.jsx(S,{fullWidth:!0,variant:"contained",startIcon:r.jsx(u,{}),sx:{bgcolor:"#3b82f6",py:1,fontSize:{xs:"0.8rem",md:"0.85rem"},fontWeight:600,mt:"auto","&:hover":{bgcolor:"#2563eb",transform:"translateY(-1px)"}},children:"ThÃªm vÃ o giá»"})]})]})},`product-${e.id||t}`):null)})})]}),r.jsx(f,{item:!0,xs:12,children:r.jsx(tr,{title:"ðŸ†• Sáº¢N PHáº¨M Má»šI RA Máº®T",subtitle:"Nhá»¯ng sáº£n pháº©m cÃ´ng nghá»‡ má»›i nháº¥t vá»›i thiáº¿t káº¿ hiá»‡n Ä‘áº¡i",products:x,loading:V,fallbackProducts:J.slice(0,8),accentColor:"#10b981",badge:"NEW",badgeColor:"#10b981"})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(tr,{title:"ðŸ† Sáº¢N PHáº¨M BÃN CHáº Y NHáº¤T",subtitle:"Nhá»¯ng sáº£n pháº©m Ä‘Æ°á»£c khÃ¡ch hÃ ng yÃªu thÃ­ch vÃ  tin dÃ¹ng",products:Y,loading:X,fallbackProducts:J.slice(4,12),accentColor:"#f59e0b",badge:"BESTSELLER",badgeColor:"#f59e0b"})})]})})}),r.jsx(m,{sx:{py:8,background:"linear-gradient(135deg, #f8fafc 0%, #edf2f7 100%)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 30% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%)"}},children:r.jsxs(j,{maxWidth:"lg",children:[r.jsxs(m,{sx:{textAlign:"center",mb:6},children:[r.jsx(v,{label:"â­ Customer Reviews",sx:{mb:3,px:3,py:1,bgcolor:"rgba(245, 158, 11, 0.1)",color:"#f59e0b",fontWeight:700,border:"1px solid rgba(245, 158, 11, 0.2)"}}),r.jsx(y,{variant:"h3",sx:{fontWeight:900,mb:3,background:"linear-gradient(135deg, #1a202c, #2d3748)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"KhÃ¡ch hÃ ng nÃ³i gÃ¬ vá» chÃºng tÃ´i?"}),r.jsx(y,{variant:"h6",sx:{color:"text.secondary",maxWidth:600,mx:"auto"},children:"HÃ ng nghÃ¬n khÃ¡ch hÃ ng tin tÆ°á»Ÿng vÃ  hÃ i lÃ²ng vá»›i sáº£n pháº©m vÃ  dá»‹ch vá»¥ cá»§a chÃºng tÃ´i"})]}),r.jsx(f,{container:!0,spacing:4,children:[{name:"Nguyá»…n Thá»‹ Minh",role:"KhÃ¡ch hÃ ng VIP",rating:5,comment:"Dá»‹ch vá»¥ tuyá»‡t vá»i! Sáº£n pháº©m chÃ­nh hÃ£ng, giao hÃ ng nhanh, nhÃ¢n viÃªn tÆ° váº¥n nhiá»‡t tÃ¬nh. TÃ´i Ä‘Ã£ mua iPhone 15 Pro Max vÃ  ráº¥t hÃ i lÃ²ng vá»›i cháº¥t lÆ°á»£ng.",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b47c?w=100&h=100&fit=crop&crop=face",verified:!0,product:"iPhone 15 Pro Max"},{name:"Tráº§n VÄƒn HÃ¹ng",role:"Doanh nhÃ¢n",rating:5,comment:"MacBook Air M3 hoáº¡t Ä‘á»™ng mÆ°á»£t mÃ , thiáº¿t káº¿ Ä‘áº¹p, pin trÃ¢u. PhÃ¹ há»£p hoÃ n háº£o cho cÃ´ng viá»‡c cá»§a tÃ´i. Sáº½ tiáº¿p tá»¥c á»§ng há»™ shop!",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face",verified:!0,product:"MacBook Air M3"},{name:"LÃª Thá»‹ Hoa",role:"Sinh viÃªn",rating:5,comment:"Galaxy S24 Ultra vá»›i AI tÃ­ch há»£p quÃ¡ tuyá»‡t! Camera chá»¥p Ä‘áº¹p, hiá»‡u nÄƒng máº¡nh máº½. GiÃ¡ cáº£ há»£p lÃ½, khuyáº¿n mÃ£i háº¥p dáº«n!",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face",verified:!0,product:"Galaxy S24 Ultra"}].map((e,t)=>r.jsx(f,{item:!0,xs:12,md:4,children:r.jsx(O,{sx:{height:"100%",borderRadius:4,background:"#ffffff",border:"1px solid #e2e8f0",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",animation:`fadeInUp 0.8s ease-out ${.2*t}s both`,"&:hover":{transform:"translateY(-8px)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid rgba(59, 130, 246, 0.2)"}},children:r.jsxs(_,{sx:{p:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(B,{src:e.avatar,sx:{width:60,height:60,mr:2,border:"3px solid #3b82f6",boxShadow:"0 2px 4px -1px rgba(0, 0, 0, 0.05)"}}),r.jsxs(m,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:700,color:"text.primary"},children:e.name}),r.jsx(y,{variant:"body2",sx:{color:"text.secondary"},children:e.role}),e.verified&&r.jsx(v,{size:"small",label:"âœ“ ÄÃ£ mua hÃ ng",sx:{mt:.5,bgcolor:"#10b981",color:"white",fontSize:"0.7rem",height:20}})]})]}),r.jsx(L,{value:e.rating,readOnly:!0,sx:{mb:2}}),r.jsxs(y,{variant:"body1",sx:{color:"text.primary",fontStyle:"italic",lineHeight:1.6,mb:2,fontWeight:500},children:['"',e.comment,'"']}),r.jsxs(y,{variant:"caption",sx:{color:"#3b82f6",fontWeight:600,bgcolor:"rgba(59, 130, 246, 0.1)",px:2,py:.5,borderRadius:2},children:["Sáº£n pháº©m: ",e.product]})]})})},t))})]})}),r.jsx(m,{sx:{py:6,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23ffffff" fill-opacity="0.05"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")',opacity:.3}},children:r.jsxs(j,{maxWidth:"xl",children:[r.jsxs(m,{sx:{mb:5},children:[r.jsxs(m,{sx:{textAlign:"center",mb:4,position:"relative"},children:[r.jsx(y,{variant:"h3",sx:{fontWeight:800,mb:2,background:"linear-gradient(45deg, #ffffff, #f8fafc)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",position:"relative","&::after":{content:'""',position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",width:100,height:4,background:"linear-gradient(90deg, #ffffff, transparent)",borderRadius:2}},children:"ðŸ“° Tin tá»©c cÃ´ng nghá»‡"}),r.jsx(y,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)",fontWeight:400,maxWidth:500,mx:"auto"},children:"Cáº­p nháº­t nhá»¯ng thÃ´ng tin cÃ´ng nghá»‡ má»›i nháº¥t"})]}),r.jsx(f,{container:!0,spacing:3,children:[{title:"iPhone 15 Pro Max chÃ­nh thá»©c ra máº¯t",excerpt:"Apple giá»›i thiá»‡u iPhone 15 Pro Max vá»›i chip A17 Pro máº¡nh máº½ vÃ  camera 48MP chuyÃªn nghiá»‡p.",image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",date:"2 giá» trÆ°á»›c",category:"Smartphone",readTime:"3 phÃºt Ä‘á»c"},{title:"MacBook Air M3 - Laptop má»ng nháº¥t tháº¿ giá»›i",excerpt:"MacBook Air M3 vá»›i thiáº¿t káº¿ siÃªu má»ng, hiá»‡u nÄƒng vÆ°á»£t trá»™i vÃ  thá»i lÆ°á»£ng pin 18 giá».",image:"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400",date:"5 giá» trÆ°á»›c",category:"Laptop",readTime:"4 phÃºt Ä‘á»c"},{title:"Galaxy S24 Ultra vá»›i AI tÃ­ch há»£p",excerpt:"Samsung Galaxy S24 Ultra tÃ­ch há»£p AI máº¡nh máº½, camera 200MP vÃ  pin 5000mAh.",image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400",date:"1 ngÃ y trÆ°á»›c",category:"Smartphone",readTime:"5 phÃºt Ä‘á»c"}].map((e,t)=>r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(O,{sx:{borderRadius:3,border:"none",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",background:"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer","&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:"0 20px 40px rgba(0,0,0,0.3)"}},children:[r.jsxs(m,{sx:{position:"relative",overflow:"hidden",borderRadius:"12px 12px 0 0"},children:[r.jsx(M,{component:"img",image:e.image,alt:e.title,sx:{height:180,objectFit:"cover",transition:"transform 0.4s ease","&:hover":{transform:"scale(1.1)"}}}),r.jsx(m,{sx:{position:"absolute",top:12,left:12,display:"flex",gap:.5},children:r.jsx(v,{label:e.category,size:"small",sx:{bgcolor:"rgba(59, 130, 246, 0.9)",color:"white",fontWeight:600,fontSize:"0.7rem"}})}),r.jsx(m,{sx:{position:"absolute",top:12,right:12,bgcolor:"rgba(255,255,255,0.9)",px:1,py:.5,borderRadius:1,fontSize:"0.7rem",fontWeight:600,color:"#3b82f6"},children:e.readTime})]}),r.jsxs(_,{sx:{p:2.5},children:[r.jsx(y,{variant:"caption",sx:{color:"#3b82f6",fontWeight:600,textTransform:"uppercase",letterSpacing:.5,mb:1,display:"block"},children:e.date}),r.jsx(y,{variant:"h6",sx:{fontWeight:700,mb:1.5,lineHeight:1.3,color:"#1a202c",fontSize:"1.1rem"},children:e.title}),r.jsx(y,{variant:"body2",sx:{color:"text.secondary",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",lineHeight:1.4},children:e.excerpt})]})]})},t))})]}),r.jsx(m,{sx:{mt:5},children:r.jsxs(A,{sx:{p:4,borderRadius:4,background:"rgba(255,255,255,0.95)",backdropFilter:"blur(20px)",border:"none",boxShadow:"0 16px 48px rgba(0,0,0,0.15)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:"linear-gradient(90deg, #3b82f6, #10b981, #f59e0b, #ef4444)",borderRadius:"16px 16px 0 0"}},children:[r.jsxs(m,{sx:{textAlign:"center",mb:4,position:"relative"},children:[r.jsx(y,{variant:"h3",sx:{fontWeight:800,mb:2,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",position:"relative","&::after":{content:'""',position:"absolute",bottom:-8,left:"50%",transform:"translateX(-50%)",width:80,height:4,background:"linear-gradient(90deg, #3b82f6, #10b981)",borderRadius:2}},children:"âœ¨ Táº¡i sao chá»n chÃºng tÃ´i?"}),r.jsx(y,{variant:"h6",sx:{color:"rgba(255,255,255,0.8)",fontWeight:400,maxWidth:500,mx:"auto"},children:"Cam káº¿t mang Ä‘áº¿n tráº£i nghiá»‡m mua sáº¯m tá»‘t nháº¥t"})]}),r.jsx(f,{container:!0,spacing:3,children:[{icon:r.jsx($,{}),title:"ðŸšš Giao hÃ ng miá»…n phÃ­",desc:"Miá»…n phÃ­ giao hÃ ng toÃ n quá»‘c trong 24h",color:"#10b981"},{icon:r.jsx(F,{}),title:"ðŸ›¡ï¸ Báº£o hÃ nh chÃ­nh hÃ£ng",desc:"Báº£o hÃ nh 12 thÃ¡ng táº¡i TTBH",color:"#3b82f6"},{icon:r.jsx(H,{}),title:"ðŸ“ž Há»— trá»£ 24/7",desc:"TÆ° váº¥n miá»…n phÃ­ má»i lÃºc",color:"#f59e0b"},{icon:r.jsx(U,{}),title:"â†©ï¸ Äá»•i tráº£ dá»… dÃ ng",desc:"Äá»•i tráº£ trong 30 ngÃ y",color:"#ef4444"}].map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(m,{sx:{textAlign:"center",p:2.5,borderRadius:3,transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",background:"rgba(255,255,255,0.5)",border:`1px solid ${e.color}20`,"&:hover":{bgcolor:e.color,color:"white",transform:"translateY(-8px) scale(1.05)",boxShadow:`0 16px 32px ${e.color}30`,border:`1px solid ${e.color}`}},children:[r.jsx(m,{sx:{width:60,height:60,borderRadius:"50%",bgcolor:`${e.color}15`,border:`3px solid ${e.color}30`,display:"flex",alignItems:"center",justifyContent:"center",color:e.color,fontSize:"1.8rem",mx:"auto",mb:2,boxShadow:`0 8px 16px ${e.color}25`,transition:"all 0.3s ease"},children:e.icon}),r.jsx(y,{variant:"h6",sx:{fontWeight:700,mb:1,fontSize:"1.1rem",transition:"all 0.3s ease"},children:e.title}),r.jsx(y,{variant:"body2",sx:{color:"rgba(255,255,255,0.9)",fontSize:"0.9rem",lineHeight:1.4,transition:"all 0.3s ease"},children:e.desc})]})},t))})]})})]})}),r.jsx(m,{sx:{py:12,background:"linear-gradient(135deg, #1e3a8a 0%, #3b82f6 50%, #1e40af 100%)",color:"white",textAlign:"center",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.1) 0%, transparent 50%), radial-gradient(circle at 70% 80%, rgba(251, 191, 36, 0.1) 0%, transparent 50%)"}},children:r.jsxs(j,{maxWidth:"lg",sx:{position:"relative",zIndex:2},children:[r.jsx(m,{sx:{width:100,height:100,borderRadius:"50%",background:"linear-gradient(135deg, #fbbf24, #f59e0b, #dc2626)",display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",mb:4,fontSize:"2.5rem",animation:"pulse 3s ease-in-out infinite",boxShadow:"0 10px 30px rgba(251, 191, 36, 0.4)"},children:"ðŸš€"}),r.jsx(y,{variant:"h2",sx:{fontWeight:900,mb:3,background:"linear-gradient(135deg, #ffffff, #fbbf24, #ffffff)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"0 4px 8px rgba(0,0,0,0.3)",fontSize:{xs:"2rem",md:"3rem"}},children:"ðŸ›’ Mua sáº¯m thÃ´ng minh cÃ¹ng chÃºng tÃ´i"}),r.jsx(y,{variant:"h5",sx:{mb:6,opacity:.9,fontWeight:500,maxWidth:600,mx:"auto"},children:"HÃ ng ngÃ n sáº£n pháº©m chÃ­nh hÃ£ng â€¢ GiÃ¡ tá»‘t nháº¥t thá»‹ trÆ°á»ng â€¢ Dá»‹ch vá»¥ chuyÃªn nghiá»‡p"}),r.jsxs(w,{direction:{xs:"column",sm:"row"},spacing:4,sx:{justifyContent:"center",alignItems:"center"},children:[r.jsx(S,{variant:"contained",size:"large",startIcon:r.jsx(G,{}),sx:{px:8,py:3,fontSize:"1.2rem",fontWeight:800,borderRadius:4,bgcolor:"#fbbf24",color:"#1a202c",boxShadow:"0 8px 25px rgba(251, 191, 36, 0.4)",border:"2px solid rgba(255,255,255,0.3)",textShadow:"0 1px 2px rgba(0,0,0,0.2)","&:hover":{bgcolor:"#f59e0b",transform:"translateY(-4px) scale(1.05)",boxShadow:"0 15px 35px rgba(251, 191, 36, 0.6)",border:"2px solid white"}},children:"ðŸ›ï¸ XEM Sáº¢N PHáº¨M"}),r.jsx(S,{variant:"outlined",size:"large",startIcon:r.jsx(H,{}),sx:{px:8,py:3,fontSize:"1.2rem",fontWeight:800,borderRadius:4,border:"3px solid white",color:"white",boxShadow:"0 8px 25px rgba(255,255,255,0.2)",textShadow:"0 1px 2px rgba(0,0,0,0.3)","&:hover":{border:"3px solid #fbbf24",bgcolor:"rgba(251, 191, 36, 0.1)",transform:"translateY(-3px)",boxShadow:"0 12px 30px rgba(251, 191, 36, 0.3)"}},children:"ðŸ’¬ LIÃŠN Há»† TÆ¯ Váº¤N"})]}),r.jsx(m,{sx:{mt:6,display:"flex",justifyContent:"center",gap:6,flexWrap:"wrap"},children:[{icon:r.jsx($,{}),text:"ðŸšš Giao hÃ ng miá»…n phÃ­"},{icon:r.jsx(U,{}),text:"â†©ï¸ Äá»•i tráº£ 30 ngÃ y"},{icon:r.jsx(F,{}),text:"ðŸ›¡ï¸ Báº£o hÃ nh chÃ­nh hÃ£ng"},{icon:r.jsx(H,{}),text:"ðŸ“ž Há»— trá»£ 24/7"}].map((e,t)=>r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,color:"rgba(255,255,255,0.9)",fontWeight:600,fontSize:"1.1rem",animation:`fadeInUp 0.8s ease-out ${.1*t}s both`,"&:hover":{color:"#fbbf24",transform:"translateY(-2px)"}},children:[r.jsx(m,{sx:{fontSize:"1.5rem"},children:e.icon}),e.text]},t))})]})}),r.jsx("style",{children:"\n          @keyframes slide {\n            0% { transform: translateX(0); }\n            100% { transform: translateX(40px); }\n          }\n\n          @keyframes saleGlow {\n            0% { box-shadow: 0 0 10px rgba(220, 38, 38, 0.5); }\n            100% { box-shadow: 0 0 20px rgba(220, 38, 38, 0.8), 0 0 30px rgba(220, 38, 38, 0.4); }\n          }\n\n          @keyframes rainbow {\n            0% { background: linear-gradient(45deg, #dc2626, #ef4444); }\n            25% { background: linear-gradient(45deg, #ef4444, #f97316); }\n            50% { background: linear-gradient(45deg, #f97316, #eab308); }\n            75% { background: linear-gradient(45deg, #eab308, #22c55e); }\n            100% { background: linear-gradient(45deg, #22c55e, #dc2626); }\n          }\n\n          @keyframes newGlow {\n            0% { box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }\n            100% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8), 0 0 30px rgba(16, 185, 129, 0.4); }\n          }\n\n          @keyframes bestsellerGlow {\n            0% { box-shadow: 0 0 10px rgba(245, 158, 11, 0.5); }\n            100% { box-shadow: 0 0 20px rgba(245, 158, 11, 0.8), 0 0 30px rgba(245, 158, 11, 0.4); }\n          }\n\n          @keyframes pulse {\n            0% { transform: scale(1); }\n            50% { transform: scale(1.05); }\n            100% { transform: scale(1); }\n          }\n\n          @keyframes bounce {\n            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }\n            40%, 43% { transform: translate3d(0, -10px, 0); }\n            70% { transform: translate3d(0, -5px, 0); }\n            90% { transform: translate3d(0, -2px, 0); }\n          }\n\n          @keyframes fadeInUp {\n            from {\n              opacity: 0;\n              transform: translate3d(0, 40px, 0);\n            }\n            to {\n              opacity: 1;\n              transform: translate3d(0, 0, 0);\n            }\n          }\n\n          @keyframes fadeInRight {\n            from {\n              opacity: 0;\n              transform: translate3d(40px, 0, 0);\n            }\n            to {\n              opacity: 1;\n              transform: translate3d(0, 0, 0);\n            }\n          }\n\n          @keyframes float {\n            0%, 100% { transform: translateY(0px) rotate(0deg); }\n            50% { transform: translateY(-20px) rotate(5deg); }\n          }\n\n          @keyframes particle {\n            0% {\n              transform: translateY(0px) scale(1);\n              opacity: 0.7;\n            }\n            50% {\n              transform: translateY(-30px) scale(1.2);\n              opacity: 1;\n            }\n            100% {\n              transform: translateY(-60px) scale(0.8);\n              opacity: 0;\n            }\n          }\n\n          @keyframes rotate {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n\n          @keyframes bannerSlide {\n            0% { transform: translateX(-100%); }\n            100% { transform: translateX(100%); }\n          }\n        "})]})},tr=({title:t,subtitle:n,products:i,loading:s,fallbackProducts:a,accentColor:o,badge:l,badgeColor:c})=>{const d=e();return r.jsxs(m,{sx:{mb:6},children:[r.jsxs(m,{sx:{textAlign:"center",mb:4},children:[r.jsx(v,{label:t.split(" ")[0],sx:{fontSize:"1rem",fontWeight:700,py:1.5,px:3,bgcolor:`${o}20`,color:o,border:`2px solid ${o}40`,mb:2}}),r.jsx(y,{variant:"h3",sx:{fontWeight:900,mb:2,background:`linear-gradient(135deg, ${o}, ${o}dd)`,backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:t}),r.jsx(y,{variant:"h6",sx:{color:"text.secondary",maxWidth:600,mx:"auto",fontWeight:500},children:n})]}),r.jsx(m,{sx:{p:2,borderRadius:3,border:`2px solid ${o}30`,background:`linear-gradient(135deg, ${o}05, ${o}10)`},children:r.jsx(f,{container:!0,spacing:2,sx:{justifyContent:"center",alignItems:"stretch"},children:(s?Array.from({length:8}):i.length>0?i:a).map((e,t)=>e?r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:s?r.jsx(T,{variant:"rectangular",height:320,sx:{borderRadius:2}}):r.jsxs(O,{sx:{height:"100%",minHeight:350,borderRadius:3,border:`2px solid ${o}40`,boxShadow:`0 4px 15px ${o}20`,background:`linear-gradient(135deg, #ffffff, ${o}08)`,transition:"all 0.3s ease",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, ${o}, ${o}aa, ${o})`,animation:`${l.toLowerCase()}Glow 2s ease-in-out infinite alternate`},"&:hover":{transform:"translateY(-5px) scale(1.01)",boxShadow:`0 10px 25px ${o}30`,border:`2px solid ${o}`}},children:[r.jsxs(m,{sx:{position:"relative"},children:[r.jsx(M,{component:"img",image:e.imageUrl||e.image||"https://via.placeholder.com/300x200?text=Product",alt:e.name||"Product",sx:{height:200,objectFit:"cover",borderRadius:"12px 12px 0 0"}}),r.jsx(m,{sx:{position:"absolute",top:8,left:8},children:r.jsx(v,{label:l,size:"small",sx:{bgcolor:c,color:"white",fontWeight:800,fontSize:"0.7rem",height:26,border:"2px solid rgba(255,255,255,0.8)",boxShadow:`0 2px 8px ${o}40`}})}),r.jsx(E,{sx:{position:"absolute",top:8,right:8,bgcolor:"rgba(255,255,255,0.9)","&:hover":{bgcolor:"white",transform:"scale(1.1)"}},children:r.jsx(D,{sx:{color:"grey.500"}})}),e.originalPrice&&r.jsxs(m,{sx:{position:"absolute",bottom:8,right:8,bgcolor:"#ef4444",color:"white",px:1.5,py:.5,borderRadius:2,fontSize:"0.8rem",fontWeight:700,border:"2px solid white"},children:["-",Math.round(100*(1-e.price/e.originalPrice)),"%"]})]}),r.jsxs(_,{sx:{p:2,flexGrow:1,display:"flex",flexDirection:"column"},children:[r.jsx(y,{variant:"caption",sx:{color:o,fontWeight:700,textTransform:"uppercase",letterSpacing:.5},children:e.brand||"Premium"}),r.jsx(y,{variant:"subtitle1",sx:{fontWeight:600,mt:.5,mb:1,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden",cursor:"pointer","&:hover":{color:o}},onClick:()=>e.id&&d(`/products/${e.id}`),children:e.name||"Product Name"}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:1},children:[r.jsx(L,{value:e.rating||4.5,precision:.1,size:"small",readOnly:!0}),r.jsxs(y,{variant:"caption",sx:{ml:1,color:"text.secondary"},children:["(",e.reviews||0,")"]})]}),r.jsxs(w,{direction:"row",alignItems:"baseline",spacing:1,sx:{mb:2},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:700,background:`linear-gradient(135deg, ${o}, ${o}dd)`,backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:rr(1e3*(e.price||0))}),e.originalPrice&&r.jsx(y,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary"},children:rr(1e3*e.originalPrice)})]}),r.jsx(S,{fullWidth:!0,variant:"contained",startIcon:r.jsx(u,{}),sx:{borderRadius:2,py:1.2,fontWeight:700,fontSize:{xs:"0.8rem",md:"0.85rem"},background:`linear-gradient(135deg, ${o}, ${o}dd)`,mt:"auto","&:hover":{background:`linear-gradient(135deg, ${o}dd, ${o}aa)`,transform:"translateY(-1px)",boxShadow:`0 8px 20px ${o}30`}},children:"ThÃªm vÃ o giá»"})]})]})},`section-${l}-${e.id||t}`):null)})})]})},rr=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),nr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const i=e(),{addToCart:s}=Ft(),{favorites:a,addToFavorites:o,removeFromFavorites:l}=Ht(),[c,d]=t.useState([]),[h,u]=t.useState(!0),[g,p]=t.useState(""),[b,v]=t.useState("all"),[w,C]=t.useState("all"),[k,I]=t.useState([0,1e9]),[W,N]=t.useState("featured"),[P,R]=t.useState(0),[z,M]=t.useState([]),[D,L]=t.useState([]),B=Vt(g,500),$=t.useCallback(async()=>{u(!0);try{const e=await x.getProducts({page:0,size:1e3,search:B,category:"all"!==b?b:void 0,brand:"all"!==w?w:void 0,minPrice:k[0],maxPrice:k[1],sortBy:W});d(e.content),R(e.totalElements)}catch(e){d([]),R(0)}finally{u(!1)}},[B,b,w,k,W]);t.useEffect(()=>{$()},[$]);const F=t.useCallback(async()=>{try{const[e,t]=await Promise.all([x.getCategories(),x.getBrands()]);M(e),L(t)}catch(e){}},[]);t.useEffect(()=>{F()},[F]);const H=t.useCallback(async e=>{try{s(e,1)}catch(t){}},[s]),U=t.useCallback(async e=>{try{a.some(t=>t.id===e)?await l(e):await o(e)}catch(t){}},[a,o,l]),G=t.useCallback(e=>{i(`/product/${e}`)},[i]),ne=t.useCallback(e=>{},[]),ie=t.useCallback(()=>{p(""),v("all"),C("all"),I([0,1e9]),N("featured")},[]),se=t.useCallback(e=>a.some(t=>t.id===e),[a]),ae=()=>r.jsxs(O,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsx(T,{variant:"rectangular",height:280}),r.jsxs(_,{sx:{flexGrow:1},children:[r.jsx(T,{variant:"text",height:24,sx:{mb:1}}),r.jsx(T,{variant:"text",height:20,sx:{mb:1}}),r.jsx(T,{variant:"text",height:32,sx:{mb:2}}),r.jsx(T,{variant:"rectangular",height:40})]})]});return r.jsx(m,{sx:{minHeight:"100vh",backgroundColor:"#f8f9fa"},children:r.jsxs(j,{maxWidth:"xl",sx:{py:4},children:[r.jsxs(V,{sx:{mb:3},children:[r.jsxs(q,{component:n,to:"/",color:"inherit",sx:{display:"flex",alignItems:"center"},children:[r.jsx(Y,{sx:{mr:.5},fontSize:"inherit"}),"Home"]}),r.jsx(y,{color:"text.primary",children:"Products"})]}),r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",mb:2,color:"text.primary"},children:"Our Products"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Discover our amazing collection of products"})]}),r.jsx(A,{sx:{p:3,mb:4,borderRadius:3,boxShadow:"0 4px 20px rgba(0,0,0,0.08)"},children:r.jsxs(f,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(f,{item:!0,xs:12,md:4,children:r.jsx(K,{fullWidth:!0,placeholder:"Search products...",value:g,onChange:e=>p(e.target.value),InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(J,{color:"action"})}),endAdornment:g&&r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>p(""),size:"small",children:r.jsx(Q,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,md:2,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Category"}),r.jsxs(te,{value:b,onChange:e=>v(e.target.value),label:"Category",sx:{borderRadius:2},children:[r.jsx(re,{value:"all",children:"All Categories"}),z.map(e=>r.jsx(re,{value:e.name,children:e.name},e.id))]})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:2,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Brand"}),r.jsxs(te,{value:w,onChange:e=>C(e.target.value),label:"Brand",sx:{borderRadius:2},children:[r.jsx(re,{value:"all",children:"All Brands"}),D.map(e=>r.jsx(re,{value:e.name,children:e.name},e.id))]})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:2,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Sort By"}),r.jsxs(te,{value:W,onChange:e=>N(e.target.value),label:"Sort By",sx:{borderRadius:2},children:[r.jsx(re,{value:"featured",children:"Featured"}),r.jsx(re,{value:"price-asc",children:"Price: Low to High"}),r.jsx(re,{value:"price-desc",children:"Price: High to Low"}),r.jsx(re,{value:"name-asc",children:"Name: A to Z"}),r.jsx(re,{value:"name-desc",children:"Name: Z to A"}),r.jsx(re,{value:"newest",children:"Newest"})]})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:2,children:r.jsx(S,{variant:"outlined",onClick:ie,startIcon:r.jsx(Q,{}),fullWidth:!0,sx:{borderRadius:2,py:1.5},children:"Clear Filters"})})]})}),r.jsx(m,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:r.jsxs(m,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:.5},children:h?"Loading products...":`${P} products found`}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:[P," total products"]})]})}),h?r.jsx(f,{container:!0,spacing:1.5,children:Array.from({length:10}).map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:2.4,children:r.jsx(ae,{})},t))}):0===c.length?r.jsxs(m,{sx:{textAlign:"center",py:8},children:[r.jsx(y,{variant:"h5",color:"text.secondary",sx:{mb:2},children:"No products found"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Try adjusting your search or filter criteria"}),r.jsx(S,{variant:"contained",onClick:ie,startIcon:r.jsx(Q,{}),sx:{borderRadius:2},children:"Clear All Filters"})]}):r.jsx(f,{container:!0,spacing:1.5,children:c.map(e=>r.jsx(f,{item:!0,xs:12,sm:6,md:2.4,children:r.jsx(Yt,{product:e,onAddToCart:H,onToggleFavorite:U,onViewDetails:G,onAddToCompare:ne,isFavorite:se})},e.id))})]})})}},Symbol.toStringTag,{value:"Module"}));function ir(e){const{children:t,value:n,index:i,...s}=e;return r.jsx("div",{role:"tabpanel",hidden:n!==i,id:`product-tabpanel-${i}`,"aria-labelledby":`product-tab-${i}`,...s,children:n===i&&r.jsx(m,{sx:{p:3},children:t})})}const sr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var s,a,o,l;const{productId:c}=i(),x=e(),{addToCart:h}=Ft(),{user:g}=Ut(),{toggleFavorite:p,isFavorite:b}=Ht(),[w,C]=t.useState(null),[k,I]=t.useState([]),[W,N]=t.useState(null),[P,R]=t.useState([]),[z,H]=t.useState([]),[G,X]=t.useState(!0),[Q,J]=t.useState(1),[Z,ee]=t.useState(0),[te,re]=t.useState(0),[Ee,De]=t.useState([]),[_e,Le]=t.useState(!1),[Be,$e]=t.useState(!1),[Fe,He]=t.useState(!1),[Ue,Ge]=t.useState(!1),[Ve,qe]=t.useState(""),[Ye,Ke]=t.useState({rating:0,title:"",content:"",pros:"",cons:""});t.useEffect(()=>{c&&(async()=>{var e;try{X(!0);const r=await d.getProduct(Number(c)),n=r.data;if(n.categoryId&&!n.category)try{n.category=`Category ${n.categoryId}`}catch(t){}if(n.brandId&&!n.brand)try{n.brand=`Brand ${n.brandId}`}catch(t){}C(n);const i=await d.getProductVariants(Number(c));if(I(i.data||[]),i.data&&i.data.length>0){const e=i.data.find(e=>e.isDefault)||i.data[0];N(e)}const s=await d.getProductReviews(Number(c));if(s.success&&s.data){const e=(s.data.content||s.data||[]).map((e,t)=>{var r,n,i;return{id:e.id||t+1,userId:e.userId||1,userName:e.userName||(null==(r=e.user)?void 0:r.firstName)+" "+(null==(n=e.user)?void 0:n.lastName)||"User",userAvatar:e.userAvatar||(null==(i=e.user)?void 0:i.avatarUrl)||"https://via.placeholder.com/150x150?text=User",rating:e.rating||5,title:e.title||"Review",content:e.content||e.comment||"No content available",date:e.date||e.createdAt?new Date(e.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],helpful:e.helpful||0,notHelpful:e.notHelpful||0,verified:e.verified||e.isVerifiedPurchase||!1,images:e.images||[],pros:Array.isArray(e.pros)?e.pros:e.pros?e.pros.split(",").map(e=>e.trim()):[],cons:Array.isArray(e.cons)?e.cons:e.cons?e.cons.split(",").map(e=>e.trim()):[]}});R(e)}try{const e=await d.getReviewSummary(Number(c));if(e.success&&e.data){const t=e.data;n&&t.averageRating&&(n.averageRating=t.averageRating,n.reviewCount=t.totalReviews)}}catch(t){}try{const e=await d.getRelatedProducts(Number(c),4);if(e.success&&e.data){const t=e.data.filter(e=>e.id!==Number(c)).map(e=>(e.categoryId&&!e.category&&(e.category=`Category ${e.categoryId}`),e.brandId&&!e.brand&&(e.brand=`Brand ${e.brandId}`),e));H(t)}}catch(t){}if(X(!1),g&&(null==(e=r.data)?void 0:e.id))try{await d.logUserBehavior(g.id,r.data.id,"VIEW")}catch{}}catch(t){X(!1)}})()},[c,g]);const Xe=e=>{N(e),J(1)},Qe=()=>{const e=new Set(k.map(e=>e.color).filter(Boolean));return Array.from(e)},Je=()=>{const e=new Set(k.map(e=>e.size).filter(Boolean));return Array.from(e)},Ze=()=>(null==W?void 0:W.price)||(null==w?void 0:w.price)||0,et=()=>(null==W?void 0:W.stockQuantity)||(null==w?void 0:w.stockQuantity)||0,tt=()=>{w&&De(e=>e.includes(w.id)?e.filter(e=>e!==w.id):[...e,w.id])},rt=e=>{J(e?e=>Math.min(e+1,et()):e=>Math.max(e-1,1))},nt=e=>{if(!w)return;const t=window.location.href,r=`Check out this product: ${w.name}`,n=encodeURIComponent(t),i=encodeURIComponent(r);let s="";switch(e){case"facebook":s=`https://www.facebook.com/sharer/sharer.php?u=${n}`;break;case"twitter":s=`https://twitter.com/intent/tweet?url=${n}&text=${i}`;break;case"whatsapp":s=`https://wa.me/?text=${i} ${n}`;break;default:return void navigator.clipboard.writeText(t)}window.open(s,"_blank","width=600,height=400"),He(!1)},it=()=>{if(!(null==w?void 0:w.salePrice))return null;return(w.salePrice-w.price)/w.price*100};return G?r.jsx(j,{maxWidth:"lg",sx:{py:4},children:r.jsxs(f,{container:!0,spacing:4,children:[r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(T,{variant:"rectangular",height:400})}),r.jsxs(f,{item:!0,xs:12,md:6,children:[r.jsx(T,{variant:"text",height:40}),r.jsx(T,{variant:"text",height:30}),r.jsx(T,{variant:"text",height:30}),r.jsx(T,{variant:"text",height:100})]})]})}):w?r.jsxs(j,{maxWidth:"lg",sx:{py:4},children:[r.jsxs(V,{separator:r.jsx(ie,{fontSize:"small"}),sx:{mb:3},children:[r.jsxs(q,{component:n,to:"/",underline:"hover",color:"inherit",children:[r.jsx(Y,{fontSize:"small",sx:{mr:.5}}),"Trang chá»§"]}),r.jsx(q,{component:n,to:"/products",underline:"hover",color:"inherit",children:"Sáº£n pháº©m"}),r.jsx(y,{color:"text.primary",children:w.name})]}),r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h3",component:"h1",sx:{fontWeight:"bold",mb:1},children:w.name}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[w.brand&&r.jsx(v,{label:w.brand,variant:"outlined",size:"small",sx:{fontWeight:600}}),w.category&&r.jsx(v,{label:w.category,variant:"outlined",size:"small",color:"primary",sx:{fontWeight:600}})]})]}),r.jsxs(f,{container:!0,spacing:4,children:[r.jsxs(f,{item:!0,xs:12,md:6,children:[r.jsx(O,{sx:{borderRadius:3,mb:2,overflow:"hidden",cursor:"pointer","&:hover":{boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},onClick:()=>{var e,t;const r=0===Z?w.imageUrl||"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=800":(null==(t=null==(e=w.images)?void 0:e[Z])?void 0:t.imageUrl)||`https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=800&${Z}`;qe(r),Ge(!0)},children:r.jsx(M,{component:"img",height:"400",image:0===Z?w.imageUrl||"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=800":(null==(a=null==(s=w.images)?void 0:s[Z])?void 0:a.imageUrl)||`https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=800&${Z}`,alt:w.name,sx:{objectFit:"cover"}})}),r.jsxs(m,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[r.jsx(O,{sx:{width:80,height:80,cursor:"pointer",border:0===Z?"2px solid":"1px solid",borderColor:0===Z?"primary.main":"divider",borderRadius:2,overflow:"hidden"},onClick:()=>ee(0),children:r.jsx(M,{component:"img",height:"100%",image:w.imageUrl||"https://images.unsplash.com/photo-1603302576837-37561b2e2302?w=400",alt:w.name,sx:{objectFit:"cover"}})}),null==(o=w.images)?void 0:o.slice(1,5).map((e,t)=>r.jsx(O,{sx:{width:80,height:80,cursor:"pointer",border:Z===t+1?"2px solid":"1px solid",borderColor:Z===t+1?"primary.main":"divider",borderRadius:2,overflow:"hidden"},onClick:()=>ee(t+1),children:r.jsx(M,{component:"img",height:"100%",image:e.imageUrl,alt:`${w.name} ${t+2}`,sx:{objectFit:"cover"}})},e.id)),(!w.images||w.images.length<2)&&[1,2,3,4].slice((null==(l=w.images)?void 0:l.length)||0).map(e=>r.jsx(O,{sx:{width:80,height:80,cursor:"pointer",border:"1px solid",borderColor:"divider",borderRadius:2,overflow:"hidden",backgroundColor:"#f5f5f5",display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(y,{variant:"caption",color:"text.secondary",children:e+1})},`placeholder-${e}`))]})]}),r.jsxs(f,{item:!0,xs:12,md:6,children:[r.jsx(O,{sx:{borderRadius:3,mb:3},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[r.jsx(L,{value:w.averageRating||4.5,precision:.1,readOnly:!0}),r.jsx(y,{variant:"body1",sx:{fontWeight:"bold"},children:w.averageRating||4.5}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["(",w.reviewCount||124," Ä‘Ã¡nh giÃ¡)"]}),r.jsx(S,{variant:"text",onClick:()=>re(1),sx:{textTransform:"none"},children:"Xem táº¥t cáº£ Ä‘Ã¡nh giÃ¡"})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[r.jsxs(y,{variant:"h3",sx:{fontWeight:"bold",color:"primary.main"},children:[Ze().toLocaleString("vi-VN"),"â‚«"]}),w.salePrice&&r.jsxs(y,{variant:"h5",sx:{textDecoration:"line-through",color:"text.secondary"},children:[w.price.toLocaleString("vi-VN"),"â‚«"]}),it()&&r.jsx(v,{label:`-${Math.abs(it()).toFixed(0)}%`,color:"error",size:"small"})]}),k.length>0&&r.jsxs(m,{sx:{mb:3},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Chá»n tÃ¹y chá»n"}),Qe().length>0&&r.jsxs(m,{sx:{mb:2},children:[r.jsxs(y,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:["MÃ u sáº¯c: ",(null==W?void 0:W.color)||"Chá»n mÃ u"]}),r.jsx(m,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Qe().map(e=>r.jsx(v,{label:e,onClick:()=>{const t=k.find(t=>t.color===e);t&&Xe(t)},color:(null==W?void 0:W.color)===e?"primary":"default",variant:(null==W?void 0:W.color)===e?"filled":"outlined",sx:{cursor:"pointer"}},e))})]}),Je().length>0&&r.jsxs(m,{sx:{mb:2},children:[r.jsxs(y,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:["KÃ­ch thÆ°á»›c: ",(null==W?void 0:W.size)||"Chá»n kÃ­ch thÆ°á»›c"]}),r.jsx(m,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Je().map(e=>r.jsx(v,{label:e,onClick:()=>{const t=k.find(t=>t.size===e);t&&Xe(t)},color:(null==W?void 0:W.size)===e?"primary":"default",variant:(null==W?void 0:W.size)===e?"filled":"outlined",sx:{cursor:"pointer"}},e))})]})]}),r.jsx(m,{sx:{mb:3},children:r.jsx(v,{label:et()>10?"CÃ²n hÃ ng":et()>0?"Sáº¯p háº¿t hÃ ng":"Háº¿t hÃ ng",color:et()>10?"success":et()>0?"warning":"error",size:"small"})}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[r.jsx(y,{variant:"body1",sx:{fontWeight:"bold"},children:"Sá»‘ lÆ°á»£ng:"}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",border:"1px solid",borderColor:"divider",borderRadius:2},children:[r.jsx(E,{onClick:()=>rt(!1),disabled:Q<=1,children:r.jsx(se,{})}),r.jsx(y,{sx:{px:2,minWidth:40,textAlign:"center"},children:Q}),r.jsx(E,{onClick:()=>rt(!0),disabled:Q>=et(),children:r.jsx(ae,{})})]})]}),r.jsxs(m,{sx:{display:"flex",gap:2,mb:3},children:[r.jsx(S,{variant:"contained",size:"large",startIcon:r.jsx(u,{}),onClick:()=>{if(w){const e=(null==W?void 0:W.id)||w.id;h(e,Q),g&&d.logUserBehavior(g.id,w.id,"ADD_TO_CART")}},disabled:0===et(),fullWidth:!0,sx:{borderRadius:2,py:1.5},children:"ThÃªm vÃ o giá» hÃ ng"}),r.jsx(E,{onClick:async()=>{w&&await p(w.id)},color:b(w.id)?"error":"default",sx:{border:"1px solid",borderColor:"divider"},children:b(w.id)?r.jsx(D,{}):r.jsx(oe,{})}),r.jsx(E,{onClick:tt,color:Ee.includes(w.id)?"primary":"default",sx:{border:"1px solid",borderColor:"divider"},children:r.jsx(le,{})}),r.jsx(E,{onClick:()=>He(!0),sx:{border:"1px solid",borderColor:"divider"},children:r.jsx(ce,{})})]}),r.jsxs(m,{sx:{display:"flex",gap:1,flexWrap:"wrap",mb:3},children:[r.jsx(v,{icon:r.jsx(F,{}),label:"Báº£o hÃ nh chÃ­nh hÃ£ng",color:"info",variant:"outlined"}),r.jsx(v,{icon:r.jsx($,{}),label:"Miá»…n phÃ­ váº­n chuyá»ƒn",color:"info",variant:"outlined"}),r.jsx(v,{icon:r.jsx(de,{}),label:"Há»— trá»£ 24/7",color:"info",variant:"outlined"}),r.jsx(v,{icon:r.jsx(U,{}),label:"Äá»•i tráº£ 30 ngÃ y",color:"info",variant:"outlined"})]})]})}),r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Thao tÃ¡c nhanh"}),r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(S,{variant:"outlined",onClick:()=>Le(!0),startIcon:r.jsx(xe,{}),fullWidth:!0,children:"Viáº¿t Ä‘Ã¡nh giÃ¡"}),r.jsx(S,{variant:"outlined",onClick:()=>$e(!0),startIcon:r.jsx(le,{}),fullWidth:!0,children:"So sÃ¡nh sáº£n pháº©m tÆ°Æ¡ng tá»±"})]})]})})]})]}),r.jsxs(A,{sx:{borderRadius:3,mt:4},children:[r.jsxs(he,{value:te,onChange:(e,t)=>{re(t)},sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:"bold",minWidth:120}},children:[r.jsx(me,{label:"MÃ´ táº£ sáº£n pháº©m"}),r.jsx(me,{label:"ÄÃ¡nh giÃ¡"}),r.jsx(me,{label:"ThÃ´ng sá»‘ ká»¹ thuáº­t"}),r.jsx(me,{label:"TÃ­nh nÄƒng"})]}),r.jsx(ir,{value:te,index:0,children:r.jsx(y,{variant:"body1",sx:{lineHeight:1.8},children:w.description})}),r.jsxs(ir,{value:te,index:1,children:[r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold"},children:["ÄÃ¡nh giÃ¡ khÃ¡ch hÃ ng (",P.length,")"]}),r.jsx(S,{variant:"contained",startIcon:r.jsx(xe,{}),onClick:()=>Le(!0),children:"Viáº¿t Ä‘Ã¡nh giÃ¡"})]}),0===P.length?r.jsx(ne,{severity:"info",sx:{borderRadius:3},children:"ChÆ°a cÃ³ Ä‘Ã¡nh giÃ¡ nÃ o. HÃ£y lÃ  ngÆ°á»i Ä‘áº§u tiÃªn Ä‘Ã¡nh giÃ¡ sáº£n pháº©m nÃ y!"}):r.jsx(ue,{children:P.map(e=>r.jsx(ge,{sx:{display:"block",mb:2},children:r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:2},children:[r.jsx(B,{src:e.userAvatar,sx:{width:50,height:50}}),r.jsxs(m,{sx:{flexGrow:1},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:e.userName}),e.verified&&r.jsx(pe,{title:"ÄÃ£ mua hÃ ng",children:r.jsx(be,{color:"primary",fontSize:"small"})})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(L,{value:e.rating,readOnly:!0,size:"small"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e.date})]})]})]}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.title}),r.jsx(y,{variant:"body1",sx:{mb:2,lineHeight:1.6},children:e.content}),(e.pros||e.cons)&&r.jsxs(m,{sx:{display:"flex",gap:2,mb:2},children:[e.pros&&e.pros.length>0&&r.jsxs(m,{children:[r.jsx(y,{variant:"subtitle2",sx:{fontWeight:"bold",color:"success.main",mb:1},children:"Æ¯u Ä‘iá»ƒm:"}),r.jsx(ue,{dense:!0,children:e.pros.map((e,t)=>r.jsx(ge,{sx:{py:0},children:r.jsx(je,{primary:e})},t))})]}),e.cons&&e.cons.length>0&&r.jsxs(m,{children:[r.jsx(y,{variant:"subtitle2",sx:{fontWeight:"bold",color:"error.main",mb:1},children:"NhÆ°á»£c Ä‘iá»ƒm:"}),r.jsx(ue,{dense:!0,children:e.cons.map((e,t)=>r.jsx(ge,{sx:{py:0},children:r.jsx(je,{primary:e})},t))})]})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsxs(S,{size:"small",startIcon:r.jsx(fe,{}),onClick:()=>(async e=>{try{await d.markReviewHelpful(e),R(t=>t.map(t=>t.id===e?{...t,helpful:t.helpful+1}:t))}catch(t){}})(e.id),children:["Há»¯u Ã­ch (",e.helpful,")"]}),r.jsxs(S,{size:"small",startIcon:r.jsx(ve,{}),onClick:()=>{return t=e.id,void R(e=>e.map(e=>e.id===t?{...e,notHelpful:e.notHelpful+1}:e));var t},children:["KhÃ´ng há»¯u Ã­ch (",e.notHelpful,")"]})]})]})})},e.id))})]}),r.jsx(ir,{value:te,index:2,children:r.jsxs(f,{container:!0,spacing:3,children:[r.jsxs(f,{item:!0,xs:12,md:6,children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2,color:"primary.main"},children:"ThÃ´ng tin cÆ¡ báº£n"}),r.jsx(ye,{children:r.jsx(we,{size:"small",children:r.jsxs(Se,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",width:"40%"},children:"TÃªn sáº£n pháº©m"}),r.jsx(ke,{children:w.name})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"ThÆ°Æ¡ng hiá»‡u"}),r.jsx(ke,{children:w.brand})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"Danh má»¥c"}),r.jsx(ke,{children:w.category})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"SKU"}),r.jsx(ke,{children:r.jsx(v,{label:w.sku,size:"small",variant:"outlined"})})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"Tráº¡ng thÃ¡i"}),r.jsx(ke,{children:r.jsx(v,{label:w.isActive?"Äang bÃ¡n":"Ngá»«ng bÃ¡n",color:w.isActive?"success":"error",size:"small"})})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"ÄÃ¡nh giÃ¡"}),r.jsx(ke,{children:r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(L,{value:w.averageRating||0,size:"small",readOnly:!0}),r.jsxs(y,{variant:"body2",children:["(",w.reviewCount||0," Ä‘Ã¡nh giÃ¡)"]})]})})]})]})})})]}),r.jsxs(f,{item:!0,xs:12,md:6,children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2,color:"primary.main"},children:"ThÃ´ng tin giÃ¡ cáº£"}),r.jsx(ye,{children:r.jsx(we,{size:"small",children:r.jsxs(Se,{children:[r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",width:"40%"},children:"GiÃ¡ gá»‘c"}),r.jsx(ke,{children:r.jsxs(y,{variant:"h6",color:"text.secondary",sx:{textDecoration:"line-through"},children:[w.price.toLocaleString("vi-VN"),"â‚«"]})})]}),w.salePrice&&r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"GiÃ¡ khuyáº¿n mÃ£i"}),r.jsx(ke,{children:r.jsxs(y,{variant:"h6",color:"error.main",sx:{fontWeight:"bold"},children:[w.salePrice.toLocaleString("vi-VN"),"â‚«"]})})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"GiÃ¡ hiá»‡n táº¡i"}),r.jsx(ke,{children:r.jsxs(y,{variant:"h6",color:"primary.main",sx:{fontWeight:"bold"},children:[Ze().toLocaleString("vi-VN"),"â‚«"]})})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"Tá»“n kho"}),r.jsx(ke,{children:r.jsx(v,{label:`${et()} sáº£n pháº©m`,color:et()>10?"success":et()>0?"warning":"error",size:"small"})})]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"NgÃ y táº¡o"}),r.jsx(ke,{children:new Date(w.createdAt).toLocaleDateString("vi-VN")})]})]})})})]})]})}),r.jsx(ir,{value:te,index:3,children:r.jsx(f,{container:!0,spacing:2,children:["Cháº¥t lÆ°á»£ng cao","GiÃ¡ cáº£ há»£p lÃ½","Giao hÃ ng nhanh","Báº£o hÃ nh chÃ­nh hÃ£ng","Há»— trá»£ khÃ¡ch hÃ ng 24/7","Äá»•i tráº£ miá»…n phÃ­","Thanh toÃ¡n an toÃ n","Váº­n chuyá»ƒn toÃ n quá»‘c"].map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,children:r.jsx(O,{sx:{borderRadius:2,p:2},children:r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(Ie,{color:"success"}),r.jsx(y,{variant:"body1",children:e})]})})},t))})})]}),r.jsxs(We,{open:_e,onClose:()=>Le(!1),maxWidth:"md",fullWidth:!0,children:[r.jsx(Ne,{children:r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold"},children:["Viáº¿t Ä‘Ã¡nh giÃ¡ cho ",w.name]}),r.jsx(E,{onClick:()=>Le(!1),children:r.jsx(Pe,{})})]})}),r.jsx(Ae,{children:r.jsxs(f,{container:!0,spacing:3,sx:{mt:1},children:[r.jsxs(f,{item:!0,xs:12,children:[r.jsx(y,{component:"legend",children:"ÄÃ¡nh giÃ¡"}),r.jsx(L,{size:"large",value:Ye.rating,onChange:(e,t)=>{Ke(e=>({...e,rating:t||0}))}})]}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"TiÃªu Ä‘á» Ä‘Ã¡nh giÃ¡",placeholder:"TÃ³m táº¯t tráº£i nghiá»‡m cá»§a báº¡n",value:Ye.title,onChange:e=>Ke(t=>({...t,title:e.target.value}))})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Ná»™i dung Ä‘Ã¡nh giÃ¡",multiline:!0,rows:4,placeholder:"Chia sáº» tráº£i nghiá»‡m chi tiáº¿t cá»§a báº¡n vá» sáº£n pháº©m nÃ y...",value:Ye.content,onChange:e=>Ke(t=>({...t,content:e.target.value}))})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Æ¯u Ä‘iá»ƒm (tÃ¹y chá»n)",placeholder:"Nhá»¯ng Ä‘iá»u báº¡n thÃ­ch vá» sáº£n pháº©m nÃ y",value:Ye.pros,onChange:e=>Ke(t=>({...t,pros:e.target.value}))})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"NhÆ°á»£c Ä‘iá»ƒm (tÃ¹y chá»n)",placeholder:"Nhá»¯ng Ä‘iá»u cáº§n cáº£i thiá»‡n",value:Ye.cons,onChange:e=>Ke(t=>({...t,cons:e.target.value}))})})]})}),r.jsxs(Re,{children:[r.jsx(S,{onClick:()=>Le(!1),children:"Há»§y"}),r.jsx(S,{variant:"contained",startIcon:r.jsx(ze,{}),onClick:async()=>{if(g&&w)try{const e={userId:g.id,productId:w.id,rating:Ye.rating,title:Ye.title,content:Ye.content};Ye.pros&&Ye.pros.trim()&&(e.pros=Ye.pros.trim()),Ye.cons&&Ye.cons.trim()&&(e.cons=Ye.cons.trim()),await d.createReview(e);const t={id:Date.now(),userId:g.id,userName:g.firstName+" "+g.lastName,userAvatar:g.avatarUrl||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150",rating:Ye.rating,title:Ye.title,content:Ye.content,date:(new Date).toISOString().split("T")[0],helpful:0,notHelpful:0,verified:!0,pros:Ye.pros?Ye.pros.split(",").map(e=>e.trim()).filter(e=>e.length>0):[],cons:Ye.cons?Ye.cons.split(",").map(e=>e.trim()).filter(e=>e.length>0):[]};R(e=>[t,...e]),Ke({rating:0,title:"",content:"",pros:"",cons:""}),Le(!1)}catch(e){}},disabled:!Ye.rating||!Ye.title||!Ye.content,children:"Gá»­i Ä‘Ã¡nh giÃ¡"})]})]}),r.jsxs(We,{open:Be,onClose:()=>$e(!1),maxWidth:"lg",fullWidth:!0,children:[r.jsx(Ne,{children:r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:"So sÃ¡nh sáº£n pháº©m"})}),r.jsxs(Ae,{children:[r.jsxs(y,{variant:"body1",color:"text.secondary",sx:{mb:3},children:["Chá»n sáº£n pháº©m Ä‘á»ƒ so sÃ¡nh vá»›i ",w.name]}),r.jsx(f,{container:!0,spacing:2,children:[{id:2,name:"Tai nghe khÃ´ng dÃ¢y",price:199.99,image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400"},{id:3,name:"Äiá»‡n thoáº¡i thÃ´ng minh",price:899.99,image:"https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=400"},{id:4,name:"MÃ n hÃ¬nh 4K",price:399.99,image:"https://images.unsplash.com/photo-1527443224154-c4a3942d3acf?w=400"}].map(e=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(O,{sx:{borderRadius:3,cursor:"pointer",border:Ee.includes(e.id)?"2px solid":"1px solid",borderColor:Ee.includes(e.id)?"primary.main":"divider"},onClick:()=>tt(),children:[r.jsx(M,{component:"img",height:"150",image:e.image,alt:e.name,sx:{objectFit:"cover"}}),r.jsxs(_,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.name}),r.jsxs(y,{variant:"h6",color:"primary.main",children:[e.price.toLocaleString("vi-VN"),"â‚«"]})]})]})},e.id))})]}),r.jsxs(Re,{children:[r.jsx(S,{onClick:()=>$e(!1),children:"Há»§y"}),r.jsx(S,{variant:"contained",onClick:()=>{$e(!1),x("/compare")},children:"So sÃ¡nh Ä‘Ã£ chá»n"})]})]}),r.jsxs(We,{open:Fe,onClose:()=>He(!1),maxWidth:"sm",fullWidth:!0,children:[r.jsx(Ne,{children:r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:"Chia sáº» sáº£n pháº©m"}),r.jsx(E,{onClick:()=>He(!1),children:r.jsx(Pe,{})})]})}),r.jsxs(Ae,{children:[r.jsxs(y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Chia sáº» ",null==w?void 0:w.name," vá»›i báº¡n bÃ¨ cá»§a báº¡n"]}),r.jsxs(f,{container:!0,spacing:2,children:[r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Te,{}),onClick:()=>nt("facebook"),sx:{py:2,borderColor:"#1877f2",color:"#1877f2","&:hover":{borderColor:"#1877f2",backgroundColor:"rgba(24, 119, 242, 0.04)"}},children:"Facebook"})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Oe,{}),onClick:()=>nt("twitter"),sx:{py:2,borderColor:"#1da1f2",color:"#1da1f2","&:hover":{borderColor:"#1da1f2",backgroundColor:"rgba(29, 161, 242, 0.04)"}},children:"Twitter"})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Me,{}),onClick:()=>nt("whatsapp"),sx:{py:2,borderColor:"#25d366",color:"#25d366","&:hover":{borderColor:"#25d366",backgroundColor:"rgba(37, 211, 102, 0.04)"}},children:"WhatsApp"})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(ce,{}),onClick:()=>nt("copy"),sx:{py:2,borderColor:"primary.main",color:"primary.main","&:hover":{borderColor:"primary.main",backgroundColor:"rgba(25, 118, 210, 0.04)"}},children:"Copy Link"})})]})]})]}),r.jsx(We,{open:Ue,onClose:()=>Ge(!1),maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{backgroundColor:"rgba(0,0,0,0.9)",boxShadow:"none"}},children:r.jsxs(Ae,{sx:{p:0,position:"relative"},children:[r.jsx(E,{onClick:()=>Ge(!1),sx:{position:"absolute",top:16,right:16,backgroundColor:"rgba(255,255,255,0.2)",color:"white","&:hover":{backgroundColor:"rgba(255,255,255,0.3)"},zIndex:10},children:r.jsx(Pe,{})}),r.jsx(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"70vh",p:2},children:r.jsx("img",{src:Ve,alt:null==w?void 0:w.name,style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",borderRadius:"8px"}})})]})}),z.length>0&&r.jsxs(m,{sx:{mt:6},children:[r.jsx(y,{variant:"h5",sx:{fontWeight:"bold",mb:3,textAlign:"center"},children:"Sáº£n pháº©m liÃªn quan"}),r.jsx(f,{container:!0,spacing:2,children:z.map(e=>r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(O,{sx:{borderRadius:3,cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},onClick:()=>x(`/products/${e.id}`),children:[r.jsx(M,{component:"img",height:"200",image:e.imageUrl||"https://via.placeholder.com/300x200?text=No+Image",alt:e.name,sx:{objectFit:"cover"}}),r.jsxs(_,{sx:{p:2},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1,fontSize:"0.9rem"},children:e.name}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(L,{value:e.averageRating||0,size:"small",readOnly:!0}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["(",e.reviewCount||0,")"]})]}),r.jsxs(y,{variant:"h6",color:"primary.main",sx:{fontWeight:"bold"},children:[e.price.toLocaleString("vi-VN"),"â‚«"]})]})]})},e.id))})]})]}):r.jsx(j,{maxWidth:"lg",sx:{py:4},children:r.jsx(ne,{severity:"error",sx:{borderRadius:3},children:"KhÃ´ng tÃ¬m tháº¥y sáº£n pháº©m."})})}},Symbol.toStringTag,{value:"Module"})),ar=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=e(),{user:i}=Ut(),{cart:s,cartLoading:a,updateCartItem:o,removeFromCart:l}=Ft(),[c,d]=t.useState(null),x=async(e,t)=>{if(t<0)h.error("Quantity cannot be negative");else if(0!==t)try{await o(e,t)||h.error("Failed to update cart item")}catch(r){h.error("Failed to update cart item")}else await u(e)},u=async e=>{try{await l(e)?h.success("Product removed from cart"):h.error("Failed to remove product from cart")}catch(t){h.error("Failed to remove product from cart")}},g=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return a?r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px",textAlign:"center"},children:[r.jsx(Ee,{size:60}),r.jsx(y,{variant:"h6",sx:{mt:2},children:"Loading cart..."})]}):s&&0!==s.items.length?r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h3",component:"h1",gutterBottom:!0,fontWeight:"bold",children:"Shopping Cart"}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(v,{label:s.totalItems,color:"primary",size:"small"}),r.jsxs(m,{component:"span",sx:{color:"text.secondary"},children:[s.totalItems," ",1===s.totalItems?"item":"items"," in your cart"]})]})]}),r.jsxs(f,{container:!0,spacing:4,children:[r.jsxs(f,{item:!0,xs:12,md:8,children:[r.jsx(m,{sx:{borderRadius:3,overflow:"hidden"},children:s.items.map((e,t)=>r.jsxs(m,{children:[r.jsx(m,{sx:{p:3},children:r.jsxs(f,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(f,{item:!0,xs:12,sm:3,children:r.jsx(m,{component:"img",src:e.productImage||`https://via.placeholder.com/120x120?text=${encodeURIComponent(e.productName)}`,alt:e.productName,sx:{width:"100%",height:120,objectFit:"cover",borderRadius:2,cursor:"pointer"},onClick:()=>n(`/products/${e.productId}`)})}),r.jsxs(f,{item:!0,xs:12,sm:6,children:[r.jsx(y,{variant:"h6",gutterBottom:!0,sx:{cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>n(`/products/${e.productId}`),children:e.productName}),r.jsxs(m,{sx:{display:"flex",gap:1,mb:2},children:[r.jsx(v,{label:e.categoryName||"General",size:"small",color:"primary",variant:"outlined"}),r.jsx(v,{label:e.brandName||"Generic",size:"small",color:"secondary",variant:"outlined"})]}),r.jsx(y,{variant:"h6",color:"primary",fontWeight:"bold",gutterBottom:!0,children:g(e.productPrice)}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.stockQuantity&&e.stockQuantity<10&&r.jsx(v,{label:`Only ${e.stockQuantity} left!`,size:"small",color:"warning",variant:"filled"}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["In Stock: ",e.stockQuantity||"N/A"]})]})]}),r.jsx(f,{item:!0,xs:12,sm:3,children:r.jsxs(m,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:2},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",border:"1px solid #ddd",borderRadius:2},children:[r.jsx(E,{size:"small",onClick:()=>x(e.productId,e.quantity-1),disabled:e.quantity<=1||a,children:r.jsx(se,{fontSize:"small"})}),r.jsx(K,{size:"small",value:e.quantity,onChange:t=>{const r=parseInt(t.target.value)||1;x(e.productId,r)},inputProps:{min:1,max:e.stockQuantity,style:{textAlign:"center",width:"40px"}},variant:"outlined",disabled:a,sx:{"& .MuiOutlinedInput-root":{"& fieldset":{border:"none"}}}}),r.jsx(E,{size:"small",onClick:()=>x(e.productId,e.quantity+1),disabled:e.stockQuantity&&e.quantity>=e.stockQuantity||a,children:r.jsx(ae,{fontSize:"small"})})]}),r.jsx(y,{variant:"h6",fontWeight:"bold",children:g(e.subtotal)}),r.jsxs(m,{sx:{display:"flex",gap:1},children:[r.jsx(E,{size:"small",color:"primary",children:r.jsx(De,{fontSize:"small"})}),r.jsx(E,{size:"small",color:"error",onClick:()=>u(e.productId),disabled:a,children:r.jsx(_e,{fontSize:"small"})})]})]})})]})}),t<s.items.length-1&&r.jsx(Le,{})]},e.productId))}),r.jsx(m,{sx:{mt:3},children:r.jsx(S,{variant:"outlined",startIcon:r.jsx(G,{}),onClick:()=>n("/products"),sx:{borderRadius:2},children:"Continue Shopping"})})]}),r.jsx(f,{item:!0,xs:12,md:4,children:r.jsx(Kt,{userId:(null==i?void 0:i.id)||1,cartItems:s.items,cartTotal:s.subtotal,onVoucherApplied:e=>{d(e)},onVoucherRemoved:()=>{d(null)},appliedVoucher:c})}),r.jsxs(f,{item:!0,xs:12,md:4,children:[r.jsx(Xt,{subtotal:s.subtotal,discount:s.discountAmount,shipping:s.shippingAmount,tax:s.taxAmount,total:s.totalAmount,voucherCode:null==c?void 0:c.code,voucherDiscount:null==c?void 0:c.discountAmount}),r.jsx(S,{fullWidth:!0,variant:"contained",size:"large",startIcon:r.jsx(Be,{}),onClick:()=>{s&&0!==s.items.length?n("/checkout"):h.error("Your cart is empty")},sx:{borderRadius:3,py:1.5,fontSize:"1.1rem",fontWeight:"bold",mt:2},children:"Proceed to Checkout"}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mt:2},children:[r.jsx($e,{sx:{fontSize:16,color:"text.secondary"}}),r.jsx(y,{variant:"caption",color:"text.secondary",children:"Secure 256-bit SSL encryption"})]})]})]})]}):r.jsx(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:r.jsxs(m,{sx:{textAlign:"center",borderRadius:3,p:8},children:[r.jsx(G,{sx:{fontSize:80,color:"text.secondary",mb:2}}),r.jsx(y,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Your cart is empty"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Looks like you haven't added any items to your cart yet."}),r.jsx(S,{variant:"contained",size:"large",startIcon:r.jsx(G,{}),onClick:()=>n("/products"),sx:{borderRadius:3,px:4},children:"Continue Shopping"})]})})}},Symbol.toStringTag,{value:"Module"})),or=["Review Cart","Shipping Address","Payment Method","Confirmation"],lr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=e(),{cart:i,cartLoading:s}=Ft(),{user:a,isAuthenticated:o}=Ut(),{notify:l}=Gt(),[c,x]=t.useState(0),[h,u]=t.useState(!1),[g,p]=t.useState(!1),b=t.useRef(!1),w=t.useRef(!1),C="pending_payment_result_redirect",[k,I]=t.useState([]),[W,N]=t.useState([]),[P,R]=t.useState([]),[z,T]=t.useState(null),[O,M]=t.useState(null),[E,D]=t.useState(null),[_,L]=t.useState(()=>{try{const e=localStorage.getItem("saved_addresses");return e?JSON.parse(e):[]}catch{return[]}}),[$,F]=t.useState(null),H=e=>{L(e);try{localStorage.setItem("saved_addresses",JSON.stringify(e))}catch{}},[U,G]=t.useState({firstName:"",lastName:"",email:"",phone:"",address:"",provinceId:null,communeCode:null,districtId:null,provinceName:"",communeName:"",districtName:"",note:""}),[V,q]=t.useState({firstName:"",lastName:"",email:"",phone:"",address:"",provinceId:null,communeCode:null,districtId:null,provinceName:"",communeName:"",districtName:""}),[Y,X]=t.useState("credit_card"),[Q,J]=t.useState("vnpay"),[Z,ee]=t.useState("vietcombank"),[te]=t.useState(!0),[re,ie]=t.useState(null),[se,ae]=t.useState(null);t.useEffect(()=>{Zt.get("/api/shipping/ghn/provinces").then(e=>{var t;const r=Array.isArray(null==(t=null==e?void 0:e.data)?void 0:t.data)?e.data.data:[];I(r)}).catch(()=>I([]))},[]),t.useEffect(()=>{const e=localStorage.getItem(C);e&&(w.current=!0,window.location.href=e)},[]),t.useEffect(()=>{if(g||w.current)return;localStorage.getItem("ongoingOrder")||s||i&&0!==i.items.length||n("/cart")},[i,s,n,g]),t.useEffect(()=>{o||n("/login")},[o,n]),t.useEffect(()=>()=>{p(!1),u(!1),b.current=!1},[]),t.useEffect(()=>{const e=localStorage.getItem("ongoingOrder");if(e)try{const t=JSON.parse(e),r=new Date(t.timestamp);(new Date).getTime()-r.getTime()<3e5||localStorage.removeItem("ongoingOrder")}catch(t){localStorage.removeItem("ongoingOrder")}},[]),t.useEffect(()=>{const e=()=>{if(b.current)return"Order is being processed. Are you sure you want to leave?"};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[]),t.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("orderStatus"),r=e.get("orderNumber");"success"===t&&r?(ie(r),x(or.length),localStorage.removeItem("ongoingOrder")):"failed"===t&&localStorage.removeItem("ongoingOrder")},[]),t.useEffect(()=>{if(a){const e=_[0];e?(F(e.id),G({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,address:e.address,provinceId:e.provinceId,communeCode:e.communeCode,districtId:e.districtId,provinceName:e.provinceName,communeName:e.communeName,districtName:e.districtName,note:e.note})):G(e=>({...e,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||""})),q(e=>({...e,firstName:a.firstName||"",lastName:a.lastName||"",email:a.email||""}))}},[a,_]),t.useEffect(()=>{Zt.get("/api/shipping/ghn/provinces").then(e=>{var t;const r=Array.isArray(null==(t=null==e?void 0:e.data)?void 0:t.data)?e.data.data:[];I(r)}).catch(()=>I([]))},[]);const oe=e=>{T(e),M(null),D(null),N([]),R([]),G(t=>({...t,provinceId:e?String(e.ProvinceID):null,provinceName:(null==e?void 0:e.ProvinceName)||"",districtId:null,districtName:"",communeCode:null,communeName:""})),e&&Zt.get(`/api/shipping/ghn/districts?province_id=${e.ProvinceID}`).then(e=>{var t;const r=Array.isArray(null==(t=null==e?void 0:e.data)?void 0:t.data)?e.data.data:[];N(r)}).catch(()=>N([]))},le=e=>{M(e),D(null),R([]),G(t=>({...t,districtId:(null==e?void 0:e.DistrictID)||null,districtName:(null==e?void 0:e.DistrictName)||"",communeCode:null,communeName:""})),e&&Zt.get(`/api/shipping/ghn/wards?district_id=${e.DistrictID}`).then(e=>{var t;const r=Array.isArray(null==(t=null==e?void 0:e.data)?void 0:t.data)?e.data.data:[];R(r)}).catch(()=>R([]))},ce=e=>{D(e),G(t=>({...t,communeCode:(null==e?void 0:e.WardCode)||null,communeName:(null==e?void 0:e.WardName)||""}))},de=async e=>{var t,r;const n=k.find(t=>String(t.ProvinceID)===String(e.provinceId)||t.ProvinceName===e.provinceName);if(n){oe(n);try{const i=await Zt.get(`/api/shipping/ghn/districts?province_id=${n.ProvinceID}`),s=Array.isArray(null==(t=null==i?void 0:i.data)?void 0:t.data)?i.data.data:[];N(s);const a=s.find(t=>String(t.DistrictID)===String(e.districtId)||t.DistrictName===e.districtName);if(a){le(a);const t=await Zt.get(`/api/shipping/ghn/wards?district_id=${a.DistrictID}`),n=Array.isArray(null==(r=null==t?void 0:t.data)?void 0:r.data)?t.data.data:[];R(n);const i=n.find(t=>String(t.WardCode)===String(e.communeCode)||t.WardName===e.communeName);i&&ce(i)}}catch{}}},xe=async()=>{const e=null==z?void 0:z.ProvinceID,t=null==O?void 0:O.DistrictID,r=null==E?void 0:E.WardCode;if(!(e&&t&&r&&i&&i.items.length))return void ae(null);const n=i.items[0].productId,s=await(async e=>{try{const t=await fetch(`http://localhost:8080/api/inventory/status/${e}`);if(t.ok){const e=await t.json();if(e&&e.warehouse)return{provinceCode:e.warehouse.provinceCode?String(e.warehouse.provinceCode):e.warehouse.province?String(e.warehouse.province):"",districtCode:e.warehouse.districtCode?String(e.warehouse.districtCode):e.warehouse.districtId?String(e.warehouse.districtId):"",wardCode:e.warehouse.wardCode?String(e.warehouse.wardCode):""}}}catch(t){}return{provinceCode:"79",districtCode:"1454",wardCode:"20109"}})(n),a=s.provinceCode,o=s.districtCode,l=s.wardCode;try{const n={fromProvinceId:a,fromDistrictId:o,fromWardCode:l,toProvinceId:e,toDistrictId:t,toWardCode:r,weight:1e3},i=await fetch("http://localhost:8080/api/shipping/calculate-fee-v2",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(i.ok){const e=await i.json();void 0!==e.fee?ae(e.fee):void 0!==e.shippingFee?ae(e.shippingFee):ae(null)}else ae(null)}catch(c){ae(null)}},he=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);t.useEffect(()=>{z&&O&&E?xe():ae(null)},[z,O,E]);const me=e=>{X(e)},pe=e=>{J(e)},be=e=>{ee(e)},fe=async()=>{await(async()=>{if(i&&a){if(!o)return l("Please login to continue with payment","error"),void n("/login");if(!b.current)try{if(b.current=!0,u(!0),p(!0),await new Promise(e=>setTimeout(e,200)),!b.current)return;const e=new Promise((e,t)=>{setTimeout(()=>t(new Error("Request timeout - please try again")),3e4)}),t=(async()=>{let e=Y;if(e="credit_card"===Y?Q.toUpperCase():"bank_transfer"===Y?"BANK_TRANSFER":(Y||"").toUpperCase(),"VNPAY"===e)try{const e=await d.get("/api/payments/vnpay/validate");e.success||l("VNPay payment configuration: "+(e.message||"Unknown error"),"info")}catch(o){return void l("VNPay payment validation failed: "+(o.message||"Unknown error"),"error")}const t=[U.address,U.communeName,U.districtName,U.provinceName].filter(Boolean).join(", "),r=te?t:[V.address,V.communeName,V.districtName,V.provinceName].filter(Boolean).join(", "),n={items:i.items.map(e=>({productId:e.productId,productName:e.productName,quantity:e.quantity,unitPrice:e.productPrice})),shippingAddress:t,billingAddress:r,paymentMethod:e,shippingFee:se,note:U.note},s=await d.createOrder(n);if(!s.success)return void l("Failed to create order: "+(s.message||"Unknown error"),"error");const a=s.data.id;if(localStorage.setItem("ongoingOrder",JSON.stringify({orderId:a,orderNumber:s.data.orderNumber,timestamp:(new Date).toISOString(),paymentMethod:e})),"VNPAY"===e){const e=await d.createVNPayPayment(a);if(e.success){const t=e.data.paymentUrl;if(!t)return l("VNPay payment creation failed: missing redirect URL","error"),void localStorage.removeItem("ongoingOrder");localStorage.removeItem("ongoingOrder"),w.current=!0,window.location.href=t}else localStorage.removeItem("ongoingOrder"),l("VNPay payment creation failed: "+(e.message||"Unknown error"),"error")}else if("MOMO"===e){const e=await d.createMoMoPayment(a);if(e.success){const t=e.data.paymentUrl;if(!t)return localStorage.removeItem("ongoingOrder"),void l("MoMo payment creation failed: missing redirect URL","error");localStorage.removeItem("ongoingOrder"),w.current=!0,window.location.href=t}else localStorage.removeItem("ongoingOrder")}else if(e.startsWith("BANK_TRANSFER")){const e=await d.createPayment({paymentMethod:"BANK_TRANSFER",orderId:a});if(e.success){localStorage.setItem("bankTransferInfo",JSON.stringify(e.data)),localStorage.removeItem("ongoingOrder");const t=`/payment-result?orderNumber=${s.data.orderNumber}&success=true&status=SUCCESS&message=Äáº·t hÃ ng thÃ nh cÃ´ng&paymentMethod=BANK_TRANSFER`;w.current=!0,localStorage.setItem(C,t),window.location.href=t}else localStorage.removeItem("ongoingOrder")}else if("COD"===e){localStorage.removeItem("ongoingOrder");const e=`/payment-result?orderNumber=${s.data.orderNumber}&success=true&status=SUCCESS&message=Äáº·t hÃ ng thÃ nh cÃ´ng&paymentMethod=COD`;w.current=!0,localStorage.setItem(C,e);try{window.location.href=e}catch(o){l("Redirect failed, please check the order manually","warning")}}})();await Promise.race([t,e])}catch(e){localStorage.removeItem("ongoingOrder")}finally{u(!1),p(!1),b.current=!1}}})()},ve=e=>{switch(e){case 0:return i&&i.items.length>0;case 1:return U.firstName&&U.lastName&&U.email&&U.address&&U.provinceId&&""!==U.provinceId&&U.communeCode&&""!==U.communeCode;case 2:return""!==Y;default:return!0}};if(s||!i)return r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px",textAlign:"center"},children:[r.jsx(Ee,{size:60}),r.jsx(y,{variant:"h6",sx:{mt:2},children:"Loading checkout..."}),r.jsxs(m,{sx:{mt:2},children:[r.jsxs(y,{variant:"body2",color:"text.secondary",children:["Debug Info: Cart Loading: ",s?"Yes":"No"," | Cart: ",i?"Loaded":"Not Loaded"," | User: ",a?"Authenticated":"Not Authenticated"]}),r.jsx(S,{variant:"outlined",size:"small",onClick:()=>window.location.reload(),sx:{mt:1},children:"Force Refresh"})]})]});if(0===i.items.length)return w.current||localStorage.getItem(C)?r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px",textAlign:"center"},children:[r.jsx(Ee,{size:60}),r.jsx(y,{variant:"h6",sx:{mt:2},children:"Äang chuyá»ƒn hÆ°á»›ng..."})]}):r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px",textAlign:"center"},children:[r.jsx(y,{variant:"h4",gutterBottom:!0,children:"Your cart is empty"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Please add some items to your cart before proceeding to checkout."}),r.jsx(S,{variant:"contained",onClick:()=>n("/products"),sx:{mr:2},children:"Continue Shopping"}),r.jsx(S,{variant:"outlined",onClick:()=>n("/cart"),children:"View Cart"})]});if(c===or.length)return r.jsx(j,{maxWidth:"md",sx:{py:4,pt:"40px"},children:r.jsxs(A,{sx:{p:4,textAlign:"center",borderRadius:3},children:[r.jsx(Fe,{sx:{fontSize:80,color:"success.main",mb:2}}),r.jsx(y,{variant:"h4",gutterBottom:!0,fontWeight:"bold",children:"Order Confirmed!"}),r.jsxs(y,{variant:"h6",color:"text.secondary",sx:{mb:3},children:["Order Number: ",re]}),r.jsx(y,{variant:"body1",sx:{mb:3},children:"Thank you for your purchase! We'll send you an email confirmation with tracking details."}),r.jsx(S,{variant:"contained",size:"large",onClick:()=>n("/"),sx:{mr:2},children:"Continue Shopping"}),r.jsx(S,{variant:"outlined",size:"large",onClick:()=>n("/orders"),children:"View Orders"})]})});return r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsx(y,{variant:"h4",gutterBottom:!0,align:"center",fontWeight:"bold",children:"Checkout"}),r.jsx(He,{activeStep:c,sx:{mb:4},children:or.map(e=>r.jsx(Ue,{children:r.jsx(Ge,{children:e})},e))}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:8,children:r.jsxs(A,{sx:{p:3,borderRadius:3},children:[(e=>{switch(e){case 0:return r.jsxs(m,{children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Shipping Address"}),_.length>0&&r.jsxs(m,{sx:{mb:2},children:[r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Saved addresses"}),r.jsxs(m,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[_.map(e=>r.jsx(v,{label:e.label,color:$===e.id?"primary":"default",onClick:()=>(async e=>{F(e.id),G({firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,address:e.address,provinceId:e.provinceId,communeCode:e.communeCode,districtId:e.districtId,provinceName:e.provinceName,communeName:e.communeName,districtName:e.districtName,note:e.note});try{await de(e)}catch{}})(e),onDelete:()=>(e=>{var t;const r=_.filter(t=>t.id!==e);H(r),$===e&&F((null==(t=r[0])?void 0:t.id)||null)})(e.id)},e.id)),r.jsx(v,{label:"Add new",variant:"outlined",onClick:()=>F(null)})]})]}),r.jsxs(f,{container:!0,spacing:2,children:[r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"First Name",value:U.firstName,onChange:e=>G(t=>({...t,firstName:e.target.value})),required:!0})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Last Name",value:U.lastName,onChange:e=>G(t=>({...t,lastName:e.target.value})),required:!0})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Email",type:"email",value:U.email,onChange:e=>G(t=>({...t,email:e.target.value})),required:!0})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Phone",value:U.phone,onChange:e=>G(t=>({...t,phone:e.target.value})),required:!0})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Address",value:U.address,onChange:e=>G(t=>({...t,address:e.target.value})),required:!0})}),r.jsx(f,{item:!0,xs:12,sm:4,children:r.jsx(qe,{options:k,getOptionLabel:e=>e.ProvinceName||"",value:z,onChange:(e,t)=>oe(t),renderInput:e=>r.jsx(K,{...e,label:"Tá»‰nh/ThÃ nh phá»‘ *",required:!0})})}),r.jsx(f,{item:!0,xs:12,sm:4,children:r.jsx(qe,{options:W,getOptionLabel:e=>e.DistrictName||"",value:O,onChange:(e,t)=>le(t),renderInput:e=>r.jsx(K,{...e,label:"Quáº­n/Huyá»‡n *",required:!0}),disabled:!z})}),r.jsx(f,{item:!0,xs:12,sm:4,children:r.jsx(qe,{options:P,getOptionLabel:e=>e.WardName||"",value:E,onChange:(e,t)=>ce(t),renderInput:e=>r.jsx(K,{...e,label:"XÃ£/PhÆ°á»ng *",required:!0}),disabled:!O})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Ghi chÃº (Note)",value:U.note,onChange:e=>G(t=>({...t,note:e.target.value})),multiline:!0,minRows:2,placeholder:"Ghi chÃº cho Ä‘Æ¡n hÃ ng (náº¿u cÃ³)"})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(S,{variant:"outlined",onClick:()=>(async()=>{const e={id:Date.now().toString(),label:`${U.address} - ${U.communeName}`,firstName:U.firstName,lastName:U.lastName,email:U.email,phone:U.phone,address:U.address,provinceId:U.provinceId,communeCode:U.communeCode,districtId:U.districtId,provinceName:U.provinceName,communeName:U.communeName,districtName:U.districtName,note:U.note},t=[e,..._.filter(t=>t.id!==e.id)].slice(0,5);H(t),F(e.id);try{await de(e)}catch{}})(),children:"Save this address"})})]})]});case 1:return r.jsxs(m,{children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),r.jsx(ue,{children:i.items.map(e=>r.jsxs(ge,{divider:!0,children:[r.jsx(Ve,{children:r.jsx(B,{src:e.productImage,alt:e.productName})}),r.jsx(je,{primary:e.productName,secondary:`Quantity: ${e.quantity} | Price: ${he(e.productPrice)}`}),r.jsx(y,{variant:"h6",children:he(e.productPrice*e.quantity)})]},e.productId))}),r.jsx(Le,{sx:{my:2}}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Subtotal:"}),r.jsx(y,{children:he(i.subtotal)})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Shipping:"}),r.jsx(y,{children:null!==se?he(se):"ChÆ°a xÃ¡c Ä‘á»‹nh"})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Tax:"}),r.jsx(y,{children:he(i.taxAmount)})]}),r.jsx(Le,{sx:{my:1}}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between"},children:[r.jsx(y,{variant:"h6",fontWeight:"bold",children:"Total:"}),r.jsx(y,{variant:"h6",fontWeight:"bold",children:he(i.totalAmount+(se||0))})]})]});case 2:return r.jsx(Qt,{selectedMethod:Y,creditCardGateway:Q,selectedBank:Z,onMethodChange:me,onGatewayChange:pe,onBankChange:be});default:return null}})(c),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mt:3},children:[r.jsx(S,{disabled:0===c||h||b.current,onClick:()=>{b.current||c===or.length||x(e=>e-1)},variant:"outlined",children:"Back"}),r.jsx(S,{variant:"contained",onClick:async()=>{1===c&&null===se&&(await xe(),null===se)||(c===or.length-1?fe():x(e=>e+1))},disabled:!ve(c)||h||b.current,endIcon:h?r.jsx(Ee,{size:20}):null,children:c===or.length-1?b.current?"Processing...":"Place Order":"Next"})]}),1===c&&!ve(1)&&r.jsx(ne,{severity:"warning",sx:{mt:2},children:r.jsxs(y,{variant:"body2",children:["Please complete all required fields:",!U.firstName&&" First Name,",!U.lastName&&" Last Name,",!U.email&&" Email,",!U.address&&" Address,",!U.provinceId&&" Province,",!U.communeCode&&" Commune"]})})]})}),r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(A,{sx:{p:3,borderRadius:3,position:"sticky",top:20},children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Order Summary"}),r.jsx(m,{sx:{mb:2},children:r.jsxs(y,{variant:"body2",color:"text.secondary",children:[i.items.length," item(s)"]})}),r.jsx(Le,{sx:{my:2}}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Subtotal:"}),r.jsx(y,{children:he(i.subtotal)})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Shipping:"}),r.jsx(y,{children:null!==se?he(se):"ChÆ°a xÃ¡c Ä‘á»‹nh"})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[r.jsx(y,{children:"Tax:"}),r.jsx(y,{children:he(i.taxAmount)})]}),r.jsx(Le,{sx:{my:1}}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between"},children:[r.jsx(y,{variant:"h6",fontWeight:"bold",children:"Total:"}),r.jsx(y,{variant:"h6",fontWeight:"bold",children:he(i.totalAmount+(se||0))})]})]})})]})]})}},Symbol.toStringTag,{value:"Module"})),cr=s.memo(()=>{var e;const[n,i]=t.useState(0),[s,o]=t.useState(null),[l,c]=t.useState(!1),[x,g]=t.useState(null),[p,b]=t.useState(""),[w,C]=t.useState(!1),{data:k,isLoading:I,error:W,refetch:N}=a({queryKey:["orders",n],queryFn:()=>{const e=JSON.parse(localStorage.getItem("auth_user")||"{}"),t=e.id||e.userId||1;return d.getOrders(n,10,t)},retry:2,staleTime:3e5}),P=(null==k?void 0:k.data.content)||[],R=(null==k?void 0:k.data.totalElements)||0,z=Math.ceil(R/10),M=()=>{w||(c(!1),g(null),b(""))},E=e=>{const t=(e||"").toUpperCase();return t.includes("COD")||t.includes("CASH")||t.includes("CASH_ON_DELIVERY")},D=(e,t)=>{switch(e){case"PENDING":return{label:"Pending approval",color:"warning",icon:r.jsx(Je,{}),description:"Order created, waiting for processing"};case"PENDING_PAYMENT":return E(t)?{label:"Pending approval",color:"info",icon:r.jsx(Je,{}),description:"Waiting for admin approval"}:{label:"Pending payment",color:"default",icon:r.jsx(Je,{}),description:"Waiting for online payment"};case"PAID":return{label:"Paid â€¢ Pending approval",color:"success",icon:r.jsx(Fe,{}),description:"Payment received, awaiting admin confirmation"};case"PENDING_APPROVAL":return{label:"Pending Approval",color:"info",icon:r.jsx(Je,{}),description:"Waiting for admin approval"};case"APPROVED":return{label:"Approved",color:"success",icon:r.jsx(Fe,{}),description:"Order approved by admin"};case"CONFIRMED":return{label:"Confirmed",color:"primary",icon:r.jsx(Fe,{}),description:"Order confirmed by admin"};case"PROCESSING":return{label:"Processing",color:"secondary",icon:r.jsx($,{}),description:"Order being processed and packed"};case"SHIPPED":return{label:"Shipped",color:"info",icon:r.jsx($,{}),description:"Order shipped to customer"};case"DELIVERED":return{label:"Delivered",color:"success",icon:r.jsx(Fe,{}),description:"Order delivered successfully"};case"COMPLETED":return{label:"Completed",color:"success",icon:r.jsx(Fe,{}),description:"Order completed by customer"};case"CANCELLED":return{label:"Cancelled",color:"error",icon:r.jsx(Ke,{}),description:"Order has been cancelled"};case"REFUNDED":return{label:"Refunded",color:"default",icon:r.jsx(Qe,{}),description:"Order refunded to customer"};default:return{label:e,color:"default",icon:r.jsx(Je,{}),description:"Unknown status"}}},L=(e,t,r)=>{if(E(t)||!t){return"DELIVERED"===r||"COMPLETED"===r?{label:"Paid",color:"success"}:{label:"Unpaid (COD)",color:"warning"}}const n="COMPLETED"===e||"PAID"===e,i=!!r&&["PAID","PENDING_APPROVAL","APPROVED","CONFIRMED","PROCESSING","SHIPPED","DELIVERED","COMPLETED"].includes(r);return n||i?{label:"Paid",color:"success"}:E(t)?{label:"Unpaid (COD)",color:"warning"}:{label:"Unpaid",color:"default"}},F=e=>{const t=e.status;return["PENDING","PENDING_PAYMENT","PENDING_APPROVAL"].includes(t)},H=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),U=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e),G=P;return W&&!G.length?r.jsx(j,{maxWidth:"lg",sx:{py:4},children:r.jsxs(A,{sx:{p:4,textAlign:"center"},children:[r.jsx(y,{variant:"h6",color:"error",gutterBottom:!0,children:"Failed to load orders"}),r.jsx(y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Showing demo data instead"}),r.jsx(S,{variant:"contained",onClick:()=>N(),sx:{mt:2},children:"Try Again"})]})}):r.jsxs(r.Fragment,{children:[r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{mb:4,display:"flex",alignItems:"baseline",justifyContent:"space-between"},children:[r.jsx(y,{variant:"h4",component:"h1",gutterBottom:!0,sx:{fontWeight:700,color:"text.primary"},children:"Your Orders"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:2},children:"Track and manage your order history"})]}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:s?8:12,children:I?r.jsx(m,{children:[...Array(5)].map((e,t)=>r.jsx(O,{sx:{mb:2},children:r.jsxs(_,{children:[r.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[r.jsx(T,{variant:"text",width:200,height:32}),r.jsx(T,{variant:"rectangular",width:80,height:24})]}),r.jsx(T,{variant:"text",width:150,height:24}),r.jsx(T,{variant:"text",width:100,height:24})]})},t))}):0===G.length?r.jsxs(A,{sx:{p:8,textAlign:"center"},children:[r.jsx(u,{sx:{fontSize:80,color:"text.secondary",mb:2}}),r.jsx(y,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"No orders found"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Start shopping to see your orders here"})]}):r.jsxs(r.Fragment,{children:[G.map(e=>{var t;const n=D(e.status,e.paymentMethod);return r.jsx(O,{sx:{mb:2,cursor:"pointer",transition:"all 0.2s","&:hover":{boxShadow:4,transform:"translateY(-2px)"},border:(null==s||s.id,e.id,1),borderColor:(null==s?void 0:s.id)===e.id?"primary.main":"rgba(148,163,184,0.2)",background:"linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))"},onClick:()=>(e=>{o(e),h.info(`Viewing order #${e.id}`)})(e),children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[r.jsxs(m,{children:[r.jsxs(y,{variant:"h6",gutterBottom:!0,children:["Order #",e.id]}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["Placed on ",H(e.createdAt)]})]}),r.jsxs(m,{sx:{display:"flex",gap:1},children:[r.jsx(v,{icon:n.icon,label:n.label,color:n.color,variant:"outlined"}),r.jsx(v,{label:L(e.paymentStatus,e.paymentMethod,e.status).label,color:L(e.paymentStatus,e.paymentMethod,e.status).color,variant:"outlined"})]})]}),r.jsx(Le,{sx:{my:2}}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(m,{children:[r.jsxs(y,{variant:"body2",color:"text.secondary",children:[(null==(t=e.orderItems)?void 0:t.length)||0," item(s)"]}),r.jsx(y,{variant:"h6",color:"primary",fontWeight:"bold",children:"CANCELLED"===e.status?"-":U(e.totalAmount)})]}),r.jsxs(m,{sx:{display:"flex",gap:1},children:["CANCELLED"!==e.status&&r.jsx(S,{variant:"outlined",startIcon:r.jsx(Ye,{}),size:"small",children:"View Details"}),F(e)&&r.jsx(S,{variant:"outlined",color:"error",startIcon:r.jsx(Ke,{}),size:"small",onClick:()=>(e=>{g(e),c(!0)})(e),children:"Cancel"})]})]})]})},e.id)}),z>1&&r.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:4},children:r.jsx(Xe,{count:z,page:n+1,onChange:(e,t)=>{i(t-1)},color:"primary",size:"large"})})]})}),s&&r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(A,{sx:{p:3,position:"sticky",top:20,border:"1px solid rgba(148,163,184,0.2)",background:"linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01))"},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.jsx(Qe,{sx:{mr:1,color:"primary.main"}}),r.jsx(y,{variant:"h6",children:"Order Details"})]}),r.jsx(Le,{sx:{mb:2}}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(y,{variant:"subtitle2",color:"text.secondary",children:"Order ID"}),r.jsxs(y,{variant:"body1",fontWeight:"bold",children:["#",s.id]})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(y,{variant:"subtitle2",color:"text.secondary",children:"Status"}),r.jsxs(m,{sx:{display:"flex",gap:1,mt:1},children:[r.jsx(v,{icon:D(s.status,s.paymentMethod).icon,label:D(s.status,s.paymentMethod).label,color:D(s.status,s.paymentMethod).color,size:"small"}),r.jsx(v,{label:L(s.paymentStatus,s.paymentMethod,s.status).label,color:L(s.paymentStatus,s.paymentMethod,s.status).color,size:"small"})]})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(y,{variant:"subtitle2",color:"text.secondary",children:"Total Amount"}),r.jsx(y,{variant:"h6",color:"primary",fontWeight:"bold",children:U(s.totalAmount)})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsxs(y,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:["Items (",(null==(e=s.orderItems)?void 0:e.length)||0,")"]}),r.jsx(ue,{dense:!0,children:s.orderItems&&0!==s.orderItems.length?s.orderItems.map((e,t)=>r.jsxs(ge,{sx:{px:0},children:[r.jsx(B,{sx:{mr:2,bgcolor:"primary.light"},children:e.quantity}),r.jsx(je,{primary:e.productName,secondary:`${U(e.price)} each`})]},t)):r.jsx(ge,{sx:{px:0},children:r.jsx(je,{primary:"CANCELLED"===s.status?"This order was cancelled. Items have been removed.":"No items."})})})]}),r.jsx(Le,{sx:{mb:2}}),r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:1},children:[r.jsxs(y,{variant:"body2",color:"text.secondary",children:[r.jsx("strong",{children:"Ordered:"})," ",H(s.createdAt)]}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:[r.jsx("strong",{children:"Updated:"})," ",H(s.updatedAt)]})]})]})})]})]}),r.jsxs(We,{open:l,onClose:M,fullWidth:!0,maxWidth:"sm",children:[r.jsx(Ne,{children:"Cancel Order"}),r.jsxs(Ae,{children:[r.jsxs(y,{variant:"body2",sx:{mb:2},children:["Are you sure you want to cancel order"," ",r.jsx("strong",{children:null==x?void 0:x.orderNumber}),"?"]}),r.jsx(K,{fullWidth:!0,multiline:!0,rows:3,label:"Cancellation Reason",value:p,onChange:e=>b(e.target.value),placeholder:"Please provide a reason for cancellation...",required:!0})]}),r.jsxs(Re,{children:[r.jsx(S,{onClick:M,disabled:w,children:"Keep Order"}),r.jsxs(S,{onClick:async()=>{if(x&&p.trim())try{C(!0),await d.cancelOrder(x.id,p.trim()),N(),c(!1),g(null),b(""),h.success("Order cancelled successfully")}catch(e){h.error("Failed to cancel order")}finally{C(!1)}else h.error("Please provide a cancellation reason")},color:"error",variant:"contained",disabled:!p.trim()||w,children:[w?r.jsx(Ee,{size:20,sx:{mr:1}}):null,"Cancel Order"]})]})]})]})}),dr=Object.freeze(Object.defineProperty({__proto__:null,default:cr},Symbol.toStringTag,{value:"Module"})),xr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{user:n}=Ut(),i=e(),[s,a]=t.useState({totalUsers:0,totalProducts:0,totalOrders:0,totalRevenue:0,recentOrders:[],topProducts:[],userGrowth:[]});t.useEffect(()=>{o()},[]);const o=async()=>{var e,t,r,i,s;try{if("ADMIN"===(null==n?void 0:n.role)){const[r,n,i]=await Promise.all([d.getUsers(),d.adminGetProducts(0,1),d.adminGetOrders(0,1)]);a({totalUsers:Array.isArray(r.data)?r.data.length:0,totalProducts:(null==(e=n.data)?void 0:e.totalElements)||0,totalOrders:(null==(t=i.data)?void 0:t.totalElements)||0,totalRevenue:0,recentOrders:[],topProducts:[],userGrowth:[]})}else if("PRODUCT_MANAGER"===(null==n?void 0:n.role)){const e=await d.adminGetProducts(0,1);a({totalUsers:0,totalProducts:(null==(r=e.data)?void 0:r.totalElements)||0,totalOrders:0,totalRevenue:0,recentOrders:[],topProducts:[],userGrowth:[]})}else if("USER_MANAGER"===(null==n?void 0:n.role)){const e=await d.getUsers();a({totalUsers:Array.isArray(e.data)?e.data.length:0,totalProducts:0,totalOrders:0,totalRevenue:0,recentOrders:[],topProducts:[],userGrowth:[]})}else if("MODERATOR"===(null==n?void 0:n.role)){const[e,t]=await Promise.all([d.adminGetOrders(0,1),d.adminGetProducts(0,1)]);a({totalUsers:0,totalProducts:(null==(i=t.data)?void 0:i.totalElements)||0,totalOrders:(null==(s=e.data)?void 0:s.totalElements)||0,totalRevenue:0,recentOrders:[],topProducts:[],userGrowth:[]})}}catch(o){}},l=({title:e,value:t,icon:n,color:i,onClick:s})=>r.jsx(O,{sx:{height:"100%",cursor:s?"pointer":"default",transition:"all 0.3s ease","&:hover":s?{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}:{}},onClick:s,children:r.jsx(_,{children:r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsxs(m,{children:[r.jsx(y,{variant:"h4",sx:{fontWeight:900,color:i,mb:1},children:t}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{fontWeight:600},children:e})]}),r.jsx(m,{sx:{p:2,borderRadius:2,bgcolor:`${i}15`,color:i,display:"flex",alignItems:"center",justifyContent:"center"},children:n})]})})}),c=({title:e,description:t,icon:n,color:i,onClick:s})=>r.jsx(O,{sx:{height:"100%",cursor:"pointer",transition:"all 0.3s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)",bgcolor:`${i}05`}},onClick:s,children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.jsx(m,{sx:{p:1.5,borderRadius:2,bgcolor:`${i}15`,color:i,mr:2},children:n}),r.jsx(y,{variant:"h6",sx:{fontWeight:700},children:e})]}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t}),r.jsx(S,{variant:"outlined",size:"small",endIcon:r.jsx(nt,{}),sx:{color:i,borderColor:i},children:"Manage"})]})}),x=n&&["ADMIN","PRODUCT_MANAGER","USER_MANAGER","MODERATOR"].includes(n.role);return n&&x?r.jsxs(j,{maxWidth:"xl",sx:{py:4},children:[r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h3",sx:{fontWeight:900,mb:1,background:"linear-gradient(45deg, #667eea 0%, #764ba2 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Admin Dashboard"}),r.jsxs(y,{variant:"h6",color:"text.secondary",children:["Welcome back, ",n.firstName,"! Here's what's happening with your store."]})]}),r.jsxs(f,{container:!0,spacing:3,sx:{mb:4},children:[("ADMIN"===(null==n?void 0:n.role)||"USER_MANAGER"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsx(l,{title:"Total Users",value:s.totalUsers.toLocaleString(),icon:r.jsx(Ze,{sx:{fontSize:28}}),color:"#3b82f6",onClick:()=>i("/admin/users")})}),("ADMIN"===(null==n?void 0:n.role)||"PRODUCT_MANAGER"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsx(l,{title:"Total Products",value:s.totalProducts.toLocaleString(),icon:r.jsx(et,{sx:{fontSize:28}}),color:"#10b981",onClick:()=>i("/admin/products")})}),("ADMIN"===(null==n?void 0:n.role)||"MODERATOR"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsx(l,{title:"Total Orders",value:s.totalOrders.toLocaleString(),icon:r.jsx(u,{sx:{fontSize:28}}),color:"#f59e0b",onClick:()=>i("/admin/orders")})}),"ADMIN"===(null==n?void 0:n.role)&&r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsx(l,{title:"Total Revenue",value:`$${s.totalRevenue.toLocaleString()}`,icon:r.jsx(tt,{sx:{fontSize:28}}),color:"#ef4444"})})]}),r.jsxs(f,{container:!0,spacing:3,sx:{mb:4},children:[("ADMIN"===(null==n?void 0:n.role)||"PRODUCT_MANAGER"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(c,{title:"Manage Products",description:"Add, edit, or remove products from your inventory",icon:r.jsx(et,{}),color:"#10b981",onClick:()=>i("/admin/products")})}),("ADMIN"===(null==n?void 0:n.role)||"MODERATOR"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(c,{title:"Process Orders",description:"View and manage customer orders and shipments",icon:r.jsx(u,{}),color:"#f59e0b",onClick:()=>i("/admin/orders")})}),("ADMIN"===(null==n?void 0:n.role)||"USER_MANAGER"===(null==n?void 0:n.role))&&r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(c,{title:"User Management",description:"Manage user accounts, roles, and permissions",icon:r.jsx(Ze,{}),color:"#3b82f6",onClick:()=>i("/admin/users")})}),"ADMIN"===(null==n?void 0:n.role)&&r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(c,{title:"Analytics & Reports",description:"View sales reports, user analytics, and insights",icon:r.jsx(rt,{}),color:"#8b5cf6",onClick:()=>i("/admin/analytics")})})]}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:8,children:r.jsx(O,{sx:{height:"100%"},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:700},children:"Recent Activity"}),r.jsx(S,{size:"small",endIcon:r.jsx(nt,{}),children:"View All"})]}),r.jsx(m,{sx:{minHeight:300,display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx(y,{variant:"body2",color:"text.secondary",children:"No recent activity to display"})})]})})}),r.jsx(f,{item:!0,xs:12,md:4,children:r.jsx(O,{sx:{height:"100%"},children:r.jsxs(_,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:700,mb:3},children:"Quick Stats"}),r.jsxs(w,{spacing:2,children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx(y,{variant:"body2",color:"text.secondary",children:"Orders Today"}),r.jsx(v,{label:"0",size:"small",color:"primary"})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx(y,{variant:"body2",color:"text.secondary",children:"New Users"}),r.jsx(v,{label:"0",size:"small",color:"success"})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r.jsx(y,{variant:"body2",color:"text.secondary",children:"Low Stock Items"}),r.jsx(v,{label:"0",size:"small",color:"warning"})]})]})]})})})]})]}):r.jsxs(j,{maxWidth:"md",sx:{py:8,textAlign:"center"},children:[r.jsx(ne,{severity:"error",sx:{mb:3},children:"Access denied. Admin privileges required."}),r.jsx(S,{variant:"contained",onClick:()=>i("/"),children:"Go to Home"})]})}},Symbol.toStringTag,{value:"Module"})),hr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n,i]=t.useState(""),[s,a]=t.useState(""),[o,l]=t.useState(!1),{login:c,isLoading:d}=Ut(),x=e(),{notify:h}=Gt(),u=e=>{h(`${e} login will be available soon!`,"info")};return r.jsx(m,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",p:2},children:r.jsx(j,{maxWidth:"sm",children:r.jsx(A,{elevation:24,sx:{p:4,borderRadius:3,background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:r.jsxs(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[r.jsxs(m,{sx:{mb:3,textAlign:"center"},children:[r.jsx(y,{variant:"h3",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #667eea, #764ba2)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",mb:1},children:"ShopPro"}),r.jsx(y,{variant:"h5",color:"text.primary",sx:{fontWeight:500},children:"Welcome back"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mt:1},children:"Sign in to your account to continue"})]}),r.jsxs(m,{sx:{width:"100%",mb:3},children:[r.jsx(y,{variant:"body2",color:"text.secondary",textAlign:"center",sx:{mb:2},children:"Sign in with"}),r.jsxs(f,{container:!0,spacing:2,children:[r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(it,{}),component:"a",href:"http://localhost:8080/oauth2/authorization/google",sx:{py:1.5,borderRadius:2,textTransform:"none",borderColor:"#db4437",color:"#db4437","&:hover":{borderColor:"#db4437",backgroundColor:"rgba(219, 68, 55, 0.04)"}},children:"Google"})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(Te,{}),onClick:()=>u("Facebook"),sx:{py:1.5,borderRadius:2,textTransform:"none",borderColor:"#4267B2",color:"#4267B2","&:hover":{borderColor:"#4267B2",backgroundColor:"rgba(66, 103, 178, 0.04)"}},children:"Facebook"})})]}),r.jsxs(f,{container:!0,spacing:2,sx:{mt:1},children:[r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(st,{}),onClick:()=>u("Apple"),sx:{py:1.5,borderRadius:2,textTransform:"none",borderColor:"#000",color:"#000","&:hover":{borderColor:"#000",backgroundColor:"rgba(0, 0, 0, 0.04)"}},children:"Apple"})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(S,{fullWidth:!0,variant:"outlined",startIcon:r.jsx(at,{}),onClick:()=>u("GitHub"),sx:{py:1.5,borderRadius:2,textTransform:"none",borderColor:"#333",color:"#333","&:hover":{borderColor:"#333",backgroundColor:"rgba(51, 51, 51, 0.04)"}},children:"GitHub"})})]})]}),r.jsx(Le,{sx:{width:"100%",my:3},children:r.jsx(y,{variant:"body2",color:"text.secondary",children:"or continue with email"})}),r.jsxs(m,{component:"form",onSubmit:async e=>{if(e.preventDefault(),!n||!s)return void h("Please enter both username and password","warning");await c(n,s)?(h("Login successful!","success"),x("/")):h("Invalid username or password","error")},sx:{width:"100%"},children:[r.jsx(K,{fullWidth:!0,label:"Username or Email",value:n,onChange:e=>i(e.target.value),margin:"normal",required:!0,autoComplete:"username",autoFocus:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),r.jsx(K,{fullWidth:!0,label:"Password",type:o?"text":"password",value:s,onChange:e=>a(e.target.value),margin:"normal",required:!0,autoComplete:"current-password",InputProps:{endAdornment:r.jsx(E,{"aria-label":"toggle password visibility",onClick:()=>{l(!o)},edge:"end",children:o?r.jsx(ot,{}):r.jsx(Ye,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),r.jsx(m,{sx:{display:"flex",justifyContent:"flex-end",mt:1,mb:2},children:r.jsx(q,{component:"button",type:"button",variant:"body2",onClick:()=>x("/forgot-password"),sx:{textDecoration:"none",color:"primary.main",background:"none",border:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Forgot password?"})}),r.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",disabled:d,sx:{mt:2,mb:3,py:1.5,borderRadius:2,fontSize:"1rem",fontWeight:600,textTransform:"none",background:"linear-gradient(45deg, #667eea, #764ba2)","&:hover":{background:"linear-gradient(45deg, #5a6fd8, #6a3f8a)"}},size:"large",startIcon:d?r.jsx(Ee,{size:20,color:"inherit"}):null,children:d?"Signing In...":"Sign In"})]}),r.jsxs(y,{variant:"body2",color:"text.secondary",textAlign:"center",children:["Don't have an account?"," ",r.jsx(q,{component:"button",type:"button",onClick:()=>x("/signup"),sx:{color:"primary.main",textDecoration:"none",fontWeight:500,background:"none",border:"none",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:"Sign up for free"})]})]})})})})}},Symbol.toStringTag,{value:"Module"})),mr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const i=e(),[s,a]=t.useState({username:"",email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phoneNumber:"",agreeToTerms:!1}),[o,l]=t.useState({}),[c,x]=t.useState(!1),[h,u]=t.useState(!1),[g,p]=t.useState(!1),[b,f]=t.useState(null),{notify:v}=Gt(),w=e=>t=>{const r="agreeToTerms"===e?t.target.checked:t.target.value;a(t=>({...t,[e]:r})),o[e]&&l(t=>({...t,[e]:void 0}))};return r.jsx(j,{maxWidth:"sm",sx:{mt:4,mb:4},children:r.jsxs(A,{elevation:3,sx:{p:4},children:[r.jsxs(m,{textAlign:"center",mb:3,children:[r.jsx(y,{variant:"h4",component:"h1",gutterBottom:!0,children:"Create Account"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Join our e-commerce platform"}),r.jsx(m,{mt:1,children:r.jsx(S,{component:n,to:"/signup-phone",size:"small",children:"Hoáº·c Ä‘Äƒng kÃ½ báº±ng sá»‘ Ä‘iá»‡n thoáº¡i"})})]}),b&&r.jsx(ne,{severity:b.type,sx:{mb:3},children:b.text}),r.jsxs(m,{component:"form",onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return s.username.trim()?s.username.length<3&&(e.username="Username must be at least 3 characters"):e.username="Username is required",s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Please enter a valid email"):e.email="Email is required",s.password?s.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",s.firstName.trim()||(e.firstName="First name is required"),s.lastName.trim()||(e.lastName="Last name is required"),s.phoneNumber&&!/^\+?[\d\s-()]+$/.test(s.phoneNumber)&&(e.phoneNumber="Please enter a valid phone number"),s.agreeToTerms||(e.agreeToTerms="You must agree to the terms and conditions"),l(e),0===Object.keys(e).length})()){p(!0),f(null);try{const e={username:s.username,email:s.email,password:s.password,firstName:s.firstName,lastName:s.lastName};s.phoneNumber&&(e.phoneNumber=s.phoneNumber);const t=await d.register(e);t.success?(f({type:"success",text:"Registration successful! Please check your email for verification."}),v("Registration successful! Please check your email for verification.","success"),setTimeout(()=>{i("/login")},3e3)):(f({type:"error",text:t.message||"Registration failed"}),v(t.message||"Registration failed","error"))}catch(t){const e=t instanceof Error?t.message:"Registration failed. Please try again.";f({type:"error",text:e}),v(e,"error")}finally{p(!1)}}},children:[r.jsxs(m,{display:"flex",gap:2,mb:2,children:[r.jsx(K,{fullWidth:!0,label:"First Name",value:s.firstName,onChange:w("firstName"),error:!!o.firstName,helperText:o.firstName,InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(lt,{})})}}),r.jsx(K,{fullWidth:!0,label:"Last Name",value:s.lastName,onChange:w("lastName"),error:!!o.lastName,helperText:o.lastName})]}),r.jsx(K,{fullWidth:!0,label:"Username",value:s.username,onChange:w("username"),error:!!o.username,helperText:o.username,sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(lt,{})})}}),r.jsx(K,{fullWidth:!0,label:"Email Address",type:"email",value:s.email,onChange:w("email"),error:!!o.email,helperText:o.email,sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(ct,{})})}}),r.jsx(K,{fullWidth:!0,label:"Phone Number (Optional)",value:s.phoneNumber,onChange:w("phoneNumber"),error:!!o.phoneNumber,helperText:o.phoneNumber||"Optional field",sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(dt,{})})}}),r.jsx(K,{fullWidth:!0,label:"Password",type:c?"text":"password",value:s.password,onChange:w("password"),error:!!o.password,helperText:o.password,sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>x(!c),edge:"end",children:c?r.jsx(ot,{}):r.jsx(Ye,{})})})}}),r.jsx(K,{fullWidth:!0,label:"Confirm Password",type:h?"text":"password",value:s.confirmPassword,onChange:w("confirmPassword"),error:!!o.confirmPassword,helperText:o.confirmPassword,sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>u(!h),edge:"end",children:h?r.jsx(ot,{}):r.jsx(Ye,{})})})}}),r.jsx(ht,{control:r.jsx(mt,{checked:s.agreeToTerms,onChange:w("agreeToTerms"),color:"primary"}),label:r.jsxs(y,{variant:"body2",children:["I agree to the"," ",r.jsx(q,{component:n,to:"/terms",color:"primary",children:"Terms and Conditions"})," ","and"," ",r.jsx(q,{component:n,to:"/privacy",color:"primary",children:"Privacy Policy"})]}),sx:{mb:2}}),"string"==typeof o.agreeToTerms&&r.jsx(y,{variant:"caption",color:"error",display:"block",sx:{mt:-1,mb:2},children:o.agreeToTerms}),r.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:g,sx:{mb:2},children:g?"Creating Account...":"Create Account"}),r.jsx(m,{textAlign:"center",children:r.jsxs(y,{variant:"body2",children:["Already have an account?"," ",r.jsx(q,{component:n,to:"/login",color:"primary",children:"Sign In"})]})})]})]})})}},Symbol.toStringTag,{value:"Module"})),ur=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const i=e(),[s]=o(),a=s.get("token"),{notify:l}=Gt(),[c]=t.useState(a?"reset":"email"),[x,h]=t.useState(""),[u,g]=t.useState(""),[p,b]=t.useState(""),[f,v]=t.useState(!1),[w,C]=t.useState(!1),[k,I]=t.useState(!1),W="email"===c?0:1;return r.jsx(j,{maxWidth:"sm",sx:{mt:4,mb:4},children:r.jsxs(A,{elevation:3,sx:{p:4},children:[r.jsxs(m,{textAlign:"center",mb:3,children:[r.jsx(y,{variant:"h4",component:"h1",gutterBottom:!0,children:"email"===c?"Forgot Password":"Reset Password"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"email"===c?"Enter your email address and we'll send you instructions to reset your password":"Enter your new password"})]}),r.jsx(He,{activeStep:W,sx:{mb:4},children:["Enter Email","Reset Password"].map(e=>r.jsx(Ue,{children:r.jsx(Ge,{children:e})},e))}),"email"===c?r.jsxs(m,{component:"form",onSubmit:async e=>{if(e.preventDefault(),x.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x)){I(!0);try{const e=await d.forgotPassword(x);e.success?l("Password reset instructions have been sent to your email. Please check your inbox.","success"):l(e.message||"Failed to send reset email","error")}catch(t){const e=t instanceof Error?t.message:"Failed to send reset email. Please try again.";l(e,"error")}finally{I(!1)}}else l("Please enter a valid email address","error");else l("Email is required","error")},children:[r.jsx(K,{fullWidth:!0,label:"Email Address",type:"email",value:x,onChange:e=>h(e.target.value),sx:{mb:3},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(ct,{})})},placeholder:"Enter your registered email address"}),r.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:k,sx:{mb:3},children:k?"Sending...":"Send Reset Instructions"}),r.jsx(m,{textAlign:"center",children:r.jsx(q,{component:n,to:"/login",color:"primary",children:r.jsxs(m,{display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(ut,{sx:{mr:1,fontSize:16}}),"Back to Login"]})})})]}):r.jsxs(m,{component:"form",onSubmit:async e=>{if(e.preventDefault(),u.trim())if(u.length>=6)if(u===p)if(a){I(!0);try{const e=await d.resetPassword(a,u);e.success?(l("Password reset successfully! You can now login with your new password.","success"),setTimeout(()=>{i("/login")},2e3)):l(e.message||"Failed to reset password","error")}catch(t){const e=t instanceof Error?t.message:"Failed to reset password. Please try again.";l(e,"error")}finally{I(!1)}}else l("Invalid reset token","error");else l("Passwords do not match","error");else l("Password must be at least 6 characters long","error");else l("Password is required","error")},children:[r.jsx(K,{fullWidth:!0,label:"New Password",type:f?"text":"password",value:u,onChange:e=>g(e.target.value),sx:{mb:2},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>v(!f),edge:"end",children:f?r.jsx(ot,{}):r.jsx(Ye,{})})})},placeholder:"Enter your new password"}),r.jsx(K,{fullWidth:!0,label:"Confirm New Password",type:w?"text":"password",value:p,onChange:e=>b(e.target.value),sx:{mb:3},InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>C(!w),edge:"end",children:w?r.jsx(ot,{}):r.jsx(Ye,{})})})},placeholder:"Confirm your new password"}),r.jsx(S,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:k,sx:{mb:3},children:k?"Resetting...":"Reset Password"}),r.jsx(m,{textAlign:"center",children:r.jsx(q,{component:n,to:"/login",color:"primary",children:r.jsxs(m,{display:"flex",alignItems:"center",justifyContent:"center",children:[r.jsx(ut,{sx:{mr:1,fontSize:16}}),"Back to Login"]})})})]})]})})}},Symbol.toStringTag,{value:"Module"}));function gr(e){const{children:t,value:n,index:i,...s}=e;return r.jsx("div",{role:"tabpanel",hidden:n!==i,id:`profile-tabpanel-${i}`,"aria-labelledby":`profile-tab-${i}`,...s,children:n===i&&r.jsx(m,{sx:{p:3},children:t})})}const pr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{var e,n;const{user:i,isAuthenticated:s}=Ut(),[a,o]=t.useState(0),[l,c]=t.useState(!1),[x,h]=t.useState(!1),[u,g]=t.useState(null),[p,b]=t.useState({firstName:"",lastName:"",email:"",phoneNumber:"",address:"",dateOfBirth:"",avatarUrl:""}),[w,C]=t.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[k,I]=t.useState({personalizationEnabled:!0,chatbotEnabled:!0,recommendationEnabled:!0,emailNotifications:!0,pushNotifications:!1}),[W,N]=t.useState({current:!1,new:!1,confirm:!1});if(t.useEffect(()=>{i&&(b({firstName:i.firstName||"",lastName:i.lastName||"",email:i.email||"",phoneNumber:i.phoneNumber||"",address:i.address||"",dateOfBirth:i.dateOfBirth||"",avatarUrl:i.avatarUrl||""}),I({personalizationEnabled:i.personalizationEnabled??!0,chatbotEnabled:i.chatbotEnabled??!0,recommendationEnabled:i.recommendationEnabled??!0,emailNotifications:!0,pushNotifications:!1}))},[i]),!s)return r.jsx(j,{maxWidth:"sm",sx:{mt:4},children:r.jsx(ne,{severity:"warning",children:"Please log in to view your profile."})});return r.jsxs(j,{maxWidth:"lg",sx:{mt:4,mb:4,pt:"40px"},children:[r.jsx(A,{elevation:3,sx:{p:3,mb:3},children:r.jsxs(f,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(f,{item:!0,children:r.jsxs(m,{position:"relative",children:[r.jsxs(B,{src:p.avatarUrl,sx:{width:100,height:100},children:[null==(e=null==i?void 0:i.firstName)?void 0:e[0],null==(n=null==i?void 0:i.lastName)?void 0:n[0]]}),r.jsx(E,{sx:{position:"absolute",bottom:0,right:0,backgroundColor:"primary.main",color:"white","&:hover":{backgroundColor:"primary.dark"}},size:"small",children:r.jsx(gt,{fontSize:"small"})})]})}),r.jsxs(f,{item:!0,xs:!0,children:[r.jsxs(y,{variant:"h4",gutterBottom:!0,children:[null==i?void 0:i.firstName," ",null==i?void 0:i.lastName]}),r.jsx(y,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:null==i?void 0:i.email}),r.jsxs(m,{display:"flex",gap:1,children:[r.jsx(v,{label:null==i?void 0:i.role,color:"ADMIN"===(null==i?void 0:i.role)?"primary":"default",size:"small"}),r.jsx(v,{label:(null==i?void 0:i.isEmailVerified)?"Verified":"Unverified",color:(null==i?void 0:i.isEmailVerified)?"success":"warning",size:"small"})]})]})]})}),r.jsxs(A,{elevation:3,children:[r.jsxs(he,{value:a,onChange:(e,t)=>{o(t),g(null)},"aria-label":"profile tabs",sx:{borderBottom:1,borderColor:"divider"},children:[r.jsx(me,{icon:r.jsx(lt,{}),label:"Profile"}),r.jsx(me,{icon:r.jsx(F,{}),label:"Security"}),r.jsx(me,{icon:r.jsx(pt,{}),label:"Preferences"}),r.jsx(me,{icon:r.jsx(bt,{}),label:"Notifications"})]}),u&&r.jsx(m,{sx:{p:2},children:r.jsx(ne,{severity:u.type,children:u.text})}),r.jsxs(gr,{value:a,index:0,children:[r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"First Name",value:p.firstName,onChange:e=>b(t=>({...t,firstName:e.target.value})),disabled:!l,InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(lt,{})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Last Name",value:p.lastName,onChange:e=>b(t=>({...t,lastName:e.target.value})),disabled:!l,sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Email",value:p.email,disabled:!0,InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(ct,{})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Phone Number",value:p.phoneNumber,onChange:e=>b(t=>({...t,phoneNumber:e.target.value})),disabled:!l,InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(dt,{})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Address",value:p.address,onChange:e=>b(t=>({...t,address:e.target.value})),disabled:!l,multiline:!0,rows:2,InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(jt,{})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Date of Birth",type:"date",value:p.dateOfBirth,onChange:e=>b(t=>({...t,dateOfBirth:e.target.value})),disabled:!l,InputLabelProps:{shrink:!0},sx:{mb:2}})})]}),r.jsx(m,{sx:{mt:3,display:"flex",gap:2},children:l?r.jsxs(r.Fragment,{children:[r.jsx(S,{variant:"contained",startIcon:r.jsx(vt,{}),onClick:async()=>{h(!0),g(null);try{const e={firstName:p.firstName,lastName:p.lastName,phoneNumber:p.phoneNumber,address:p.address,dateOfBirth:p.dateOfBirth};(await d.updateUserProfile(e)).success&&(g({type:"success",text:"Profile updated successfully!"}),c(!1))}catch(e){const t=e instanceof Error?e.message:"Failed to update profile";g({type:"error",text:t})}finally{h(!1)}},disabled:x,children:"Save Changes"}),r.jsx(S,{variant:"outlined",startIcon:r.jsx(Ke,{}),onClick:()=>c(!1),disabled:x,children:"Cancel"})]}):r.jsx(S,{variant:"contained",startIcon:r.jsx(ft,{}),onClick:()=>c(!0),children:"Edit Profile"})})]}),r.jsxs(gr,{value:a,index:1,children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Change Password"}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Current Password",type:W.current?"text":"password",value:w.currentPassword,onChange:e=>C(t=>({...t,currentPassword:e.target.value})),InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>N(e=>({...e,current:!e.current})),edge:"end",children:W.current?r.jsx(ot,{}):r.jsx(Ye,{})})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"New Password",type:W.new?"text":"password",value:w.newPassword,onChange:e=>C(t=>({...t,newPassword:e.target.value})),InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>N(e=>({...e,new:!e.new})),edge:"end",children:W.new?r.jsx(ot,{}):r.jsx(Ye,{})})})},sx:{mb:2}})}),r.jsx(f,{item:!0,xs:12,md:6,children:r.jsx(K,{fullWidth:!0,label:"Confirm New Password",type:W.confirm?"text":"password",value:w.confirmPassword,onChange:e=>C(t=>({...t,confirmPassword:e.target.value})),InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(xt,{})}),endAdornment:r.jsx(X,{position:"end",children:r.jsx(E,{onClick:()=>N(e=>({...e,confirm:!e.confirm})),edge:"end",children:W.confirm?r.jsx(ot,{}):r.jsx(Ye,{})})})},sx:{mb:2}})})]}),r.jsx(S,{variant:"contained",onClick:async()=>{if(w.currentPassword&&w.newPassword)if(w.newPassword===w.confirmPassword)if(w.newPassword.length<6)g({type:"error",text:"New password must be at least 6 characters"});else{h(!0),g(null);try{(await d.changePassword(w.currentPassword,w.newPassword)).success&&(g({type:"success",text:"Password changed successfully!"}),C({currentPassword:"",newPassword:"",confirmPassword:""}))}catch(e){const t=e instanceof Error?e.message:"Failed to change password";g({type:"error",text:t})}finally{h(!1)}}else g({type:"error",text:"New passwords do not match"});else g({type:"error",text:"Please fill in all password fields"})},disabled:x,sx:{mt:2},children:"Change Password"})]}),r.jsxs(gr,{value:a,index:2,children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Account Preferences"}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(ht,{control:r.jsx(yt,{checked:k.personalizationEnabled,onChange:e=>I(t=>({...t,personalizationEnabled:e.target.checked}))}),label:"Enable Personalization"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{ml:4},children:"Allow the system to personalize your experience based on your behavior"})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(ht,{control:r.jsx(yt,{checked:k.chatbotEnabled,onChange:e=>I(t=>({...t,chatbotEnabled:e.target.checked}))}),label:"Enable AI Assistant"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{ml:4},children:"Allow access to the AI-powered chatbot assistant"})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(ht,{control:r.jsx(yt,{checked:k.recommendationEnabled,onChange:e=>I(t=>({...t,recommendationEnabled:e.target.checked}))}),label:"Enable Recommendations"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{ml:4},children:"Receive personalized product recommendations"})]}),r.jsx(S,{variant:"contained",onClick:async()=>{h(!0),g(null);try{(await d.updatePreferences({personalizationEnabled:k.personalizationEnabled,chatbotEnabled:k.chatbotEnabled,recommendationEnabled:k.recommendationEnabled})).success&&g({type:"success",text:"Preferences updated successfully!"})}catch(e){const t=e instanceof Error?e.message:"Failed to update preferences";g({type:"error",text:t})}finally{h(!1)}},disabled:x,children:"Save Preferences"})]}),r.jsxs(gr,{value:a,index:3,children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Notification Settings"}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(ht,{control:r.jsx(yt,{checked:k.emailNotifications,onChange:e=>I(t=>({...t,emailNotifications:e.target.checked}))}),label:"Email Notifications"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{ml:4},children:"Receive order updates and promotional emails"})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(ht,{control:r.jsx(yt,{checked:k.pushNotifications,onChange:e=>I(t=>({...t,pushNotifications:e.target.checked}))}),label:"Push Notifications"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{ml:4},children:"Receive browser push notifications for important updates"})]}),r.jsx(S,{variant:"contained",onClick:async()=>{h(!0),g(null);try{(await d.updateNotificationSettings({emailNotifications:k.emailNotifications,pushNotifications:k.pushNotifications})).success&&g({type:"success",text:"Notification settings updated successfully!"})}catch(e){const t=e instanceof Error?e.message:"Failed to update notification settings";g({type:"error",text:t})}finally{h(!1)}},disabled:x,children:"Save Settings"})]})]})]})}},Symbol.toStringTag,{value:"Module"})),br=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=e(),{isAuthenticated:i}=Ut(),{addToCart:s}=Ft(),{favorites:a,favoritesLoading:o,removeFromFavorites:l}=Ht(),[c,d]=t.useState(""),[x,h]=t.useState(null),g=Vt(c,300);qt(o);const p=a.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase())||e.category.toLowerCase().includes(g.toLowerCase())||e.brand.toLowerCase().includes(g.toLowerCase())),b=e=>{n(`/products/${e}`)},w=({product:e})=>r.jsxs(O,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative","&:hover":{boxShadow:6,transform:"translateY(-2px)",transition:"all 0.3s ease-in-out"}},children:[r.jsx(E,{sx:{position:"absolute",top:8,right:8,backgroundColor:"rgba(255, 255, 255, 0.9)",zIndex:1,"&:hover":{backgroundColor:"rgba(255, 255, 255, 1)"}},onClick:()=>(async e=>{await l(e)})(e.id),children:r.jsx(D,{color:"error"})}),r.jsx(M,{component:"img",height:"200",image:e.imageUrl||`https://via.placeholder.com/300x200?text=${encodeURIComponent(e.name)}`,alt:e.name,sx:{cursor:"pointer",objectFit:"cover"},onClick:()=>b(e.id)}),r.jsxs(_,{sx:{flexGrow:1},children:[r.jsx(y,{gutterBottom:!0,variant:"h6",component:"h2",sx:{cursor:"pointer","&:hover":{color:"primary.main"}},onClick:()=>b(e.id),children:e.name}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:2,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),r.jsxs(m,{display:"flex",gap:1,mb:2,children:[r.jsx(v,{label:e.category,size:"small",color:"primary",variant:"outlined"}),r.jsx(v,{label:e.brand,size:"small",variant:"outlined"})]}),r.jsxs(m,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[r.jsxs(y,{variant:"h6",color:"primary",children:["$",e.price.toFixed(2)]}),e.rating&&r.jsxs(y,{variant:"body2",color:"text.secondary",children:["â­ ",e.rating,"/5"]})]}),r.jsx(y,{variant:"body2",color:e.stockQuantity>0?"success.main":"error.main",children:e.stockQuantity>0?`${e.stockQuantity} in stock`:"Out of stock"})]}),r.jsxs(St,{sx:{justifyContent:"space-between",px:2,pb:2},children:[r.jsx(S,{variant:"contained",startIcon:r.jsx(u,{}),onClick:()=>(async e=>{try{await s(e.id,1)}catch(t){}})(e),disabled:e.stockQuantity<=0,size:"small",children:"Add to Cart"}),r.jsxs(m,{children:[r.jsx(pe,{title:"View Details",children:r.jsx(E,{size:"small",onClick:()=>b(e.id),children:r.jsx(Ye,{})})}),r.jsx(pe,{title:"Share",children:r.jsx(E,{size:"small",onClick:()=>(e=>{navigator.share?navigator.share({title:e.name,text:e.description,url:`${window.location.origin}/products/${e.id}`}):(navigator.clipboard.writeText(`${window.location.origin}/products/${e.id}`),h({type:"success",text:"Product link copied to clipboard"}),setTimeout(()=>h(null),3e3))})(e),children:r.jsx(ce,{})})})]})]})]}),C=()=>r.jsxs(O,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[r.jsx(T,{variant:"rectangular",height:200}),r.jsxs(_,{sx:{flexGrow:1},children:[r.jsx(T,{variant:"text",height:32,width:"80%"}),r.jsx(T,{variant:"text",height:20,width:"100%"}),r.jsx(T,{variant:"text",height:20,width:"60%"}),r.jsxs(m,{display:"flex",gap:1,my:1,children:[r.jsx(T,{variant:"rounded",height:24,width:60}),r.jsx(T,{variant:"rounded",height:24,width:60})]}),r.jsx(T,{variant:"text",height:24,width:"40%"})]}),r.jsxs(St,{sx:{px:2,pb:2},children:[r.jsx(T,{variant:"rounded",height:36,width:120}),r.jsx(T,{variant:"circular",height:40,width:40})]})]});return i?r.jsxs(j,{maxWidth:"xl",sx:{mt:4,mb:4,pt:"40px"},children:[r.jsx(m,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4,children:r.jsxs(m,{children:[r.jsx(y,{variant:"h4",component:"h1",gutterBottom:!0,children:"My Favorites"}),r.jsx(y,{variant:"body1",color:"text.secondary",children:a.length>0?`${a.length} favorite ${1===a.length?"product":"products"}`:"No favorite products yet"})]})}),a.length>0&&r.jsx(A,{elevation:1,sx:{mb:4,p:2},children:r.jsx(K,{fullWidth:!0,placeholder:"Search your favorites...",value:c,onChange:e=>d(e.target.value),InputProps:{startAdornment:r.jsx(X,{position:"start",children:r.jsx(J,{color:"action"})}),endAdornment:c&&r.jsx(X,{position:"end",children:r.jsx(E,{size:"small",onClick:()=>d(""),children:r.jsx(Q,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"background.default"}}})}),x&&r.jsx(ne,{severity:x.type,sx:{mb:3},children:x.text}),o?r.jsx(f,{container:!0,spacing:3,children:[...Array(8)].map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsx(C,{})},t))}):0===a.length?r.jsxs(m,{textAlign:"center",py:8,children:[r.jsx(oe,{sx:{fontSize:100,color:"text.secondary",mb:2}}),r.jsx(y,{variant:"h5",gutterBottom:!0,children:"No Favorites Yet"}),r.jsx(y,{variant:"body1",color:"text.secondary",mb:3,children:"Start browsing products and add items to your favorites to see them here."}),r.jsx(S,{variant:"contained",size:"large",onClick:()=>n("/products"),children:"Browse Products"})]}):0===p.length?r.jsxs(m,{textAlign:"center",py:8,children:[r.jsx(J,{sx:{fontSize:100,color:"text.secondary",mb:2}}),r.jsx(y,{variant:"h5",gutterBottom:!0,children:"No Results Found"}),r.jsx(y,{variant:"body1",color:"text.secondary",mb:3,children:"Try adjusting your search terms to find what you're looking for."}),r.jsx(S,{variant:"outlined",onClick:()=>d(""),startIcon:r.jsx(Q,{}),children:"Clear Search"})]}):r.jsx(f,{container:!0,spacing:3,children:p.map(e=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsx(w,{product:e})},e.id))}),r.jsx(wt,{color:"primary","aria-label":"browse products",sx:{position:"fixed",bottom:16,right:16},onClick:()=>n("/products"),children:r.jsx(u,{})})]}):r.jsx(j,{maxWidth:"md",sx:{mt:4,pt:"40px"},children:r.jsx(ne,{severity:"warning",children:"Please log in to view your favorite products."})})}},Symbol.toStringTag,{value:"Module"})),jr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{t:e}=l(),{addToCart:n}=Ft(),{isAuthenticated:i}=Ut(),[s,a]=t.useState([]),[o,c]=t.useState(!0),[x,h]=t.useState([]);t.useEffect(()=>{(async()=>{if(i)try{c(!0);const e=JSON.parse(localStorage.getItem("auth_user")||"{}"),t=e.id||e.userId||1,r=await d.getFavorites(t);if(r.success&&r.data){const e=r.data.map((e,t)=>({id:t+1,productId:e.id,name:e.name,description:e.description||"No description available",price:e.price||0,originalPrice:e.compareAtPrice||e.price,image:e.imageUrl||"https://via.placeholder.com/400x300?text=No+Image",category:e.category||"General",brand:e.brand||"Unknown Brand",rating:e.averageRating||e.rating||4.5,reviews:e.reviewCount||0,stock:e.stockQuantity||0,addedDate:e.createdAt?new Date(e.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],discount:e.salePrice?Math.round(100*(1-e.salePrice/e.price)):0,isNew:e.isFeatured||!1,isOnSale:e.isOnSale||!1}));a(e)}else a([])}catch(e){a([])}finally{c(!1)}else c(!1)})()},[i]);const g=e=>{if(!e.originalPrice)return null;return(e.price-e.originalPrice)/e.originalPrice*100};return i?r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h3",component:"h1",sx:{fontWeight:"bold",mb:1},children:e("wishlist.title")}),r.jsx(y,{variant:"h6",color:"text.secondary",children:e("wishlist.empty")})]}),s.length>0&&r.jsx(O,{sx:{borderRadius:3,mb:4},children:r.jsx(_,{children:r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(S,{variant:"outlined",onClick:()=>{x.length===s.length?h([]):h(s.map(e=>e.id))},size:"small",children:x.length===s.length?e("common.cancel"):e("common.edit")}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:[x.length," of ",s.length," selected"]})]}),r.jsx(m,{sx:{display:"flex",gap:1},children:x.length>0&&r.jsxs(r.Fragment,{children:[r.jsx(S,{variant:"contained",startIcon:r.jsx(u,{}),onClick:()=>{x.forEach(e=>{const t=s.find(t=>t.id===e);t&&n(t.productId,1)})},size:"small",children:e("cart.addToCart")}),r.jsx(S,{variant:"outlined",color:"error",startIcon:r.jsx(_e,{}),onClick:async()=>{try{const e=JSON.parse(localStorage.getItem("auth_user")||"{}"),t=e.id||e.userId||1;await Promise.all(x.map(async e=>{const r=s.find(t=>t.id===e);r&&await d.removeFromFavorites(r.productId,t)})),a(e=>e.filter(e=>!x.includes(e.id))),h([])}catch(e){a(e=>e.filter(e=>!x.includes(e.id))),h([])}},size:"small",children:e("common.delete")})]})})]})})}),o?r.jsx(f,{container:!0,spacing:3,children:[...Array(4)].map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsxs(O,{sx:{borderRadius:3},children:[r.jsx(T,{variant:"rectangular",height:200}),r.jsxs(_,{children:[r.jsx(T,{variant:"text",height:24}),r.jsx(T,{variant:"text",height:20}),r.jsx(T,{variant:"text",height:20})]})]})},t))}):0===s.length?r.jsx(O,{sx:{borderRadius:3,textAlign:"center",py:8},children:r.jsxs(_,{children:[r.jsx(D,{sx:{fontSize:80,color:"text.secondary",mb:3}}),r.jsx(y,{variant:"h5",sx:{fontWeight:"bold",mb:2},children:e("wishlist.empty")}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4},children:e("wishlist.loginRequired")}),r.jsx(S,{variant:"contained",size:"large",href:"/products",sx:{borderRadius:2,textTransform:"none"},children:e("products.title")})]})}):r.jsx(f,{container:!0,spacing:3,children:s.map(t=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsxs(O,{sx:{borderRadius:3,height:"100%",display:"flex",flexDirection:"column",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},children:[r.jsxs(m,{sx:{position:"relative"},children:[r.jsx(M,{component:"img",height:"200",image:t.image,alt:t.name,sx:{objectFit:"cover"}}),r.jsxs(m,{sx:{position:"absolute",top:12,left:12,display:"flex",flexDirection:"column",gap:1},children:[t.isNew&&r.jsx(v,{label:"NEW",color:"success",size:"small"}),t.discount&&r.jsx(v,{label:`-${t.discount}%`,color:"error",size:"small"}),t.isOnSale&&r.jsx(v,{label:"SALE",color:"warning",size:"small"})]}),g(t)&&r.jsx(m,{sx:{position:"absolute",top:12,right:12},children:r.jsx(v,{icon:g(t)<0?r.jsx(Ct,{}):r.jsx(kt,{}),label:`${g(t)>0?"+":""}${g(t).toFixed(1)}%`,color:g(t)<0?"success":"error",size:"small"})}),r.jsxs(m,{sx:{position:"absolute",bottom:12,right:12,display:"flex",gap:1},children:[r.jsx(pe,{title:e("common.edit"),children:r.jsx(E,{sx:{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"white"}},size:"small",children:r.jsx(Ye,{})})}),r.jsx(pe,{title:e("wishlist.removeFromWishlist"),children:r.jsx(E,{sx:{backgroundColor:"rgba(255, 255, 255, 0.9)","&:hover":{backgroundColor:"white"}},size:"small",color:"error",onClick:()=>(async e=>{try{const t=s.find(t=>t.id===e);if(!t)return;const r=JSON.parse(localStorage.getItem("auth_user")||"{}"),n=r.id||r.userId||1;await d.removeFromFavorites(t.productId,n),a(t=>t.filter(t=>t.id!==e))}catch(t){a(t=>t.filter(t=>t.id!==e))}})(t.id),children:r.jsx(_e,{})})})]})]}),r.jsxs(_,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[r.jsx(y,{variant:"caption",color:"primary.main",sx:{fontWeight:"bold",mb:1},children:t.brand}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1,lineHeight:1.3},children:t.name}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:2,flexGrow:1},children:t.description.length>80?`${t.description.substring(0,80)}...`:t.description}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.jsx(L,{value:t.rating,precision:.1,size:"small",readOnly:!0}),r.jsxs(y,{variant:"body2",color:"text.secondary",sx:{ml:1},children:["(",t.reviews,")"]})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold",color:"primary.main"},children:["$",t.price]}),t.originalPrice&&r.jsxs(y,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary"},children:["$",t.originalPrice]})]}),r.jsx(m,{sx:{mb:2},children:r.jsx(v,{label:t.stock>10?e("products.inStock"):t.stock>0?"Low Stock":e("products.outOfStock"),color:t.stock>10?"success":t.stock>0?"warning":"error",size:"small"})}),r.jsxs(y,{variant:"caption",color:"text.secondary",sx:{mb:2,display:"block"},children:["Added on ",new Date(t.addedDate).toLocaleDateString()]}),r.jsx(m,{sx:{display:"flex",gap:1},children:r.jsx(S,{variant:"contained",startIcon:r.jsx(u,{}),onClick:()=>(e=>{n(e.productId,1)})(t),disabled:0===t.stock,fullWidth:!0,sx:{borderRadius:2},children:e("cart.addToCart")})})]})]})},t.id))}),s.length>0&&r.jsx(O,{sx:{borderRadius:3,mt:4},children:r.jsxs(_,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:e("wishlist.title")}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",color:"primary.main"},children:s.length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e("common.info")})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsxs(y,{variant:"h4",sx:{fontWeight:"bold",color:"success.main"},children:["$",s.reduce((e,t)=>e+t.price,0).toFixed(2)]}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e("cart.total")})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",color:"warning.main"},children:s.filter(e=>e.discount).length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Sale"})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",color:"info.main"},children:s.filter(e=>e.isNew).length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"New"})]})})]})]})})]}):r.jsx(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:r.jsx(ne,{severity:"info",sx:{borderRadius:3},children:e("wishlist.loginRequired")})})}},Symbol.toStringTag,{value:"Module"})),fr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{t:e}=l(),{addToCart:n}=Ft(),{isAuthenticated:i}=Ut(),[s,a]=t.useState([]),[o,c]=t.useState(!0),[x,h]=t.useState([]);t.useEffect(()=>{(async()=>{try{c(!0);const e=JSON.parse(localStorage.getItem("compare_products")||"[]");if(0===e.length)return a([]),void c(!1);const t=e.map(async e=>{try{const t=await d.getProduct(e);if(t.success&&t.data)return t.data}catch(t){}return null}),r=await Promise.all(t),n=r.filter(e=>null!==e).map(e=>({id:e.id,name:e.name,description:e.description||"No description available",price:e.price||0,originalPrice:e.compareAtPrice||e.price,image:e.imageUrl||"https://via.placeholder.com/400x300?text=No+Image",category:e.category||"General",brand:e.brand||"Unknown Brand",rating:e.averageRating||e.rating||4.5,reviews:e.reviewCount||0,stock:e.stockQuantity||0,specs:{Processor:e.processor||"N/A",RAM:e.ram||"N/A",Storage:e.storage||"N/A",Display:e.display||"N/A",Camera:e.camera||"N/A",Battery:e.battery||"N/A",Weight:e.weight||"N/A"},features:e.features||[],discount:e.salePrice?Math.round(100*(1-e.salePrice/e.price)):0,isNew:e.isFeatured||!1,isOnSale:e.isOnSale||!1}));a(n)}catch(e){a([])}finally{c(!1)}})()},[]);const g=e=>{if(!e.originalPrice)return null;return(e.price-e.originalPrice)/e.originalPrice*100},p=s.length>0?Object.keys(s[0].specs):[];return i?r.jsxs(j,{maxWidth:"xl",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h3",component:"h1",sx:{fontWeight:"bold",mb:1},children:"Compare Products"}),r.jsx(y,{variant:"h6",color:"text.secondary",children:"Compare specifications and features to make the best choice"})]}),s.length>0&&r.jsx(O,{sx:{borderRadius:3,mb:4},children:r.jsx(_,{children:r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold"},children:["Comparing ",s.length," products"]}),r.jsxs(m,{sx:{display:"flex",gap:2},children:[r.jsx(S,{variant:"outlined",startIcon:r.jsx(ae,{}),href:"/products",children:"Add More Products"}),r.jsx(S,{variant:"outlined",color:"error",startIcon:r.jsx(_e,{}),onClick:()=>a([]),children:"Clear All"})]})]})})}),o?r.jsx(f,{container:!0,spacing:3,children:[...Array(3)].map((e,t)=>r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(O,{sx:{borderRadius:3},children:[r.jsx(T,{variant:"rectangular",height:200}),r.jsxs(_,{children:[r.jsx(T,{variant:"text",height:24}),r.jsx(T,{variant:"text",height:20}),r.jsx(T,{variant:"text",height:20})]})]})},t))}):0===s.length?r.jsx(O,{sx:{borderRadius:3,textAlign:"center",py:8},children:r.jsxs(_,{children:[r.jsx(le,{sx:{fontSize:80,color:"text.secondary",mb:3}}),r.jsx(y,{variant:"h5",sx:{fontWeight:"bold",mb:2},children:e("common.compare")}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4},children:e("categories.viewAllProducts")}),r.jsx(S,{variant:"contained",size:"large",href:"/products",sx:{borderRadius:2,textTransform:"none"},children:e("products.title")})]})}):r.jsx(ye,{component:A,sx:{borderRadius:3},children:r.jsxs(we,{children:[r.jsx(It,{children:r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",minWidth:200},children:"Specifications"}),s.map(e=>r.jsx(ke,{align:"center",sx:{minWidth:250},children:r.jsxs(m,{sx:{position:"relative"},children:[r.jsx(E,{size:"small",sx:{position:"absolute",top:-8,right:-8,zIndex:1},onClick:()=>(e=>{const t=JSON.parse(localStorage.getItem("compare_products")||"[]").filter(t=>t!==e);localStorage.setItem("compare_products",JSON.stringify(t)),a(t=>t.filter(t=>t.id!==e))})(e.id),children:r.jsx(Pe,{})}),r.jsx(O,{sx:{borderRadius:2,mb:2},children:r.jsx(M,{component:"img",height:"120",image:e.image,alt:e.name,sx:{objectFit:"cover"}})}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.name}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:e.brand}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:[r.jsx(L,{value:e.rating,precision:.1,size:"small",readOnly:!0}),r.jsxs(y,{variant:"body2",color:"text.secondary",sx:{ml:1},children:["(",e.reviews,")"]})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1,mb:2},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold",color:"primary.main"},children:["$",e.price]}),e.originalPrice&&r.jsxs(y,{variant:"body2",sx:{textDecoration:"line-through",color:"text.secondary"},children:["$",e.originalPrice]})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"center",gap:1,mb:2},children:[e.isNew&&r.jsx(v,{label:"NEW",color:"success",size:"small"}),e.discount&&r.jsx(v,{label:`-${e.discount}%`,color:"error",size:"small"}),e.isOnSale&&r.jsx(v,{label:"SALE",color:"warning",size:"small"})]}),r.jsxs(m,{sx:{display:"flex",gap:1,justifyContent:"center"},children:[r.jsx(pe,{title:"Add to Cart",children:r.jsx(E,{size:"small",color:"primary",onClick:()=>(e=>{n(e.id,1)})(e),disabled:0===e.stock,children:r.jsx(u,{})})}),r.jsx(pe,{title:x.includes(e.id)?"Remove from Favorites":"Add to Favorites",children:r.jsx(E,{size:"small",color:x.includes(e.id)?"error":"default",onClick:()=>{return t=e.id,void h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:x.includes(e.id)?r.jsx(D,{}):r.jsx(oe,{})})})]})]})},e.id))]})}),r.jsxs(Se,{children:[p.map(e=>r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",bgcolor:"background.default"},children:e}),s.map(t=>r.jsx(ke,{align:"center",children:r.jsx(y,{variant:"body2",children:t.specs[e]})},`${t.id}-${e}`))]},e)),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",bgcolor:"background.default"},children:"Features"}),s.map(e=>r.jsx(ke,{align:"center",children:r.jsx(ue,{dense:!0,children:e.features.map((e,t)=>r.jsxs(ge,{sx:{py:0},children:[r.jsx(Wt,{sx:{minWidth:30},children:r.jsx(Ie,{color:"success",fontSize:"small"})}),r.jsx(je,{primary:e,primaryTypographyProps:{variant:"body2"}})]},t))})},`${e.id}-features`))]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",bgcolor:"background.default"},children:"Stock Status"}),s.map(t=>r.jsx(ke,{align:"center",children:r.jsx(v,{label:t.stock>10?e("products.inStock"):t.stock>0?"Low Stock":e("products.outOfStock"),color:t.stock>10?"success":t.stock>0?"warning":"error",size:"small"})},`${t.id}-stock`))]}),r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold",bgcolor:"background.default"},children:"Price Change"}),s.map(e=>r.jsx(ke,{align:"center",children:g(e)?r.jsx(v,{icon:g(e)<0?r.jsx(Ct,{}):r.jsx(kt,{}),label:`${g(e)>0?"+":""}${g(e).toFixed(1)}%`,color:g(e)<0?"success":"error",size:"small"}):r.jsx(y,{variant:"body2",color:"text.secondary",children:"No change"})},`${e.id}-price-change`))]})]})]})}),s.length>1&&r.jsx(O,{sx:{borderRadius:3,mt:4},children:r.jsxs(_,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:3},children:"Comparison Summary"}),r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Best Value"}),r.jsxs(y,{variant:"h4",sx:{fontWeight:"bold",color:"success.main"},children:["$",Math.min(...s.map(e=>e.price)).toFixed(2)]}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Lowest price among compared items"})]})}),r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Highest Rated"}),r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",color:"warning.main"},children:Math.max(...s.map(e=>e.rating)).toFixed(1)}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Best Rating"})]})}),r.jsx(f,{item:!0,xs:12,md:4,children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:2},children:"Most Reviews"}),r.jsx(y,{variant:"h4",sx:{fontWeight:"bold",color:"info.main"},children:Math.max(...s.map(e=>e.reviews))}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Most Reviews"})]})})]})]})})]}):r.jsx(j,{maxWidth:"lg",sx:{py:4},children:r.jsx(ne,{severity:"info",sx:{borderRadius:3},children:"Please log in to compare products."})})}},Symbol.toStringTag,{value:"Module"})),vr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const{t:e}=l(),{isAuthenticated:n,user:i}=Ut(),[s,a]=t.useState([]),[o,c]=t.useState(!0),[x,h]=t.useState(0),[u,g]=t.useState(!1),[p,b]=t.useState("all"),[w,C]=t.useState("recent"),[k,I]=t.useState(""),W=[{value:"all",label:e("categories.allCategories")},{value:"Electronics",label:e("categories.electronics")},{value:"Audio",label:e("categories.audio")},{value:"Mobile",label:e("categories.mobile")},{value:"Computers",label:e("categories.computers")},{value:"Gaming",label:e("categories.gaming")}];t.useEffect(()=>{(async()=>{try{let e;if(c(!0),e=n&&i?await d.getMyReviews(i.id||1):await d.getProductReviews(1),e.success&&e.data){const t=(e.data.content||e.data||[]).map((e,t)=>({id:e.id||t+1,productId:e.productId||1,productName:e.productName||"Product",productImage:e.productImage||"https://via.placeholder.com/400x300?text=No+Image",userId:e.userId||1,userName:e.userName||"User",userAvatar:e.userAvatar||"https://via.placeholder.com/150x150?text=User",rating:e.rating||5,title:e.title||"Review",content:e.content||"No content available",date:e.date||e.createdAt?new Date(e.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],helpful:e.helpful||0,notHelpful:e.notHelpful||0,verified:e.verified||!1,images:e.images||[],pros:e.pros||[],cons:e.cons||[],category:e.category||"General"}));a(t)}else a([])}catch(e){a([])}finally{c(!1)}})()},[n,i]);const N=()=>{g(!1)},P=[...s.filter(e=>{const t="all"===p||e.category===p,r=e.productName.toLowerCase().includes(k.toLowerCase())||e.title.toLowerCase().includes(k.toLowerCase())||e.content.toLowerCase().includes(k.toLowerCase());return t&&r})].sort((e,t)=>{switch(w){case"recent":return new Date(t.date).getTime()-new Date(e.date).getTime();case"rating":return t.rating-e.rating;case"helpful":return t.helpful-e.helpful;default:return 0}}),R=P.filter(e=>e.userId===(null==i?void 0:i.id)),z=P;return n?r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{mb:4},children:[r.jsx(y,{variant:"h4",component:"h1",sx:{fontWeight:700,mb:2,color:"text.primary"},children:e("navigation.reviews")}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Read and write reviews to help other customers make informed decisions"})]}),r.jsxs(f,{container:!0,spacing:3,sx:{mb:4},children:[r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(A,{sx:{borderRadius:2,p:3,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid",borderColor:"divider"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"primary.main",mb:1},children:s.length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e("common.totalReviews")})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(A,{sx:{borderRadius:2,p:3,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid",borderColor:"divider"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"success.main",mb:1},children:(s.reduce((e,t)=>e+t.rating,0)/s.length).toFixed(1)}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e("common.averageRating")})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(A,{sx:{borderRadius:2,p:3,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid",borderColor:"divider"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"warning.main",mb:1},children:R.length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"My Reviews"})]})}),r.jsx(f,{item:!0,xs:12,sm:6,md:3,children:r.jsxs(A,{sx:{borderRadius:2,p:3,textAlign:"center",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid",borderColor:"divider"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"info.main",mb:1},children:s.filter(e=>e.verified).length}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Verified Reviews"})]})})]}),r.jsxs(A,{sx:{borderRadius:3,mb:4},children:[r.jsxs(he,{value:x,onChange:(e,t)=>{h(t)},sx:{borderBottom:1,borderColor:"divider","& .MuiTab-root":{textTransform:"none",fontWeight:"bold",minWidth:120}},children:[r.jsx(me,{label:"All Reviews"}),r.jsx(me,{label:"My Reviews"}),r.jsx(me,{label:"Write Review"})]}),0===x&&r.jsxs(m,{sx:{p:3},children:[r.jsxs(m,{sx:{display:"flex",gap:2,mb:3,flexWrap:"wrap"},children:[r.jsx(K,{placeholder:"Search reviews...",value:k,onChange:e=>I(e.target.value),size:"small",sx:{minWidth:200},InputProps:{startAdornment:r.jsx(J,{sx:{mr:1,color:"action.active"}})}}),r.jsxs(Z,{size:"small",sx:{minWidth:150},children:[r.jsx(ee,{children:"Category"}),r.jsx(te,{value:p,label:"Category",onChange:e=>b(e.target.value),children:W.map(e=>r.jsx(re,{value:e.value,children:e.label},e.value))})]}),r.jsxs(Z,{size:"small",sx:{minWidth:150},children:[r.jsx(ee,{children:"Sort By"}),r.jsxs(te,{value:w,label:"Sort By",onChange:e=>C(e.target.value),children:[r.jsx(re,{value:"recent",children:"Most Recent"}),r.jsx(re,{value:"rating",children:"Highest Rated"}),r.jsx(re,{value:"helpful",children:"Most Helpful"})]})]})]}),o?r.jsx(f,{container:!0,spacing:3,children:[...Array(4)].map((e,t)=>r.jsx(f,{item:!0,xs:12,children:r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",gap:2,mb:2},children:[r.jsx(T,{variant:"circular",width:50,height:50}),r.jsxs(m,{sx:{flexGrow:1},children:[r.jsx(T,{variant:"text",width:"60%"}),r.jsx(T,{variant:"text",width:"40%"})]})]}),r.jsx(T,{variant:"text"}),r.jsx(T,{variant:"text"}),r.jsx(T,{variant:"text",width:"80%"})]})})},t))}):r.jsx(ue,{children:z.map(e=>r.jsx(ge,{sx:{display:"block",mb:2},children:r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"flex-start",gap:2,mb:2},children:[r.jsx(B,{src:e.userAvatar,sx:{width:50,height:50}}),r.jsxs(m,{sx:{flexGrow:1},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:e.userName}),e.verified&&r.jsx(pe,{title:"Verified Purchase",children:r.jsx(be,{color:"primary",fontSize:"small"})})]}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[r.jsx(L,{value:e.rating,readOnly:!0,size:"small"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e.date})]}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",color:"primary.main"},children:e.productName})]})]}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.title}),r.jsx(y,{variant:"body1",sx:{mb:2,lineHeight:1.6},children:e.content}),(e.pros||e.cons)&&r.jsxs(m,{sx:{display:"flex",gap:2,mb:2},children:[e.pros&&e.pros.length>0&&r.jsxs(m,{children:[r.jsx(y,{variant:"subtitle2",sx:{fontWeight:"bold",color:"success.main",mb:1},children:"Pros:"}),r.jsx(ue,{dense:!0,children:e.pros.map((e,t)=>r.jsx(ge,{sx:{py:0},children:r.jsx(je,{primary:e})},t))})]}),e.cons&&e.cons.length>0&&r.jsxs(m,{children:[r.jsx(y,{variant:"subtitle2",sx:{fontWeight:"bold",color:"error.main",mb:1},children:"Cons:"}),r.jsx(ue,{dense:!0,children:e.cons.map((e,t)=>r.jsx(ge,{sx:{py:0},children:r.jsx(je,{primary:e})},t))})]})]}),e.images&&e.images.length>0&&r.jsx(m,{sx:{display:"flex",gap:1,mb:2,flexWrap:"wrap"},children:e.images.map((e,t)=>r.jsx("img",{src:e,alt:`Review ${t+1}`,style:{width:80,height:80,objectFit:"cover",borderRadius:8}},t))}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsxs(S,{size:"small",startIcon:r.jsx(fe,{}),onClick:()=>(async e=>{try{(await d.markReviewHelpful(e)).success&&a(t=>t.map(t=>t.id===e?{...t,helpful:t.helpful+1}:t))}catch(t){}})(e.id),children:["Helpful (",e.helpful,")"]}),r.jsxs(S,{size:"small",startIcon:r.jsx(ve,{}),onClick:()=>{return t=e.id,void a(e=>e.map(e=>e.id===t?{...e,notHelpful:e.notHelpful+1}:e));var t},children:["Not Helpful (",e.notHelpful,")"]}),e.userId===(null==i?void 0:i.id)&&r.jsxs(r.Fragment,{children:[r.jsx(E,{size:"small",color:"primary",children:r.jsx(ft,{})}),r.jsx(E,{size:"small",color:"error",children:r.jsx(_e,{})})]})]})]})})},e.id))})]}),1===x&&r.jsxs(m,{sx:{p:3},children:[r.jsxs(y,{variant:"h6",sx:{fontWeight:"bold",mb:3},children:["My Reviews (",R.length,")"]}),0===R.length?r.jsx(ne,{severity:"info",sx:{borderRadius:3},children:"You haven't written any reviews yet. Start by reviewing products you've purchased!"}):r.jsx(ue,{children:R.map(e=>r.jsx(ge,{sx:{display:"block",mb:2},children:r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[r.jsx("img",{src:e.productImage,alt:e.productName,style:{width:60,height:60,objectFit:"cover",borderRadius:8}}),r.jsxs(m,{sx:{flexGrow:1},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:e.productName}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:1},children:[r.jsx(L,{value:e.rating,readOnly:!0,size:"small"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e.date})]})]}),r.jsxs(m,{children:[r.jsx(E,{size:"small",color:"primary",children:r.jsx(ft,{})}),r.jsx(E,{size:"small",color:"error",children:r.jsx(_e,{})})]})]}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.title}),r.jsx(y,{variant:"body1",sx:{mb:2},children:e.content}),r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(v,{icon:r.jsx(fe,{}),label:`${e.helpful} helpful`,size:"small",color:"primary",variant:"outlined"}),r.jsx(v,{icon:r.jsx(ve,{}),label:`${e.notHelpful} not helpful`,size:"small",color:"error",variant:"outlined"})]})]})})},e.id))})]}),2===x&&r.jsxs(m,{sx:{p:3},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:3},children:"Write a Review"}),r.jsx(ne,{severity:"info",sx:{borderRadius:3,mb:3},children:"You can only review products you have purchased. Browse your order history to find products to review."}),r.jsx(S,{variant:"contained",startIcon:r.jsx(ae,{}),onClick:()=>{g(!0)},sx:{borderRadius:2},children:"Write New Review"})]})]}),r.jsxs(We,{open:u,onClose:N,maxWidth:"md",fullWidth:!0,children:[r.jsx(Ne,{children:r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:"Write a Review"}),r.jsx(E,{onClick:N,children:r.jsx(Pe,{})})]})}),r.jsx(Ae,{children:r.jsxs(f,{container:!0,spacing:3,sx:{mt:1},children:[r.jsx(f,{item:!0,xs:12,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Select Product"}),r.jsxs(te,{label:"Select Product",children:[r.jsx(re,{value:"1",children:"Gaming Laptop Pro"}),r.jsx(re,{value:"2",children:"Wireless Headphones"}),r.jsx(re,{value:"3",children:"Smartphone X Pro"})]})]})}),r.jsxs(f,{item:!0,xs:12,children:[r.jsx(y,{component:"legend",children:"Rating"}),r.jsx(L,{size:"large"})]}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Review Title",placeholder:"Summarize your experience"})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Review Content",multiline:!0,rows:4,placeholder:"Share your detailed experience with this product..."})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Pros (optional)",placeholder:"What you liked about this product"})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Cons (optional)",placeholder:"What could be improved"})})]})}),r.jsxs(Re,{children:[r.jsx(S,{onClick:N,children:"Cancel"}),r.jsx(S,{variant:"contained",startIcon:r.jsx(ze,{}),children:"Submit Review"})]})]})]}):r.jsx(j,{maxWidth:"lg",sx:{py:4},children:r.jsx(ne,{severity:"info",sx:{borderRadius:3},children:e("reviews.loginRequired")})})}},Symbol.toStringTag,{value:"Module"})),yr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>r.jsxs(j,{maxWidth:"sm",sx:{mt:6,mb:6},children:[r.jsxs(A,{sx:{p:2,mb:2,borderRadius:3,textAlign:"center"},elevation:3,children:[r.jsx(y,{variant:"h5",fontWeight:700,gutterBottom:!0,children:"AI TÆ° Váº¥n Äiá»‡n Tá»­"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Há»i Ä‘Ã¡p, tÆ° váº¥n mua sáº¯m Ä‘iá»‡n thoáº¡i, laptop, tai nghe, thiáº¿t bá»‹ gia dá»¥ng... HÃ£y cho biáº¿t nhu cáº§u vÃ  ngÃ¢n sÃ¡ch cá»§a báº¡n."})]}),r.jsx(m,{display:"flex",justifyContent:"center",children:r.jsx(Jt,{embedded:!0,defaultOpen:!0,title:"AI TÆ° Váº¥n Äiá»‡n Tá»­",welcomeMessage:"Xin chÃ o, tÃ´i lÃ  AI tÆ° váº¥n Ä‘á»“ Ä‘iá»‡n tá»­. Báº¡n Ä‘ang cáº§n Ä‘iá»‡n thoáº¡i, laptop, tai nghe hay thiáº¿t bá»‹ gia dá»¥ng? HÃ£y cho tÃ´i biáº¿t nhu cáº§u, ngÃ¢n sÃ¡ch vÃ  thÆ°Æ¡ng hiá»‡u báº¡n thÃ­ch."})})]})},Symbol.toStringTag,{value:"Module"})),wr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,n]=t.useState(0),[i,s]=t.useState({name:"",email:"",subject:"",category:"",message:""}),[a,o]=t.useState({customerName:"",customerEmail:"",customerPhone:"",orderNumber:"",productName:"",productSku:"",issueDescription:"",priority:"NORMAL"}),[l,c]=t.useState(!1),[x,h]=t.useState(!1),[g,p]=t.useState([]),[b,w]=t.useState(!1),[C,k]=t.useState({open:!1,message:"",severity:"success"}),I={PENDING:{label:"Äang chá»",color:"warning",icon:r.jsx(_t,{})},APPROVED:{label:"ÄÃ£ duyá»‡t",color:"info",icon:r.jsx(Fe,{})},RECEIVED:{label:"ÄÃ£ nháº­n",color:"primary",icon:r.jsx(Fe,{})},IN_PROGRESS:{label:"Äang xá»­ lÃ½",color:"secondary",icon:r.jsx(Pt,{})},COMPLETED:{label:"HoÃ n thÃ nh",color:"success",icon:r.jsx(Fe,{})},REJECTED:{label:"Tá»« chá»‘i",color:"error",icon:r.jsx(Ke,{})},CANCELLED:{label:"ÄÃ£ há»§y",color:"default",icon:r.jsx(Ke,{})}},W=[{icon:r.jsx(ct,{}),title:"Há»— trá»£ qua Email",description:"Nháº­n há»— trá»£ qua email",contact:"support@shoppro.com",responseTime:"Trong vÃ²ng 24 giá»",color:"primary.main"},{icon:r.jsx(dt,{}),title:"Há»— trá»£ qua Äiá»‡n thoáº¡i",description:"NÃ³i chuyá»‡n vá»›i Ä‘á»™i ngÅ© cá»§a chÃºng tÃ´i",contact:"+84 1900 123 456",responseTime:"T2-T6, 9:00-18:00",color:"success.main"},{icon:r.jsx(Dt,{}),title:"Chat Trá»±c tuyáº¿n",description:"Há»— trá»£ tá»©c thá»i",contact:"CÃ³ sáºµn 24/7",responseTime:"Pháº£n há»“i ngay láº­p tá»©c",color:"warning.main"}],N=(e,t)=>{s(r=>({...r,[e]:t}))},P=(e,t)=>{o(r=>({...r,[e]:t}))},R=async()=>{w(!0);try{const e=await d.getMyWarrantyRequests();e.success&&e.data?p(e.data.content||[]):p([])}catch(e){p([])}finally{w(!1)}},T=()=>{k({...C,open:!1})};return r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[r.jsxs(m,{sx:{textAlign:"center",mb:6},children:[r.jsx(y,{variant:"h4",component:"h1",sx:{fontWeight:700,mb:2,color:"text.primary"},children:"Trung tÃ¢m Há»— trá»£"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4,maxWidth:600,mx:"auto"},children:"ChÃºng tÃ´i luÃ´n sáºµn sÃ ng há»— trá»£! TÃ¬m cÃ¢u tráº£ lá»i cho cÃ¢u há»i cá»§a báº¡n hoáº·c liÃªn há»‡ vá»›i Ä‘á»™i ngÅ© há»— trá»£"}),r.jsxs(m,{sx:{display:"flex",justifyContent:"center",gap:{xs:3,md:6},flexWrap:"wrap",mb:4},children:[r.jsxs(A,{sx:{p:3,textAlign:"center",minWidth:120,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"primary.main",mb:1},children:"24/7"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Há»— trá»£ CÃ³ sáºµn"})]}),r.jsxs(A,{sx:{p:3,textAlign:"center",minWidth:120,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"success.main",mb:1},children:"< 2h"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Thá»i gian Pháº£n há»“i TB"})]}),r.jsxs(A,{sx:{p:3,textAlign:"center",minWidth:120,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[r.jsx(y,{variant:"h4",sx:{fontWeight:700,color:"warning.main",mb:1},children:"98%"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Tá»· lá»‡ HÃ i lÃ²ng"})]})]})]}),r.jsx(m,{sx:{mb:4},children:r.jsxs(he,{value:e,onChange:(e,t)=>{n(t),1===t&&R()},centered:!0,sx:{"& .MuiTab-root":{fontWeight:600,fontSize:"1rem",textTransform:"none",minHeight:64},"& .MuiTabs-indicator":{height:3,borderRadius:"3px 3px 0 0"}},children:[r.jsx(me,{icon:r.jsx(Nt,{}),label:"LiÃªn há»‡ Há»— trá»£",sx:{minHeight:64,gap:1}}),r.jsx(me,{icon:r.jsx(Pt,{}),label:"Báº£o hÃ nh Sáº£n pháº©m",sx:{minHeight:64,gap:1}})]})}),0===e&&r.jsxs(f,{container:!0,spacing:4,children:[r.jsx(f,{item:!0,xs:12,lg:6,children:r.jsx(O,{sx:{borderRadius:3,height:"fit-content"},children:r.jsxs(_,{sx:{p:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(B,{sx:{bgcolor:"primary.main",mr:2},children:r.jsx(Nt,{})}),r.jsx(y,{variant:"h5",sx:{fontWeight:"bold"},children:"LiÃªn há»‡ vá»›i ChÃºng tÃ´i"})]}),r.jsx(m,{component:"form",onSubmit:async e=>{e.preventDefault(),c(!0);try{const e=await d.sendSupportMessage(i);if(!e.success)throw new Error(e.message||"Failed to send message");k({open:!0,message:"Tin nháº¯n cá»§a báº¡n Ä‘Ã£ Ä‘Æ°á»£c gá»­i thÃ nh cÃ´ng! ChÃºng tÃ´i sáº½ pháº£n há»“i sá»›m nháº¥t cÃ³ thá»ƒ.",severity:"success"}),s({name:"",email:"",subject:"",category:"",message:""})}catch(t){k({open:!0,message:"CÃ³ lá»—i xáº£y ra khi gá»­i tin nháº¯n. Vui lÃ²ng thá»­ láº¡i.",severity:"error"})}finally{c(!1)}},children:r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Há» vÃ  tÃªn",value:i.name,onChange:e=>N("name",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Äá»‹a chá»‰ Email",type:"email",value:i.email,onChange:e=>N("email",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"TiÃªu Ä‘á»",value:i.subject,onChange:e=>N("subject",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Danh má»¥c"}),r.jsx(te,{value:i.category,label:"Danh má»¥c",onChange:e=>N("category",e.target.value),sx:{borderRadius:2},children:[{value:"general",label:"CÃ¢u há»i Tá»•ng quÃ¡t"},{value:"technical",label:"Há»— trá»£ Ká»¹ thuáº­t"},{value:"billing",label:"Thanh toÃ¡n & HÃ³a Ä‘Æ¡n"},{value:"shipping",label:"Váº­n chuyá»ƒn & Giao hÃ ng"},{value:"returns",label:"Äá»•i tráº£ & HoÃ n tiá»n"},{value:"warranty",label:"Báº£o hÃ nh Sáº£n pháº©m"},{value:"product",label:"ThÃ´ng tin Sáº£n pháº©m"},{value:"account",label:"Váº¥n Ä‘á» TÃ i khoáº£n"},{value:"other",label:"KhÃ¡c"}].map(e=>r.jsx(re,{value:e.value,children:e.label},e.value))})]})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"Tin nháº¯n",multiline:!0,rows:4,value:i.message,onChange:e=>N("message",e.target.value),required:!0,placeholder:"Vui lÃ²ng mÃ´ táº£ chi tiáº¿t váº¥n Ä‘á» hoáº·c cÃ¢u há»i cá»§a báº¡n...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(S,{type:"submit",variant:"contained",fullWidth:!0,size:"large",startIcon:l?r.jsx(U,{}):r.jsx(ze,{}),disabled:l,sx:{borderRadius:2,py:1.5,fontSize:"1.1rem",fontWeight:"bold",textTransform:"none"},children:l?"Äang gá»­i...":"Gá»­i Tin nháº¯n"})})]})})]})})}),r.jsxs(f,{item:!0,xs:12,lg:6,children:[r.jsx(O,{sx:{borderRadius:3,mb:4},children:r.jsxs(_,{sx:{p:4},children:[r.jsx(y,{variant:"h5",sx:{fontWeight:"bold",mb:3},children:"Nháº­n Há»— trá»£ Nhanh hÆ¡n"}),r.jsx(f,{container:!0,spacing:3,children:W.map((e,t)=>r.jsx(f,{item:!0,xs:12,children:r.jsxs(A,{sx:{p:3,borderRadius:2,border:"1px solid",borderColor:"divider","&:hover":{borderColor:e.color,boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},transition:"all 0.2s ease"},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[r.jsx(B,{sx:{bgcolor:e.color,mr:2},children:e.icon}),r.jsxs(m,{children:[r.jsx(y,{variant:"h6",sx:{fontWeight:"bold"},children:e.title}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e.description})]})]}),r.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx(y,{variant:"body1",sx:{fontWeight:"bold"},children:e.contact}),r.jsx(v,{label:e.responseTime,size:"small",color:"primary",variant:"outlined"})]})]})},t))})]})}),r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{sx:{p:4},children:[r.jsx(y,{variant:"h5",sx:{fontWeight:"bold",mb:3},children:"ThÃ´ng tin VÄƒn phÃ²ng"}),r.jsxs(ue,{children:[r.jsxs(ge,{children:[r.jsx(Wt,{children:r.jsx(jt,{color:"primary"})}),r.jsx(je,{primary:"Trá»¥ sá»Ÿ ChÃ­nh",secondary:"123 ÄÆ°á»ng CÃ´ng nghá»‡, ThÃ nh phá»‘ Sá»‘, TP.HCM, Viá»‡t Nam"})]}),r.jsxs(ge,{children:[r.jsx(Wt,{children:r.jsx(Je,{color:"primary"})}),r.jsx(je,{primary:"Giá» LÃ m viá»‡c",secondary:"Thá»© Hai - Thá»© SÃ¡u: 9:00 - 18:00"})]}),r.jsxs(ge,{children:[r.jsx(Wt,{children:r.jsx(F,{color:"primary"})}),r.jsx(je,{primary:"Báº£o máº­t",secondary:"Táº¥t cáº£ thÃ´ng tin liÃªn láº¡c Ä‘á»u Ä‘Æ°á»£c mÃ£ hÃ³a vÃ  báº£o máº­t"})]})]})]})})]})]}),1===e&&r.jsxs(f,{container:!0,spacing:4,children:[r.jsx(f,{item:!0,xs:12,lg:6,children:r.jsx(O,{sx:{borderRadius:3,height:"fit-content"},children:r.jsxs(_,{sx:{p:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(B,{sx:{bgcolor:"primary.main",mr:2},children:r.jsx(ae,{})}),r.jsx(y,{variant:"h5",sx:{fontWeight:"bold"},children:"Táº¡o YÃªu cáº§u Báº£o hÃ nh"})]}),r.jsx(m,{component:"form",onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=await d.createWarrantyRequest(a);if(!e.success)throw new Error(e.message||"Failed to create warranty request");k({open:!0,message:"YÃªu cáº§u báº£o hÃ nh Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng! Báº¡n sáº½ nháº­n Ä‘Æ°á»£c email xÃ¡c nháº­n.",severity:"success"}),o({customerName:"",customerEmail:"",customerPhone:"",orderNumber:"",productName:"",productSku:"",issueDescription:"",priority:"NORMAL"}),R()}catch(t){k({open:!0,message:"CÃ³ lá»—i xáº£y ra khi táº¡o yÃªu cáº§u báº£o hÃ nh. Vui lÃ²ng thá»­ láº¡i.",severity:"error"}),h(!1)}},children:r.jsxs(f,{container:!0,spacing:3,children:[r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Há» vÃ  tÃªn",value:a.customerName,onChange:e=>P("customerName",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Email",type:"email",value:a.customerEmail,onChange:e=>P("customerEmail",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"Sá»‘ Ä‘iá»‡n thoáº¡i",value:a.customerPhone,onChange:e=>P("customerPhone",e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsxs(Z,{fullWidth:!0,children:[r.jsx(ee,{children:"Äá»™ Æ°u tiÃªn"}),r.jsx(te,{value:a.priority,label:"Äá»™ Æ°u tiÃªn",onChange:e=>P("priority",e.target.value),sx:{borderRadius:2},children:[{value:"LOW",label:"Tháº¥p"},{value:"NORMAL",label:"BÃ¬nh thÆ°á»ng"},{value:"HIGH",label:"Cao"},{value:"URGENT",label:"Kháº©n cáº¥p"}].map(e=>r.jsx(re,{value:e.value,children:e.label},e.value))})]})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"MÃ£ Ä‘Æ¡n hÃ ng",value:a.orderNumber,onChange:e=>P("orderNumber",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,sm:6,children:r.jsx(K,{fullWidth:!0,label:"TÃªn sáº£n pháº©m",value:a.productName,onChange:e=>P("productName",e.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"MÃ£ sáº£n pháº©m (SKU)",value:a.productSku,onChange:e=>P("productSku",e.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(K,{fullWidth:!0,label:"MÃ´ táº£ váº¥n Ä‘á»",multiline:!0,rows:4,value:a.issueDescription,onChange:e=>P("issueDescription",e.target.value),required:!0,placeholder:"Vui lÃ²ng mÃ´ táº£ chi tiáº¿t váº¥n Ä‘á» báº¡n Ä‘ang gáº·p pháº£i vá»›i sáº£n pháº©m...",sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),r.jsx(f,{item:!0,xs:12,children:r.jsx(S,{type:"submit",variant:"contained",fullWidth:!0,size:"large",startIcon:x?r.jsx(U,{}):r.jsx(ze,{}),disabled:x,sx:{borderRadius:2,py:1.5,fontSize:"1.1rem",fontWeight:"bold",textTransform:"none"},children:x?"Äang gá»­i...":"Gá»­i YÃªu cáº§u Báº£o hÃ nh"})})]})})]})})}),r.jsx(f,{item:!0,xs:12,lg:6,children:r.jsx(O,{sx:{borderRadius:3},children:r.jsxs(_,{sx:{p:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[r.jsx(y,{variant:"h5",sx:{fontWeight:"bold"},children:"YÃªu cáº§u Báº£o hÃ nh cá»§a TÃ´i"}),r.jsx(S,{variant:"outlined",startIcon:r.jsx(U,{}),onClick:R,disabled:b,sx:{borderRadius:2},children:"LÃ m má»›i"})]}),b?r.jsx(m,{sx:{display:"flex",justifyContent:"center",p:4},children:r.jsx(z,{sx:{width:"100%",maxWidth:200}})}):0===g.length?r.jsxs(m,{sx:{textAlign:"center",p:4},children:[r.jsx(Pt,{sx:{fontSize:64,color:"text.secondary",mb:2}}),r.jsx(y,{variant:"h6",color:"text.secondary",sx:{mb:1},children:"ChÆ°a cÃ³ yÃªu cáº§u báº£o hÃ nh nÃ o"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:"Táº¡o yÃªu cáº§u báº£o hÃ nh Ä‘áº§u tiÃªn cá»§a báº¡n"})]}):r.jsx(ye,{children:r.jsxs(we,{children:[r.jsx(It,{children:r.jsxs(Ce,{children:[r.jsx(ke,{sx:{fontWeight:"bold"},children:"MÃ£ yÃªu cáº§u"}),r.jsx(ke,{sx:{fontWeight:"bold"},children:"Sáº£n pháº©m"}),r.jsx(ke,{sx:{fontWeight:"bold"},children:"Tráº¡ng thÃ¡i"}),r.jsx(ke,{sx:{fontWeight:"bold"},children:"Thá»i gian"}),r.jsx(ke,{sx:{fontWeight:"bold"},children:"HÃ nh Ä‘á»™ng"})]})}),r.jsx(Se,{children:g.map(e=>{var t,n,i;return r.jsxs(Ce,{hover:!0,children:[r.jsx(ke,{children:r.jsx(y,{variant:"body2",sx:{fontFamily:"monospace",fontWeight:600},children:e.requestNumber})}),r.jsx(ke,{children:r.jsxs(m,{children:[r.jsx(y,{variant:"body2",sx:{fontWeight:600},children:e.productName}),r.jsx(y,{variant:"caption",color:"text.secondary",children:e.issueDescription})]})}),r.jsx(ke,{children:r.jsx(v,{icon:null==(t=I[e.status])?void 0:t.icon,label:null==(n=I[e.status])?void 0:n.label,color:null==(i=I[e.status])?void 0:i.color,size:"small",variant:"outlined"})}),r.jsx(ke,{children:r.jsx(y,{variant:"body2",children:new Date(e.createdAt).toLocaleDateString("vi-VN")})}),r.jsx(ke,{children:r.jsx(S,{size:"small",variant:"outlined",startIcon:r.jsx(Ye,{}),sx:{borderRadius:2,textTransform:"none"},children:"Chi tiáº¿t"})})]},e.id)})})]})})]})})})]}),r.jsxs(m,{sx:{mt:8},children:[r.jsx(y,{variant:"h4",component:"h2",sx:{fontWeight:"bold",textAlign:"center",mb:1},children:"CÃ¢u há»i thÆ°á»ng gáº·p"}),r.jsx(y,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",mb:4},children:"TÃ¬m cÃ¢u tráº£ lá»i nhanh cho cÃ¡c cÃ¢u há»i phá»• biáº¿n"}),r.jsx(f,{container:!0,spacing:2,children:[{question:"LÃ m tháº¿ nÃ o Ä‘á»ƒ theo dÃµi Ä‘Æ¡n hÃ ng?",answer:'Báº¡n cÃ³ thá»ƒ theo dÃµi Ä‘Æ¡n hÃ ng báº±ng cÃ¡ch Ä‘Äƒng nháº­p vÃ o tÃ i khoáº£n vÃ  truy cáº­p pháº§n "ÄÆ¡n hÃ ng cá»§a tÃ´i". Báº¡n sáº½ nháº­n Ä‘Æ°á»£c thÃ´ng tin theo dÃµi qua email khi Ä‘Æ¡n hÃ ng Ä‘Æ°á»£c giao.',category:"shipping"},{question:"ChÃ­nh sÃ¡ch Ä‘á»•i tráº£ cá»§a báº¡n lÃ  gÃ¬?",answer:"ChÃºng tÃ´i cung cáº¥p chÃ­nh sÃ¡ch Ä‘á»•i tráº£ trong 30 ngÃ y cho háº§u háº¿t cÃ¡c sáº£n pháº©m. Sáº£n pháº©m pháº£i trong tÃ¬nh tráº¡ng nguyÃªn váº¹n vá»›i Ä‘áº§y Ä‘á»§ bao bÃ¬. Má»™t sá»‘ sáº£n pháº©m cÃ³ thá»ƒ cÃ³ chÃ­nh sÃ¡ch Ä‘á»•i tráº£ khÃ¡c.",category:"returns"},{question:"Thá»i gian giao hÃ ng máº¥t bao lÃ¢u?",answer:"Giao hÃ ng tiÃªu chuáº©n máº¥t 3-5 ngÃ y lÃ m viá»‡c. Giao hÃ ng nhanh (1-2 ngÃ y lÃ m viá»‡c) cÃ³ sáºµn vá»›i phÃ­ bá»• sung. Thá»i gian giao hÃ ng quá»‘c táº¿ thay Ä‘á»•i theo Ä‘á»‹a Ä‘iá»ƒm.",category:"shipping"},{question:"Báº¡n cÃ³ giao hÃ ng quá»‘c táº¿ khÃ´ng?",answer:"CÃ³, chÃºng tÃ´i giao hÃ ng Ä‘áº¿n háº§u háº¿t cÃ¡c quá»‘c gia trÃªn tháº¿ giá»›i. Chi phÃ­ vÃ  thá»i gian giao hÃ ng thay Ä‘á»•i theo Ä‘á»‹a Ä‘iá»ƒm. Báº¡n cÃ³ thá»ƒ kiá»ƒm tra tÃ­nh kháº£ dá»¥ng trong quÃ¡ trÃ¬nh thanh toÃ¡n.",category:"shipping"},{question:"Báº¡n cháº¥p nháº­n phÆ°Æ¡ng thá»©c thanh toÃ¡n nÃ o?",answer:"ChÃºng tÃ´i cháº¥p nháº­n táº¥t cáº£ cÃ¡c loáº¡i tháº» tÃ­n dá»¥ng chÃ­nh (Visa, MasterCard, American Express), PayPal, Apple Pay, Google Pay vÃ  chuyá»ƒn khoáº£n ngÃ¢n hÃ ng cho tÃ i khoáº£n doanh nghiá»‡p.",category:"billing"},{question:"LÃ m tháº¿ nÃ o Ä‘á»ƒ Ä‘áº·t láº¡i máº­t kháº©u?",answer:'Nháº¥p vÃ o "QuÃªn máº­t kháº©u" trÃªn trang Ä‘Äƒng nháº­p. Nháº­p Ä‘á»‹a chá»‰ email cá»§a báº¡n vÃ  chÃºng tÃ´i sáº½ gá»­i cho báº¡n má»™t liÃªn káº¿t Ä‘á»ƒ Ä‘áº·t láº¡i máº­t kháº©u.',category:"account"},{question:"ThÃ´ng tin thanh toÃ¡n cá»§a tÃ´i cÃ³ an toÃ n khÃ´ng?",answer:"CÃ³, chÃºng tÃ´i sá»­ dá»¥ng mÃ£ hÃ³a SSL theo tiÃªu chuáº©n ngÃ nh Ä‘á»ƒ báº£o vá»‡ thÃ´ng tin thanh toÃ¡n cá»§a báº¡n. ChÃºng tÃ´i khÃ´ng bao giá» lÆ°u trá»¯ chi tiáº¿t tháº» tÃ­n dá»¥ng trÃªn mÃ¡y chá»§ cá»§a chÃºng tÃ´i.",category:"security"},{question:"TÃ´i cÃ³ thá»ƒ há»§y Ä‘Æ¡n hÃ ng khÃ´ng?",answer:"ÄÆ¡n hÃ ng cÃ³ thá»ƒ Ä‘Æ°á»£c há»§y trong vÃ²ng 1 giá» sau khi Ä‘áº·t náº¿u chÃºng chÆ°a Ä‘Æ°á»£c xá»­ lÃ½ Ä‘á»ƒ giao hÃ ng. LiÃªn há»‡ ngay vá»›i Ä‘á»™i ngÅ© há»— trá»£ cá»§a chÃºng tÃ´i.",category:"general"},{question:"LÃ m tháº¿ nÃ o Ä‘á»ƒ yÃªu cáº§u báº£o hÃ nh?",answer:'Truy cáº­p tab "Báº£o hÃ nh Sáº£n pháº©m" trong trang há»— trá»£. Äiá»n Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘Æ¡n hÃ ng, sáº£n pháº©m vÃ  mÃ´ táº£ váº¥n Ä‘á». ChÃºng tÃ´i sáº½ xá»­ lÃ½ yÃªu cáº§u cá»§a báº¡n trong thá»i gian sá»›m nháº¥t.',category:"general"},{question:"Thá»i gian xá»­ lÃ½ báº£o hÃ nh lÃ  bao lÃ¢u?",answer:"Thá»i gian xá»­ lÃ½ báº£o hÃ nh thÆ°á»ng tá»« 3-7 ngÃ y lÃ m viá»‡c tÃ¹y thuá»™c vÃ o má»©c Ä‘á»™ phá»©c táº¡p cá»§a váº¥n Ä‘á». Báº¡n sáº½ nháº­n Ä‘Æ°á»£c thÃ´ng bÃ¡o qua email vá» tiáº¿n Ä‘á»™ xá»­ lÃ½.",category:"general"}].map((e,t)=>r.jsx(f,{item:!0,xs:12,md:6,children:r.jsxs(At,{sx:{borderRadius:2,mb:1},children:[r.jsx(Rt,{expandIcon:r.jsx(zt,{}),children:r.jsx(y,{sx:{fontWeight:"bold"},children:e.question})}),r.jsx(Tt,{children:r.jsx(y,{color:"text.secondary",sx:{lineHeight:1.6},children:e.answer})})]})},t))})]}),r.jsxs(m,{sx:{mt:8},children:[r.jsx(y,{variant:"h4",component:"h2",sx:{fontWeight:"bold",textAlign:"center",mb:1},children:"Danh má»¥c Há»— trá»£"}),r.jsx(y,{variant:"h6",color:"text.secondary",sx:{textAlign:"center",mb:4},children:"Duyá»‡t cÃ¡c bÃ i viáº¿t há»— trá»£ theo danh má»¥c"}),r.jsx(f,{container:!0,spacing:3,children:[{icon:r.jsx(u,{}),title:"ÄÆ¡n hÃ ng & Váº­n chuyá»ƒn",count:15,color:"primary.main"},{icon:r.jsx(Ot,{}),title:"Thanh toÃ¡n & HÃ³a Ä‘Æ¡n",count:12,color:"success.main"},{icon:r.jsx(U,{}),title:"Äá»•i tráº£ & HoÃ n tiá»n",count:8,color:"warning.main"},{icon:r.jsx(Pt,{}),title:"Báº£o hÃ nh & Sá»­a chá»¯a",count:10,color:"error.main"},{icon:r.jsx(F,{}),title:"TÃ i khoáº£n & Báº£o máº­t",count:10,color:"info.main"},{icon:r.jsx($,{}),title:"ThÃ´ng tin Váº­n chuyá»ƒn",count:6,color:"secondary.main"},{icon:r.jsx(Mt,{}),title:"Há»— trá»£ Tá»•ng quÃ¡t",count:20,color:"primary.dark"}].map((e,t)=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,children:r.jsxs(O,{sx:{borderRadius:3,p:3,textAlign:"center",cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 25px rgba(0,0,0,0.15)"}},children:[r.jsx(B,{sx:{bgcolor:e.color,width:64,height:64,mx:"auto",mb:2},children:e.icon}),r.jsx(y,{variant:"h6",sx:{fontWeight:"bold",mb:1},children:e.title}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:[e.count," articles"]})]})},t))})]}),r.jsx(Et,{open:C.open,autoHideDuration:6e3,onClose:T,anchorOrigin:{vertical:"top",horizontal:"right"},children:r.jsx(ne,{onClose:T,severity:C.severity,children:C.message})})]})}},Symbol.toStringTag,{value:"Module"}));class Sr extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?r.jsx(j,{maxWidth:"sm",sx:{py:8,pt:"40px"},children:r.jsxs(A,{elevation:3,sx:{p:4,textAlign:"center",borderRadius:3},children:[r.jsx(Lt,{sx:{fontSize:80,color:"error.main",mb:3}}),r.jsx(y,{variant:"h5",gutterBottom:!0,color:"error.main",fontWeight:"bold",children:"CÃ³ lá»—i xáº£y ra khi hiá»ƒn thá»‹ Ä‘Æ¡n hÃ ng"}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Vui lÃ²ng táº£i láº¡i trang hoáº·c quay vá» trang chá»§."}),r.jsx(S,{variant:"contained",onClick:()=>window.location.reload(),children:"Táº£i láº¡i"})]})}):this.props.children}}const Cr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n]=o(),i=e(),{notify:s}=Gt(),{clearCart:a}=Ft(),l=t.useRef(new Map),[c,x]=t.useState(null),[h,u]=t.useState(!0),[g,p]=t.useState(!1),[b,w]=t.useState(!1),C=decodeURIComponent(n.get("redirectUrl")||""),[k]=t.useState(!0),I=t.useRef(!1),W=t.useRef(!1);t.useEffect(()=>{const e=localStorage.getItem("disableOrderNotification");w("true"===e);try{localStorage.removeItem("pending_payment_result_redirect")}catch{}},[]),t.useEffect(()=>{const e=n.get("orderNumber"),t="true"===n.get("success"),r=n.get("message");if(p(t),t&&e){if(N(e),!W.current){(async()=>{try{await a(),W.current=!0}catch(e){}})()}}else if(!t){if(e){(async()=>{try{await d.post(`/api/orders/by-number/${e}/cancel`,{reason:"Payment failed - cancelled by system"})}catch(t){}})()}u(!1)}I.current||(t&&!b?(s("Äáº·t hÃ ng thÃ nh cÃ´ng!","success",2500),I.current=!0):t||(s(r||"Thanh toÃ¡n tháº¥t báº¡i!","error",4e3),I.current=!0))},[n,b,a]);const N=t.useCallback(async e=>{if(l.current.has(e))return x(l.current.get(e)),void u(!1);try{const t=await d.getOrderByNumber(e);if(t.success&&t.data){const r=t.data,i=Array.isArray(r.orderItems)?r.orderItems:[],s={id:r.id,orderNumber:r.orderNumber,status:r.status,totalAmount:r.totalAmount,subtotal:r.totalAmount-(r.shippingAmount||0)-(r.discountAmount||0),taxAmount:0,shippingAmount:r.shippingAmount||0,discountAmount:r.discountAmount||0,items:i.map(e=>({id:e.id,product:{id:e.id,name:e.productName,imageUrl:"/images/home.png",price:e.price},quantity:e.quantity,price:e.price})),createdAt:r.createdAt||(new Date).toISOString(),paymentMethod:(n.get("paymentMethod")||r.paymentMethod||"VNPAY").toUpperCase(),shippingAddress:r.shippingAddress||"Äá»‹a chá»‰ khÃ´ng cÃ³ sáºµn"};l.current.set(e,s),x(s)}else x(null)}catch(t){!t||"object"!=typeof t||!("message"in t)||String(t.message),s("KhÃ´ng thá»ƒ táº£i thÃ´ng tin Ä‘Æ¡n hÃ ng","error")}finally{u(!1)}},[s,n]),P=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return h?r.jsx(j,{maxWidth:"lg",sx:{py:8,pt:"40px"},children:r.jsxs(m,{sx:{textAlign:"center"},children:[r.jsx(Ee,{size:60,sx:{color:"primary.main"}}),r.jsx(y,{variant:"h6",sx:{mt:3,color:"text.secondary"},children:"Äang xá»­ lÃ½ thÃ´ng tin Ä‘Æ¡n hÃ ng..."})]})}):g?c?r.jsx(Sr,{children:r.jsxs(j,{maxWidth:"lg",sx:{py:4,pt:"40px"},children:[k&&r.jsx(A,{elevation:0,sx:{p:4,mb:4,textAlign:"center",borderRadius:3,background:"linear-gradient(135deg, #4CAF50 0%, #45a049 100%)",color:"white",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 30% 20%, rgba(255,255,255,0.1) 0%, transparent 50%)",pointerEvents:"none"}},children:r.jsxs(m,{sx:{position:"relative",zIndex:1},children:[r.jsx(Fe,{sx:{fontSize:80,mb:2,filter:"drop-shadow(0 4px 8px rgba(255,255,255,0.3))",animation:"pulse 2s infinite"}}),r.jsx(y,{variant:"h3",gutterBottom:!0,fontWeight:"bold",children:"Äáº·t hÃ ng thÃ nh cÃ´ng!"}),r.jsx(y,{variant:"h6",sx:{opacity:.9,mb:2},children:"Cáº£m Æ¡n báº¡n Ä‘Ã£ mua sáº¯m táº¡i ShopPro"}),r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2,alignItems:"center"},children:[r.jsx(v,{label:`MÃ£ Ä‘Æ¡n hÃ ng: ${c.orderNumber}`,sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontSize:"1.1rem",fontWeight:"bold",border:"1px solid rgba(255,255,255,0.3)"}}),r.jsx(v,{label:`PhÆ°Æ¡ng thá»©c: ${"COD"===c.paymentMethod?"Thanh toÃ¡n khi nháº­n hÃ ng":"BANK_TRANSFER"===c.paymentMethod?"Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng":"VNPAY"===c.paymentMethod?"VNPay":c.paymentMethod}`,sx:{bgcolor:"rgba(255,255,255,0.15)",color:"white",fontSize:"0.9rem",fontWeight:"normal",border:"1px solid rgba(255,255,255,0.2)"}})]})]})}),C&&c&&("VNPAY"===c.paymentMethod||"MOMO"===c.paymentMethod)&&r.jsx(A,{elevation:2,sx:{p:3,borderRadius:2,mb:3},children:r.jsxs(m,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:2},children:[r.jsxs(m,{children:[r.jsx(y,{variant:"h6",fontWeight:"bold",children:"Tiáº¿p tá»¥c thanh toÃ¡n"}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["ÄÆ¡n hÃ ng Ä‘ang chá» thanh toÃ¡n qua ",c.paymentMethod,". Nháº¥n nÃºt bÃªn pháº£i Ä‘á»ƒ tá»›i cá»•ng thanh toÃ¡n."]})]}),r.jsx(S,{variant:"contained",color:"primary",size:"large",endIcon:r.jsx(nt,{}),onClick:()=>window.location.href=C,children:"Thanh toÃ¡n ngay"})]})}),r.jsxs(f,{container:!0,spacing:4,children:[r.jsx(f,{item:!0,xs:12,md:8,children:r.jsxs(A,{elevation:2,sx:{p:4,borderRadius:3,mb:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(Qe,{sx:{fontSize:32,color:"primary.main",mr:2}}),r.jsx(y,{variant:"h5",fontWeight:"bold",children:"Chi tiáº¿t Ä‘Æ¡n hÃ ng"})]}),r.jsx(Le,{sx:{mb:3}}),r.jsx(m,{sx:{mb:4},children:c.items.map(e=>r.jsx(O,{sx:{mb:2,borderRadius:3,boxShadow:"0 4px 12px rgba(0,0,0,0.1)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 24px rgba(0,0,0,0.15)"}},children:r.jsx(_,{sx:{p:3},children:r.jsxs(f,{container:!0,spacing:3,alignItems:"center",children:[r.jsx(f,{item:!0,xs:3,sm:2,children:r.jsx(B,{src:e.product.imageUrl,variant:"rounded",sx:{width:80,height:80,borderRadius:2,boxShadow:"0 2px 8px rgba(0,0,0,0.1)"}})}),r.jsxs(f,{item:!0,xs:9,sm:7,children:[r.jsx(y,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:e.product.name}),r.jsx(m,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:r.jsx(v,{label:`Sá»‘ lÆ°á»£ng: ${e.quantity}`,size:"small",color:"primary",variant:"outlined"})}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["ÄÆ¡n giÃ¡: ",P(e.price/e.quantity)]})]}),r.jsxs(f,{item:!0,xs:12,sm:3,sx:{textAlign:{xs:"left",sm:"right"}},children:[r.jsx(y,{variant:"h6",color:"primary.main",fontWeight:"bold",children:P(e.price)}),r.jsxs(y,{variant:"body2",color:"text.secondary",children:["Tá»•ng: ",P(e.price*e.quantity)]})]})]})})},e.id))}),r.jsxs(m,{sx:{bgcolor:"grey.50",p:3,borderRadius:2},children:[r.jsx(y,{variant:"h6",fontWeight:"bold",gutterBottom:!0,children:"Tá»•ng cá»™ng"}),r.jsxs(f,{container:!0,spacing:2,children:[r.jsx(f,{item:!0,xs:6,children:r.jsx(y,{variant:"body2",color:"text.secondary",children:"Táº¡m tÃ­nh:"})}),r.jsx(f,{item:!0,xs:6,sx:{textAlign:"right"},children:r.jsx(y,{variant:"body2",children:P(c.subtotal)})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(y,{variant:"body2",color:"text.secondary",children:"Thuáº¿:"})}),r.jsx(f,{item:!0,xs:6,sx:{textAlign:"right"},children:r.jsx(y,{variant:"body2",children:P(c.taxAmount)})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(y,{variant:"body2",color:"text.secondary",children:"PhÃ­ váº­n chuyá»ƒn:"})}),r.jsx(f,{item:!0,xs:6,sx:{textAlign:"right"},children:r.jsx(y,{variant:"body2",children:P(c.shippingAmount)})}),c.discountAmount>0&&r.jsxs(r.Fragment,{children:[r.jsx(f,{item:!0,xs:6,children:r.jsx(y,{variant:"body2",color:"success.main",children:"Giáº£m giÃ¡:"})}),r.jsx(f,{item:!0,xs:6,sx:{textAlign:"right"},children:r.jsxs(y,{variant:"body2",color:"success.main",children:["-",P(c.discountAmount)]})})]}),r.jsx(f,{item:!0,xs:12,children:r.jsx(Le,{sx:{my:1}})}),r.jsx(f,{item:!0,xs:6,children:r.jsx(y,{variant:"h6",fontWeight:"bold",children:"Tá»•ng cá»™ng:"})}),r.jsx(f,{item:!0,xs:6,sx:{textAlign:"right"},children:r.jsx(y,{variant:"h6",color:"primary.main",fontWeight:"bold",children:P(c.totalAmount)})})]})]})]})}),r.jsxs(f,{item:!0,xs:12,md:4,children:[r.jsxs(A,{elevation:2,sx:{p:4,borderRadius:3,mb:4},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx(Bt,{sx:{fontSize:28,color:"primary.main",mr:2}}),r.jsx(y,{variant:"h6",fontWeight:"bold",children:"ThÃ´ng tin Ä‘Æ¡n hÃ ng"})]}),r.jsxs(m,{sx:{mb:3},children:[r.jsx(y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"MÃ£ Ä‘Æ¡n hÃ ng"}),r.jsx(y,{variant:"h6",fontWeight:"bold",sx:{mb:2},children:c.orderNumber}),r.jsx(y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"NgÃ y Ä‘áº·t hÃ ng"}),r.jsx(y,{variant:"body1",sx:{mb:2},children:(R=c.createdAt,new Date(R).toLocaleDateString("vi-VN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}))}),r.jsx(y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"PhÆ°Æ¡ng thá»©c thanh toÃ¡n"}),r.jsx(v,{label:c.paymentMethod,color:"primary",variant:"outlined",sx:{mb:2}}),r.jsx(y,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Äá»‹a chá»‰ giao hÃ ng"}),r.jsx(y,{variant:"body2",sx:{mb:2},children:c.shippingAddress})]})]}),r.jsxs(A,{elevation:2,sx:{p:4,borderRadius:3},children:[r.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[r.jsx($,{sx:{fontSize:28,color:"primary.main",mr:2}}),r.jsx(y,{variant:"h6",fontWeight:"bold",children:"BÆ°á»›c tiáº¿p theo"})]}),r.jsxs(He,{orientation:"vertical",sx:{mt:2},children:[r.jsxs(Ue,{active:!0,completed:!1,children:[r.jsx(Ge,{sx:{"& .MuiStepLabel-label":{fontWeight:"bold",color:"primary.main"}},children:r.jsx(y,{variant:"body1",fontWeight:"medium",children:"Chá» xÃ¡c nháº­n"})}),r.jsxs($t,{children:[r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ChÃºng tÃ´i sáº½ liÃªn há»‡ xÃ¡c nháº­n Ä‘Æ¡n hÃ ng trong vÃ²ng 24h"}),r.jsx(v,{label:"Äang xá»­ lÃ½",size:"small",color:"primary",variant:"outlined"})]})]}),r.jsxs(Ue,{active:!1,completed:!1,children:[r.jsx(Ge,{children:r.jsx(y,{variant:"body1",fontWeight:"medium",children:"Chuáº©n bá»‹ hÃ ng"})}),r.jsxs($t,{children:[r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"ÄÆ¡n hÃ ng sáº½ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i vÃ  chuáº©n bá»‹ giao"}),r.jsx(v,{label:"Chá» xá»­ lÃ½",size:"small",color:"default",variant:"outlined"})]})]}),r.jsxs(Ue,{active:!1,completed:!1,children:[r.jsx(Ge,{children:r.jsx(y,{variant:"body1",fontWeight:"medium",children:"Giao hÃ ng"})}),r.jsxs($t,{children:[r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Sáº£n pháº©m sáº½ Ä‘Æ°á»£c giao Ä‘áº¿n Ä‘á»‹a chá»‰ báº¡n Ä‘Ã£ cung cáº¥p"}),r.jsx(v,{label:"Chá» xá»­ lÃ½",size:"small",color:"default",variant:"outlined"})]})]})]})]})]})]}),r.jsxs(A,{elevation:2,sx:{p:4,borderRadius:3,mt:4,background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)",border:"1px solid rgba(0,0,0,0.05)"},children:[r.jsx(y,{variant:"h6",textAlign:"center",fontWeight:"bold",sx:{mb:3},children:"Báº¡n muá»‘n lÃ m gÃ¬ tiáº¿p theo?"}),r.jsxs(m,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2,justifyContent:"center"},children:[r.jsx(S,{variant:"contained",size:"large",startIcon:r.jsx(Qe,{}),onClick:()=>i("/orders"),sx:{borderRadius:3,px:4,py:1.5,fontSize:"1.1rem",fontWeight:"bold",boxShadow:"0 4px 12px rgba(25, 118, 210, 0.3)",transition:"all 0.3s ease","&:hover":{boxShadow:"0 6px 16px rgba(25, 118, 210, 0.4)",transform:"translateY(-2px)"}},children:"Xem Ä‘Æ¡n hÃ ng"}),r.jsx(S,{variant:"outlined",size:"large",startIcon:r.jsx(G,{}),onClick:()=>i("/products"),sx:{borderRadius:3,px:4,py:1.5,fontSize:"1.1rem",fontWeight:"bold",borderWidth:2,transition:"all 0.3s ease","&:hover":{borderWidth:2,transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:"Tiáº¿p tá»¥c mua sáº¯m"}),r.jsx(S,{variant:"outlined",size:"large",startIcon:r.jsx(Y,{}),onClick:()=>i("/"),sx:{borderRadius:3,px:4,py:1.5,fontSize:"1.1rem",fontWeight:"bold",borderWidth:2,transition:"all 0.3s ease","&:hover":{borderWidth:2,transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"}},children:"Vá» trang chá»§"})]}),r.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:3,pt:3,borderTop:"1px solid rgba(0,0,0,0.1)"},children:r.jsx(ht,{control:r.jsx(mt,{checked:b,onChange:e=>{const t=e.target.checked;w(t),localStorage.setItem("disableOrderNotification",t.toString())},sx:{color:"primary.main","&.Mui-checked":{color:"primary.main"}}}),label:r.jsx(y,{variant:"body2",color:"text.secondary",children:"KhÃ´ng hiá»ƒn thá»‹ thÃ´ng bÃ¡o Ä‘áº·t hÃ ng thÃ nh cÃ´ng"}),sx:{"& .MuiFormControlLabel-label":{fontSize:"0.9rem",color:"text.secondary"}}})})]})]})}):r.jsx(j,{maxWidth:"sm",sx:{py:8,pt:"40px"},children:r.jsxs(A,{elevation:3,sx:{p:4,textAlign:"center",borderRadius:3},children:[r.jsx(Lt,{sx:{fontSize:80,color:"error.main",mb:3}}),r.jsx(y,{variant:"h4",gutterBottom:!0,color:"error.main",fontWeight:"bold",children:"KhÃ´ng tÃ¬m tháº¥y Ä‘Æ¡n hÃ ng"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"KhÃ´ng thá»ƒ táº£i thÃ´ng tin Ä‘Æ¡n hÃ ng. Vui lÃ²ng thá»­ láº¡i."}),r.jsx(S,{variant:"contained",startIcon:r.jsx(Y,{}),onClick:()=>i("/"),size:"large",sx:{borderRadius:2},children:"Vá» trang chá»§"})]})}):r.jsx(j,{maxWidth:"sm",sx:{py:8,pt:"40px"},children:r.jsxs(A,{elevation:3,sx:{p:4,textAlign:"center",borderRadius:3},children:[r.jsx(Lt,{sx:{fontSize:80,color:"error.main",mb:3}}),r.jsx(y,{variant:"h4",gutterBottom:!0,color:"error.main",fontWeight:"bold",children:"Thanh toÃ¡n tháº¥t báº¡i"}),r.jsx(y,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"CÃ³ lá»—i xáº£y ra trong quÃ¡ trÃ¬nh thanh toÃ¡n. Vui lÃ²ng thá»­ láº¡i."}),r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(S,{variant:"contained",color:"error",startIcon:r.jsx(U,{}),onClick:()=>i("/checkout"),size:"large",sx:{borderRadius:2},children:"Thá»­ láº¡i thanh toÃ¡n"}),r.jsx(S,{variant:"outlined",startIcon:r.jsx(Y,{}),onClick:()=>i("/"),size:"large",sx:{borderRadius:2},children:"Vá» trang chá»§"})]})]})});var R}},Symbol.toStringTag,{value:"Module"})),kr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[n]=o(),i=e(),[s,a]=t.useState(!0),[l,c]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const e={};n.forEach((t,r)=>{e[r]=t});const t=e.vnp_ResponseCode,r=e.vnp_TxnRef,s=e.vnp_TransactionNo,a=e.vnp_Amount;if("00"===t&&r){const e=`Thanh toÃ¡n thÃ nh cÃ´ng vá»›i mÃ£ giao dá»‹ch ${s}. Sá»‘ tiá»n: ${parseInt(a||"0")/100} VND`,t=`/payment-result?orderNumber=${r}&success=true&message=${encodeURIComponent(e)}&paymentMethod=VNPAY`;i(t)}else{let r="Thanh toÃ¡n khÃ´ng thÃ nh cÃ´ng";t&&(r+=` (MÃ£ lá»—i: ${t})`),e.vnp_OrderInfo&&(r+=`. ${e.vnp_OrderInfo}`);const n=`/payment-result?success=false&message=${encodeURIComponent(r)}&paymentMethod=VNPAY`;i(n)}}catch(e){c(e.message||"CÃ³ lá»—i xáº£y ra khi xá»­ lÃ½ thanh toÃ¡n"),setTimeout(()=>{i("/payment-result?success=false&message="+encodeURIComponent(e.message||"Thanh toÃ¡n tháº¥t báº¡i"))},2e3)}finally{a(!1)}})()},[n,i]),s?r.jsxs(m,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:2,children:[r.jsx(Ee,{}),r.jsx(y,{children:"Äang xá»­ lÃ½ thanh toÃ¡n..."})]}):l?r.jsxs(m,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",gap:2,children:[r.jsx(ne,{severity:"error",children:l}),r.jsx(y,{children:"Äang chuyá»ƒn hÆ°á»›ng..."})]}):null}},Symbol.toStringTag,{value:"Module"})),Ir=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=c(),i=e(),{logout:s}=Ut(),{notify:a}=Gt(),[o,l]=t.useState("pending"),[x,h]=t.useState(""),[m,u]=t.useState(!1);t.useEffect(()=>{s();const e=new URLSearchParams(n.search).get("token");if(!e)return l("error"),h("Invalid verification link."),u(!0),void a("Invalid verification link.","error");d.verifyEmail(e).then(e=>{e.success?(l("success"),h("Email verified successfully! Redirecting to login..."),a("Email verified successfully! Redirecting to login...","success"),setTimeout(()=>i("/login"),1500)):(l("error"),h(e.message||"Verification failed."),a(e.message||"Verification failed.","error")),u(!0)}).catch(e=>{var t,r,n,i,s,o;const c=(null==(r=null==(t=null==e?void 0:e.response)?void 0:t.data)?void 0:r.message)||(null==(i=null==(n=null==e?void 0:e.response)?void 0:n.data)?void 0:i.error)||(null==(o=null==(s=null==e?void 0:e.response)?void 0:s.data)?void 0:o.body)||"Verification failed. Please try again.";l("error"),h(c),u(!0),a(c,"error")})},[n.search,s,a]);const g=(e,t)=>{"clickaway"!==t&&u(!1)};return r.jsxs(j,{maxWidth:"sm",sx:{mt:8},children:[r.jsxs(A,{sx:{p:4,textAlign:"center"},children:["pending"===o&&r.jsx(Ee,{}),r.jsx(y,{variant:"h5",sx:{mb:2},children:"pending"===o?"Verifying your email...":x}),"success"===o&&r.jsx(S,{variant:"contained",onClick:()=>i("/login"),children:"Go to Login"}),"error"===o&&r.jsx(S,{variant:"outlined",onClick:()=>i("/"),children:"Back to Home"})]}),r.jsx(Et,{open:m,autoHideDuration:4e3,onClose:g,anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(ne,{onClose:g,severity:"success"===o?"success":"error",sx:{width:"100%"},children:x})})]})}},Symbol.toStringTag,{value:"Module"})),Wr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=e(),i=c();return t.useEffect(()=>{const e=new URLSearchParams(i.search).get("token");e?(localStorage.setItem("jwt",e),localStorage.setItem("auth_token",e),localStorage.removeItem("auth_user"),window.location.href="/"):n("/login")},[i,n]),r.jsx("div",{children:"Äang Ä‘Äƒng nháº­p..."})}},Symbol.toStringTag,{value:"Module"})),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=c(),i=e(),s=new URLSearchParams(n.search).get("email")||"",[a,o]=t.useState(""),[l,d]=t.useState(""),[x,h]=t.useState(""),[u,g]=t.useState(""),[p,b]=t.useState(""),[f,v]=t.useState(!1);return r.jsx(j,{maxWidth:"sm",sx:{mt:8},children:r.jsxs(A,{sx:{p:4},children:[r.jsx(y,{variant:"h5",sx:{mb:2},children:"HoÃ n thiá»‡n Ä‘Äƒng kÃ½ tÃ i khoáº£n"}),r.jsxs(y,{variant:"body2",sx:{mb:2},children:["Email: ",r.jsx("b",{children:s})]}),r.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),g(""),b(""),a&&l&&x)if(l===x){v(!0);try{const e=await Zt.post("http://localhost:8080/api/auth/oauth2-signup",{email:s,username:a,password:l});e.data&&e.data.token?(localStorage.setItem("jwt",e.data.token),localStorage.setItem("auth_token",e.data.token),localStorage.setItem("auth_user",JSON.stringify(e.data.user)),b("ÄÄƒng kÃ½ thÃ nh cÃ´ng! Äang chuyá»ƒn hÆ°á»›ng..."),setTimeout(()=>i("/"),1e3)):g(e.data.message||"ÄÄƒng kÃ½ tháº¥t báº¡i.")}catch(t){const e=t instanceof Error?t.message:"ÄÄƒng kÃ½ tháº¥t báº¡i.";g(e)}finally{v(!1)}}else g("Máº­t kháº©u xÃ¡c nháº­n khÃ´ng khá»›p.");else g("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin.")},children:[r.jsx(K,{label:"TÃªn Ä‘Äƒng nháº­p",fullWidth:!0,margin:"normal",value:a,onChange:e=>o(e.target.value),required:!0}),r.jsx(K,{label:"Máº­t kháº©u",type:"password",fullWidth:!0,margin:"normal",value:l,onChange:e=>d(e.target.value),required:!0}),r.jsx(K,{label:"XÃ¡c nháº­n máº­t kháº©u",type:"password",fullWidth:!0,margin:"normal",value:x,onChange:e=>h(e.target.value),required:!0}),u&&r.jsx(ne,{severity:"error",sx:{mt:2},children:u}),p&&r.jsx(ne,{severity:"success",sx:{mt:2},children:p}),r.jsx(m,{sx:{mt:3,display:"flex",justifyContent:"flex-end"},children:r.jsx(S,{type:"submit",variant:"contained",disabled:f,children:"ÄÄƒng kÃ½ & ÄÄƒng nháº­p"})})]})]})})}},Symbol.toStringTag,{value:"Module"})),Pr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const i=e(),[s,a]=t.useState("request"),[o,l]=t.useState(""),[c,x]=t.useState(""),[h,u]=t.useState(""),[g,p]=t.useState(""),[b,f]=t.useState(""),[v,w]=t.useState(""),[C,k]=t.useState(null),[I,W]=t.useState(!1);return r.jsx(j,{maxWidth:"sm",sx:{mt:4,mb:4},children:r.jsxs(A,{elevation:3,sx:{p:4},children:[r.jsx(y,{variant:"h5",gutterBottom:!0,children:"ÄÄƒng kÃ½/ÄÄƒng nháº­p báº±ng sá»‘ Ä‘iá»‡n thoáº¡i"}),C&&r.jsx(ne,{severity:C.type,sx:{mb:2},children:C.text}),"request"===s?r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(K,{label:"Sá»‘ Ä‘iá»‡n thoáº¡i",value:o,onChange:e=>l(e.target.value),fullWidth:!0}),r.jsx(S,{variant:"contained",onClick:async()=>{if(k(null),o.trim()){W(!0);try{const e=await d.sendPhoneOtp(o);e.success?(k({type:"success",text:"ÄÃ£ gá»­i OTP. Vui lÃ²ng kiá»ƒm tra SMS."}),a("verify")):k({type:"error",text:e.message||"Gá»­i OTP tháº¥t báº¡i"})}catch(e){k({type:"error",text:"Gá»­i OTP tháº¥t báº¡i"})}finally{W(!1)}}else k({type:"error",text:"Vui lÃ²ng nháº­p sá»‘ Ä‘iá»‡n thoáº¡i"})},disabled:I,children:"Gá»­i OTP"}),r.jsx(S,{component:n,to:"/signup",children:"Quay vá» Ä‘Äƒng kÃ½ báº±ng email"})]}):r.jsxs(m,{sx:{display:"flex",flexDirection:"column",gap:2},children:[r.jsx(K,{label:"OTP",value:c,onChange:e=>x(e.target.value),fullWidth:!0}),r.jsx(y,{variant:"subtitle1",children:"ThÃ´ng tin tÃ i khoáº£n má»›i (náº¿u chÆ°a cÃ³ tÃ i khoáº£n):"}),r.jsx(K,{label:"Username",value:h,onChange:e=>u(e.target.value),fullWidth:!0}),r.jsx(K,{label:"Máº­t kháº©u",type:"password",value:g,onChange:e=>p(e.target.value),fullWidth:!0}),r.jsx(K,{label:"Há»",value:v,onChange:e=>w(e.target.value),fullWidth:!0}),r.jsx(K,{label:"TÃªn",value:b,onChange:e=>f(e.target.value),fullWidth:!0}),r.jsxs(m,{sx:{display:"flex",gap:2},children:[r.jsx(S,{variant:"contained",onClick:async()=>{if(k(null),c.trim()){W(!0);try{const e=await d.verifyPhoneOtp({phone:o,otp:c,username:h,password:g,firstName:b,lastName:v});e.success?(localStorage.setItem("auth_token",e.data.token),localStorage.setItem("auth_user",JSON.stringify(e.data.user)),k({type:"success",text:"ÄÄƒng kÃ½/ÄÄƒng nháº­p báº±ng sá»‘ Ä‘iá»‡n thoáº¡i thÃ nh cÃ´ng"}),setTimeout(()=>i("/"),1e3)):k({type:"error",text:e.message||"XÃ¡c minh tháº¥t báº¡i"})}catch(e){k({type:"error",text:"XÃ¡c minh tháº¥t báº¡i"})}finally{W(!1)}}else k({type:"error",text:"Vui lÃ²ng nháº­p OTP"})},disabled:I,children:"XÃ¡c minh"}),r.jsx(S,{variant:"text",onClick:()=>a("request"),children:"Nháº­p láº¡i sá»‘ Ä‘iá»‡n thoáº¡i"})]})]})]})})}},Symbol.toStringTag,{value:"Module"})),Ar=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,i]=t.useState([]),[s,a]=t.useState(!0);return t.useEffect(()=>{let e=!0;return a(!0),d.getSaleProducts(24).then(t=>{e&&t.success&&i(t.data)}).finally(()=>{e&&a(!1)}),()=>{e=!1}},[]),r.jsxs(j,{maxWidth:"lg",sx:{mt:4,mb:6},children:[r.jsxs(m,{mb:3,children:[r.jsx(y,{variant:"h4",component:"h1",children:"Sáº£n pháº©m giáº£m giÃ¡"}),r.jsx(y,{color:"text.secondary",children:"Æ¯u Ä‘Ã£i háº¥p dáº«n, sá»‘ lÆ°á»£ng cÃ³ háº¡n"})]}),s?r.jsx("div",{children:"Loading..."}):r.jsx(f,{container:!0,spacing:2,children:e.map(e=>r.jsx(f,{item:!0,xs:12,sm:6,md:4,lg:3,children:r.jsx(O,{children:r.jsxs(_,{children:[r.jsx(y,{variant:"subtitle1",fontWeight:700,children:e.name}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},noWrap:!0,children:e.description||""}),r.jsxs(y,{variant:"h6",color:"primary",children:["$",e.price]}),r.jsx(S,{component:n,to:`/products/${e.id}`,size:"small",sx:{mt:1},children:"Xem chi tiáº¿t"})]})})},e.id))})]})}},Symbol.toStringTag,{value:"Module"})),Rr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const[e,n]=t.useState(null),[i,s]=t.useState([]),[a,o]=t.useState(!1),[l,c]=t.useState(null),[x,h]=t.useState("1");t.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await d.getMLStatus();e.success&&n(e.data)}catch(e){}};return r.jsxs(j,{maxWidth:"lg",sx:{py:4},children:[r.jsx(y,{variant:"h4",component:"h1",gutterBottom:!0,children:"ðŸ¤– ML Recommendation Test"}),r.jsxs(A,{sx:{p:3,mb:3},children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"ML Model Status"}),e?r.jsxs(m,{sx:{display:"flex",alignItems:"center",gap:2},children:[r.jsx(v,{label:e.modelLoaded?"Loaded":"Not Loaded",color:e.modelLoaded?"success":"error"}),r.jsx(y,{variant:"body2",color:"text.secondary",children:e.modelInfo})]}):r.jsx(Ee,{size:24})]}),r.jsxs(A,{sx:{p:3,mb:3},children:[r.jsx(y,{variant:"h6",gutterBottom:!0,children:"Test ML Recommendations"}),r.jsxs(m,{sx:{display:"flex",gap:2,alignItems:"center",mb:2},children:[r.jsx(K,{label:"User ID",value:x,onChange:e=>h(e.target.value),size:"small",type:"number"}),r.jsx(S,{variant:"contained",onClick:async()=>{o(!0),c(null);try{const e=await d.getMLRecommendations(parseInt(x),10);e.success?s(e.data||[]):c(e.message||"Failed to get recommendations")}catch(e){c("Failed to get ML recommendations")}finally{o(!1)}},disabled:a,startIcon:a?r.jsx(Ee,{size:20}):null,children:"Get ML Recommendations"})]}),l&&r.jsx(ne,{severity:"error",sx:{mt:2},children:l})]}),i.length>0&&r.jsxs(A,{sx:{p:3},children:[r.jsxs(y,{variant:"h6",gutterBottom:!0,children:["ML Recommendations for User ",x]}),r.jsxs(y,{variant:"body2",color:"text.secondary",sx:{mb:2},children:["Found ",i.length," recommendations"]}),r.jsx(f,{container:!0,spacing:2,children:i.map((e,t)=>{var n;return r.jsx(f,{item:!0,xs:12,sm:6,md:4,children:r.jsx(O,{children:r.jsxs(_,{children:[r.jsx(y,{variant:"h6",noWrap:!0,children:e.name}),r.jsx(y,{variant:"body2",color:"text.secondary",sx:{mb:1},children:e.brand}),r.jsxs(y,{variant:"h6",color:"primary",children:["$",e.price]}),e.salePrice&&r.jsxs(y,{variant:"body2",color:"error",children:["Sale: $",e.salePrice]}),r.jsx(m,{sx:{mt:1},children:r.jsx(v,{label:`Score: ${(null==(n=e.rating)?void 0:n.toFixed(2))||"N/A"}`,size:"small",color:"primary",variant:"outlined"})})]})})},e.id||t)})})]}),0===i.length&&!a&&r.jsx(A,{sx:{p:3,textAlign:"center"},children:r.jsx(y,{variant:"body1",color:"text.secondary",children:'No recommendations yet. Click "Get ML Recommendations" to test.'})})]})}},Symbol.toStringTag,{value:"Module"})),zr=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const n=c(),i=e(),[s,a]=t.useState(""),[o,l]=t.useState(""),[x,h]=t.useState(""),[u,g]=t.useState(!1),[p,b]=t.useState(!1),[f,v]=t.useState(""),[w,C]=t.useState(!1);t.useEffect(()=>{const e=new URLSearchParams(n.search).get("token")||"";a(e)},[n.search]);return r.jsxs(j,{maxWidth:"sm",sx:{mt:8},children:[r.jsxs(A,{sx:{p:4},children:[r.jsx(y,{variant:"h5",sx:{mb:2},children:"Reset Password"}),r.jsxs(m,{component:"form",onSubmit:async e=>{var t,r;if(e.preventDefault(),!s)return C(!0),v("Invalid or missing token."),void b(!0);if(o.length<6)return C(!0),v("Password must be at least 6 characters."),void b(!0);if(o!==x)return C(!0),v("Password confirmation does not match."),void b(!0);try{g(!0);const e=await d.resetPassword(s,o);e.success?(C(!1),v(e.message||"Password reset successfully. Redirecting to login..."),b(!0),setTimeout(()=>i("/login"),1500)):(C(!0),v(e.message||"Password reset failed."),b(!0))}catch(n){C(!0),v((null==(r=null==(t=null==n?void 0:n.response)?void 0:t.data)?void 0:r.message)||"Password reset failed."),b(!0)}finally{g(!1)}},children:[r.jsx(K,{fullWidth:!0,type:"password",label:"New Password",value:o,onChange:e=>l(e.target.value),margin:"normal",required:!0}),r.jsx(K,{fullWidth:!0,type:"password",label:"Confirm New Password",value:x,onChange:e=>h(e.target.value),margin:"normal",required:!0}),r.jsx(S,{type:"submit",variant:"contained",disabled:u,sx:{mt:2},children:u?"Submitting...":"Reset Password"})]})]}),r.jsx(Et,{open:p,autoHideDuration:4e3,onClose:()=>b(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:r.jsx(ne,{onClose:()=>b(!1),severity:w?"error":"success",sx:{width:"100%"},children:f})})]})}},Symbol.toStringTag,{value:"Module"}));export{xr as A,lr as C,ur as F,er as H,hr as L,Rr as M,dr as O,nr as P,vr as R,ar as S,kr as V,jr as W,sr as a,mr as b,pr as c,br as d,fr as e,yr as f,wr as g,Cr as h,Ir as i,Wr as j,Nr as k,Pr as l,Ar as m,zr as n};
